2021-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     NEWS: Prepare for release v2.0.0

2021-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/announce_2.0.0.txt: New file

2021-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Update versions

2021-08-07 Jeffrey Marius <getjff@gmail.com>

     Fix issue #467 Adding wiki as submodule to repo
     
     * bootstrap.conf: Add clone_wiki() and call it from
       bootstrap_post_import_hook().
     
     Signed-off-by: Jeffrey Marius <getjff@gmail.com>

2021-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test--page-requisites.c: Add tests for new rel parsing

2021-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix the rel attribute handling for link tags

2021-07-07 Michael Roosz <michael.roosz@check24.de>

     * libwget/http.c (wget_http_response_cb): Fix chunked transfer

2020-11-22 Sergei Litvin <litvindev@gmail.com>

     Fix parsing comments in <style> content
     
     * libwget/xml.c: Add new function getStyleContent(),
       (parseXML): Use getStyleContent() instead of getContent(),
       update link in comment.

2021-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_html_url_fuzzer.dict: Add 'data:' to dictionary

2021-05-30 Michael Roosz <michael.roosz@check24.de>

     * libwget/html_url.c (html_get_url): Support data: URL in srcset attribute

2021-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Mention that -P creates the prefix directory

2021-05-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test.c: Free memory in test_parse_header_line()

2021-05-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix request path escaping
     
     * include/wget/wget.h: Remove function wget_iri_isunreserved_path().
     * libwget/iri.c: Remove function wget_iri_isunreserved_path().
       (iri_ctype): Extend array with unreserved characters.
       (wget_iri_isunreserved): Simplify code.
       (wget_iri_escape): Use macro iri_isunreserved instead of wget_iri_isunreserved().
       (wget_iri_escape_path): Add RFC links to function comment,
       Fix check whether char needs percent-encoding or not,
       Use macro iri_isunreserved instead of wget_iri_isunreserved().

2021-03-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c: Remove old comment from RFC 2183.

2021-03-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Add test case for Content-Disposition
     
     * libwget/http_parse.c: Update comment with BNF of RFC 6266.
     * unit-tests/test.c: Add test for a filename containing space.

2021-02-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Drop manywarnings and SSL support on FreeBSD CI

2021-02-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Include openssl/asn1.h for ASN1* functions.

2021-02-07 Michael Roosz <michael.roosz@check24.de>

     * src/wget.c (prepare_file): Skip file name filter if config.filter_urls is active

2021-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix building without TLS library
     
     This changes configure semantics to fail if no TLS library
     is found and no --with-ssl=none was explicitly requested.
     It protects users from accidentally building without TLS.
     
     * .gitlab-ci.yml: Tarball build using --with-ssl=none.
     * configure.ac: Stop with error if no TLS was found and --with-ssl
       was not used.
     * tests/libtest.c: Fix issues with conditionally declared variables.

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Allow failure for FreeBSD runner

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Fix for openssl/clang

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-ocsp-server.c: Skip cert revocation check for WolfSSL

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-post-handshake-auth.c (main.c): Fix warning when building with non-gnutls libraries

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Separate GnuTLS in wget2 and in test suite
     
     * configure.ac: Separate GnuTLS in wget2 and in test suite.
     * tests/libtest.c: Use WITH_GNUTLS_OCSP insteadof WITH_OCSP.

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Improve searching for SSL/TLS libraries

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2021-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c (get_tls_version): Fix error in case construct for LibreSSL

2021-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-chunked.c: Extend test with hand-crafted chunked pattern

2021-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_get_response_cb): Remove superfluous space in debug msg

2021-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hsts.c (hsts_db_add_entry): Fix possible NULL access

2021-01-24 Michael Roosz <michael.roosz@check24.de>

     * libwget/http.c (wget_http_get_response_cb): Fix NULL ptr access

2021-01-24 Michael Roosz <michael.roosz@check24.de>

     * libwget/http.c (wget_http_response): Fix buffer overflow

2021-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Detect unresolved AX_ macros

2021-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Use noyywrap for AC_PROG_LEX

2020-12-29 Michael Roosz <michael.roosz@check24.de>

     Fixed error log for non-fatal inflate() return code Z_BUF_ERROR
     
     * libwget/decompressor.c (gzip_decompress): Return 0 for Z_BUF_ERROR.

2021-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix for autoconf 2.70

2021-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap: Update from gnulib

2021-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2021-01-22 Darshit Shah <darnir@gnu.org>

     Update copyright year

2021-01-03 Darshit Shah <git@darnir.net>

     Update POTFILES.in

2021-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Michael Heerklotz [skip ci]

2021-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Michael Roosz [skip ci]

2021-01-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis.yml: Remove unneeded packages for Linux

2021-01-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Small cleanups

2021-01-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Remove superfluous 'x' ahead of variables

2020-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix combination of redirections with --retry-on-http-error
     
     * src/wget.c: Move some code logic around.
     * tests/test-interrupt-response.c: Correct expected wget2 exit status.
     * tests/test-redirection.c: Add tests for --retry-on-http-error.
     
     Reported-by: Sergei Litvin

2020-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (print_version): Print https and ssl properly for OpenSSL and WolfSSL

2020-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Reduce duplicated code in check_status_code_list().
     
     * src/wget.c (check_status_code_list): Call check_statuscode_list().

2020-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (downloader_thread): Add check_statuscode_list() for readability

2020-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename config.http_retry_on_error to config.retry_on_http_error
     
     * src/options.c (options,deinit): Rename.
     * src/wget.c (downloader_thread): Rename.
     * src/wget_options.h (struct config): Rename.

2020-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Add --tries=1 to wget2 command line

2020-12-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Sergei Litvin

2020-12-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test_start_server): Fix warning 'break will never be executed'

2020-12-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test_start_server): Fix unused variable warning

2020-12-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Use AC_CONFIG_MACRO_DIR only once
     
     This fixes #547 (autotools 2.70 is more restrictive).
     Reported by: Gabriele Balducci

2020-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix clang 11 warnings in WolfSSL code.
     
     * libwget/hashfile.c (wget_hash_fast): Cast size_t to unsigned int.
       (wget_hash): Likewise.
     * libwget/ssl_wolfssl.c (ShowX509): Use XFREE without trailing semicolon.
       (wget_ssl_open): Use 64bit to 32bit casts to pacify clang 11.

2020-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix findings from scan-build 11
     
     * libwget/dns.c (wget_dns_resolve): 'rc' was set but not used.
     * libwget/http.c (wget_http_get_response_cb): 'rc' was set but not used.
     * libwget/net.c (wget_tcp_connect): 'rc' was set but not used.
     * libwget/ssl_gnutls.c (send_ocsp_request): 'rc' was set but not used.

2020-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix findings from scan-build 11
     
     * examples/batch_loader.c (_normalize_location): 'rc' was set but not used.
     * examples/check_url_types.c (_normalize_location): 'rc' was set but not used.

2020-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix findings from scan-build 11
     
     * src/job.c (job_validate_file): 'rc' was set but not used.
     * src/options.c (parse_proxy): Fix return value.
     * src/wget.c (input_thread): 'rc' was set but not used.

2020-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix findings from scan-build 11
     
     * tests/libtest.c (_parse_hostname): Fix += into +.
       (_answer_to_connection): Limit scope of body_len.

2020-12-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_response_header): Fix (harmless !?) UB

2020-12-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add -Wno-implicit-int-float-conversion for clang >= 11

2020-12-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix type warnings on 32bit systems
     
     * libwget/http.c (wget_http_get_response_cb): Fix printf format from %lX to %zX.
     * libwget/ssl_openssl.c (wget_ssl_deinit): Fix sesslen to size_t.
     * src/stats_site.c (print_csv_entry): Use %lld and cast to long long.

2020-10-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Test for bashisms in Debian Testing

2020-10-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix configure.ac bashisms
     
     Reported-by: Brian Inglis

2020-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Remove python as dependency
     
     /usr/bin/python don't exist here any more. 'python2' and 'python3' do
     exist.

2020-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2020-10-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix contrib/mingw

2020-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis.yml: libunistring0 -> libunistring

2020-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use brew upgrade for Travis CI OSX

2020-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Update Travis CI to bionic

2020-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis.sh: Output tail -1000 of test logs

2020-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashmap.c (wget_hashmap_iterator_next): Fix segfault

2020-08-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Implement --download-attr=[strippath|usepath]
     
     * docs/wget2.md: Amend docs.
     * src/options.c: Add parse_download_attr(),
       amend option --download-attr.
     * src/wget.c (queue_url_from_remote): Strip path if
       DOWNLOAD_ATTR_STRIPPATH is set.
     * src/wget_options.h: Add enum download_attr_mode.
     * tests/test-download-attr.c: Test strippath and usepath.

2020-08-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Fix indentation, remove leading _ from variable

2020-06-06 Ander Juaristi <a@juaristi.eus>

     Update OCSP responses and certs
     
     tests/certs/ocsp/*: Fix the cert stack for the testing HTTPS+OCSP server.

2020-06-06 Ander Juaristi <a@juaristi.eus>

     libtest: send normal cert chain in OCSP stapling HTTPS server
     
      * tests/libtest.c (_ocsp_stap_cert_callback): rename variable
        'pcert' -> 'certs'.
        (_http_server_start): send normal cert chain in responses.

2020-05-23 Ander Juaristi <a@juaristi.eus>

     OpenSSL: Enable test-ocsp-stap
     
     This commit enables the test `test-ocsp-stap`
     
     It was previously skipped for OpenSSL since OCSP stapling was not
     yet implemented in OpenSSL.
     
     This commit also modifies these tests to pass the --no-ocsp-date flag to
     wget2.
     
      * tests/test-ocsp-stap.c (main): remove ifdef clause; pass
        --no-ocsp-date flag.

2020-05-09 Ander Juaristi <a@juaristi.eus>

     OpenSSL: Implement OCSP stapling
     
     * libwget/ssl_openssl.c (ocsp_resp_cb): new function: stapled OCSP
       response callback.
       (check_ocsp_response): do not check OCSP nonce here.
       (verify_ocsp): check OCSP nonce here.
       (openssl_init): set stapled OCSP callback function, ocsp_resp_cb.
       (openssl_open): send status_request extension in handshake.
     * tests/libtest.c (_http_server_start): Fix callback macro

2020-08-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Create /usr/bin/python before bootstrap

2020-08-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2020-07-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Fix MHD 0.97.1 ABI/API breakage

2020-07-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (init): Fix spelling

2020-06-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Fix crash introduced in fa3c71c85

2020-05-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/decompressor.c (zstd_decompress): Avoid calls to sink with 0 length
     
     Calls to sink() with length == 0 made -S output the header several times when
     Content-Encoding was zstd.

2020-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (wget_ssl_init): Add debug msgs regarding system cert store

2020-04-26 huangzsh7 <huangzsh7@gmail.com>

     Delete obsolete code comment
     
     * src/wget.c (test_modify_hsts): Delete obsolete code comment

2020-04-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove CR and LF from URLs
     
     * libwget/iri.c (iri_unescape_inline): Remove CR/LF from URL.
     * tests/test-base.c: Add CR+LF into URL.
     
     References
     https://gitlab.com/gnuwget/wget2/-/issues/522

2020-04-19 huangzsh7 <huangzsh7@gmail.com>

     Create test cases
     
     * tests/test-wget-1.c (main): Create test cases for --chunk-size with --progress

2020-04-19 huangzsh7 <huangzsh7@gmail.com>

     Add name in AUTHORS for CommitCheck

2020-04-19 huangzsh7 <huangzsh7@gmail.com>

     Fix segmentation faults when chunk-size and progress=bar are present
     
     * src/wget.c (http_send_request): Keep the received response header when use chunk-size and progress=bar

2020-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix warning when converting void * to function pointer
     
     * unit-tests/test-dl.c (test_fn_check): Add #pragma to suppress
       -pedantic when converting void * to function pointer.
     
     POSIX requires a conversion from 'void *' into a function pointer to work.
     But -pedantic throws 'ISO C forbids conversion of object pointer to function
     pointer type'.

2020-04-11 Andreas Schwab <schwab@suse.de>

     Fix strict aliasing violation
     
     * unit-tests/test-dl.c (test_fn_check): Avoid strict aliasing
     violation.

2020-04-11 Andreas Schwab <schwab@suse.de>

     Fix undefined behaviour in test_buffer_printf
     
     * unit-tests/test.c (test_buffer_printf): Cast argument to printf
     function to correct type.

2020-03-25 Ander Juaristi <a@juaristi.eus>

     test-ocsp-stap: Skip
     
     OCSP stapling is not yet supported in OpenSSL.
     
      * tests/test-ocsp-stap.c (main): skip this test in OpenSSL

2020-01-12 Ander Juaristi <a@juaristi.eus>

     OpenSSL: Update stats
     
      * libwget/ssl_openssl.c (openssl_revocation_check_fn): update stats
        (wget_ssl_open): update stats

2019-09-16 Ander Juaristi <a@juaristi.eus>

     OpenSSL: Add OCSP support
     
      * libwget/ssl_gnutls.c: replace _config with config
      * libwget/ssl_openssl.c (wget_ssl_set_config_int): new options
        WGET_SSL_OCSP_NONCE and WGET_SSL_OCSP_DATE.
        (openssl_revocation_check_fn): implement OCSP in the OpenSSL backend,
        and update stats
        (ssl_set_alpn_selected_protocol): update stats
        (verify_hpkp): update stats
        (wget_ssl_open): update stats

2019-10-19 Ander Juaristi <a@juaristi.eus>

     Include serverAuth extension in OCSP certificates
     
     Since the OCSP tests use the same certificate chain for both the OCSP server and
     the HTTPS server, the 'serverAuth' flags needs to be added, in addition to the OCSP flags.
     
     OpenSSL will refuse to run a TLS handshake for HTTPS if that flag is not present.
     
      * tests/certs/ocsp/demoCA/*, tests/certs/ocsp/*.pem: change testing certificates
      * tests/certs/ocsp/ocsp_resp_revoked.der,
        tests/certs/ocsp/ocsp_stapled_resp.der
        tests/certs/ocsp/ocsp_resp_ok.der: update OCSP responses to contain
        the new certificates
      * tests/certs/ocsp/interm.cnf: add the serverAuth extension
      * tests/certs/ocsp/root-template.txt: likewise

2019-09-16 Ander Juaristi <a@juaristi.eus>

     Adapt configure.ac to support multiple SSL/TLS backends
     
     This patch modifies `configure.ac` to support GnuTLS, OpenSSL and wolfSSL as the SSL/TLS backends.
     
     Either of these can be enabled at compile time the `configure` switch `--with-ssl`. Example:
     
         ./configure --with-ssl=openssl
     
     If `--with-ssl` is omitted, the default behavior will be to build with GnuTLS if available, and without
     TLS if not. TLS can be explicitly disabled with `--without-ssl`.
     
     Regardless of which specific backend has been selected, the TLS and OCSP tests will always be built with GnuTLS,
     as that is the only backend currently supported in the test suite.
     
     It renames the constant `HAVE_GNUTLS_OCSP_H` to a more generic `WITH_OCSP`, that captures
     the notion that OCSP has been enabled at compile-time, hiding the specific backend.
     
     Changed files
     
      * configure.ac: honor --with-ssl option, but keep on testing for GnuTLS
        for the test suite.
      * libwget/ssl_gnutls.c: replace HAVE_GNUTLS_OCSP_H with WITH_OCSP
      * libwget/ssl_openssl.c: likewise
      * tests/libtest.c: replace HAVE_GNUTLS_OCSP_H with WITH_OCSP.
        Check for WITH_GNUTLS_IN_TESTSUITE.

2020-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Remove undefining FILE_SYSTEM_PREFIX_LEN

2020-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/dns_cache.c (wget_dns_cache_add): Fix bitwise to logical OR (cppcheck)

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h (wget_hsts_host_match_fn): Fix argument names (cppcheck)

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Work around redundant define in gnulib

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (struct _stats_data_t): Remove unused struct

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c (add_mirror): Code cleanup

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c (metalink_parse): Check return value of wget_strmemcpy_a

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c (html_get_url): Check return value of wget_strmemcpy_a

2020-03-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (wget_tcp_set_bind_address): Simplify code

2020-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (options): Fix indentation and alignment

2020-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix indentation for some tests
     
     * tests/test-parse-css.c: Fix indentation.
     * tests/test-parse-html-css.c: Likewise.
     * tests/test-parse-rss.c: Likewise.

2020-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests for --download-attr
     
     * tests/Makefile.am: Add tests/test-download-attr.c.
     * tests/test-download-attr.c: New file.

2020-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new option --download-attr
     
     * src/options.c (options): Add new option --download-attr.
     * src/wget.c (html_parse): Check for config.download_attr.
     * src/wget_options.h (struct config): Add new member download_attr.

2020-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Implement HTML download attribute
     
     * bootstrap.conf: Add gnulib module 'filename'.
     * src/blacklist.c (get_local_filename_real): Remove const from return type.
       (get_local_filename): Likewise.
     * src/wget.c: Include "filename.h".
       (queue_url_from_remote): Add param 'download_name'.
       (queue_url_from_remote): Change local filename to that given by 'download' tag.
       (html_parse): Create C string from 'download' value.
     * src/wget_blacklist.h (blacklist_entry): Remove const from local_filename.

2020-02-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Parse HTML download attribute
     
     * examples/print_html_urls.c: Print download attribute.
     * include/wget/wget.h (wget_html_parsed_url): Add download member.
     * libwget/html_url.c (html_get_url): Parse download attribute.

2020-03-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_send_request): Fix unused variable without WITH_LIBNGHTTP2

2020-02-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Implement data upload for HTTP/2

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/printf.c (wget_vsnprintf): Fix size in call to wget_buffer_init

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xml.c (parseXML): Remove use of VLA

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_wolfssl.c (wget_ssl_open): Safer code with wget_strmemcpy_a

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/printf.c (wget_printf): Optimize code

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (wget_tcp_set_bind_address): Safer code with wget_strmemcpy_a

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c (add_mirror): Safer code with wget_strmemcpy_a

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (parse_proxies): Safer code with wget_strmemcpy

2020-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c (html_get_url): Simplify code with wget_strmemcpy_a

2020-02-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/valgrind-suppressions: Add GnuTLS suppression

2020-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (sitemap_parse_text): Simplify code by using wget_strmemcpy_a

2020-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (struct optionw): Use fixed length for long_name
     
     This reduces reallocations in the executable, reducing size by ~4k (stripped).

2020-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new function wget_strmemcpy_a
     
     * include/wget/wget.h: Add prototype of wget_strmemcpy_a.
     * src/mem.c: Implement wget_strmemcpy_a.
     * libwget/http_parse.c (wget_http_parse_header_line): Use wget_strmemcpy_a.
     * src/utils.c (mkdir_path): Likewise.

2020-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Let wget_strmemcpy return the number of copied bytes
     
     * include/wget/wget.h: Set return type of wget_strmemcpy to size_t.
     * libwget/mem.c (wget_strmemcpy): Return length of destination string.
     * unit-tests/test.c: Amend tests of wget_strmemcpy.

2020-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml (Scan-Build/Debian): Do not use security checker
     
     The security checker complains about not using the C11 _s functions.
     We don't want to use them, see also
     http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1969.htm

2019-12-09 Suhas K S <suhasks123@gmail.com>

     Add option --bind-interface
     
     * libwget/net.h (wget_tcp_st): New variable
       const char *bind_interface.
     * libwget/net.c: Add function wget_tcp_bind_interface().
       (set_socket_options): Add parameter wget_tcp *tcp and
       implement binding of tcp to bind_interface.
     * libwget/init.c (wget_global_init): Call wget_tcp_bind_interface().
     * include/wget/wget.h: Add wget_tcp_bind_interface() and
       WGET_BIND_INTERFACE.
     * src/options.c: Add --bind-interface handling.
       (init): Call wget_tcp_bind_interface().
     * src/wget2_options.h (config): Add const char *bind_interface.
     * docs/wget2.md: Add documentation for --bind-interface.
     
     This finishes task #430

2020-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     tests/valgrind-suppressions: Add GnuTLS suppression

2020-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend docs regarding -q -O- [skip ci]

2020-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     New configure switch --disable-manylibs
     
     * NEWS: Add --disable-manylibs
     * configure.ac: Implement --disable-manylibs
     * libwget/Makefile.am: Likewise
     
     This switches off building small libraries from libwget functionality groups.

2019-08-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_decompress
     
     * libwget/Makefile.am: Add libwget_decompress.la
     * libwget/test_linking_compress.c: New file

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_netrc
     
     * libwget/Makefile.am: Add libwget_netrc.la
     * libwget/test_linking_netrc.c: New file

2019-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_metalink
     
     * libwget/Makefile.am: Add libwget_metalink.la
     * libwget/test_linking_metalink.c: New file

2019-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_xml
     
     * libwget/Makefile.am: Add libwget_xml.la
     * libwget/test_linking_xml.c: New file

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_http_parse
     
     * libwget/Makefile.am: Add libwget_http_parse.la
     * libwget/test_linking_htp_parse.c: New file

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_tls_session
     
     * libwget/Makefile.am: Add libwget_tls_session.la
     * libwget/test_linking_tls_session.c: New file

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_ocsp
     
     * libwget/Makefile.am: Add libwget_ocsp.la
     * libwget/test_linking_ocsp.c: New file

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_hsts
     
     * libwget/Makefile.am: Add libwget_hsts.la
     * libwget/test_linking_hsts.c: New file

2019-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_robots
     
     * libwget/Makefile.am: Add libwget_robots.la

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_dns
     
     * libwget/Makefile.am: Add libwget_dns.la
     * libwget/test_linking_dns.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_dnscache
     
     * libwget/Makefile.am: Add libwget_dnscache.la
     * libwget/test_linking_dnscache.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_logger
     
     * libwget/Makefile.am: Add libwget_logger.la
     * libwget/test_linking_logger.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_hpkp_db
     
     * libwget/Makefile.am: Add libwget_hpkp_db.la
     * libwget/test_linking_hpkp_db.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_hashfile
     
     * libwget/Makefile.am: Add libwget_hashfile.la
     * libwget/test_linking_hashfile.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_io
     
     * libwget/Makefile.am: Add libwget_io.la
     * libwget/test_linking_io.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_progress
     
     * libwget/Makefile.am: Add libwget_progress.la
     * libwget/test_linking_progress.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_thread
     
     * libwget/Makefile.am: Add libwget_thread.la
     * libwget/test_linking_thread.c: New file

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_css
     
     * libwget/Makefile.am: Add libwget_css.la
     * libwget/test_linking_css.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_iri
     
     * libwget/Makefile.am: Add libwget_iri.la
     * libwget/test_linking_iri.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_encoding
     
     * libwget/Makefile.am: Add libwget_encoding.la
     * libwget/test_linking_encoding.c: New file

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_common
     
     * libwget/Makefile.am: Add libwget_common.la
     * libwget/test_linking_common.c: New file

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_ip
     
     * libwget/Makefile.am: Add libwget_ip.la

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate library libwget_alloc
     
     * libwget/Makefile.am: Add libwget_alloc.la

2019-05-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Patch libtool to add -no-whole-archive
     
     * cfg.mk: Exclude contrib/libtool.patch from 'make syntax-check'
     * configure.ac: Patch libtool
     * contrib/libtool.patch: New file
     * lib/Makefile.am: Unset $LIBS
     * libwget/Makefile.am: Use -no-whole-archive
     
     This patch keeps the libwget libraries short by not adding
     *everything* from lib/libgnu.a.

2020-02-12 Rohan Fletcher <rohfle@gmail.com>

     Skip HTTP/2 testing for test-interrupt-response
     
     * tests/test-interrupt-response.c: Set WGET_TEST_SKIP_H2

2020-02-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Fix badge for Build Status [skip ci]

2020-02-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Build own badges for coverage and fuzz-coverage
     
     * contrib/make-coverage-badge: Add script to create badges
     * .gitlab-ci.yml: Create coverage and fuzz-covrage badges
     * README.md: Display badges

2020-02-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*_fuzer.in/*: Update OSS-Fuzz corpora from upstream

2020-02-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Remove -all-static from AM_LDFLAGS

2020-02-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/README.md: Update docs

2020-02-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add 'linux' to 'tags:'

2020-02-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Make more use of 'restrict' keyword

2020-02-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (safe_ctime): Suppress -Wformat-y2k around strftime %c

2020-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (http_receive_response): Set mtime to last_modified-1 on partial download

2020-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-interrupt-response.c: Fix for wget2, add one more test

2020-01-29 Rohan Fletcher <rohfle@gmail.com>

     Added test simulations of aborts while sending response body
     
     * tests/Makefile.am: add tests/test-interrupt-response test
     * tests/libtest.c (_callback_interruptable, _answer_to_connection):
       add interruptable response callback, enable in wget_test_url_t
       settings
     * tests/libtest.h: added interrupt_response_mode and
       interrupt_response_after_nbytes to wget_test_url_t
     * tests/test-interrupt-response.c: add test for interruptable
       responses and interrupt of responses while timestamping active

2020-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/gpg/pubring.kbx: Update

2020-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Reduce timeout from 10s to 3s

2020-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Amend error output to be more informative / prominent

2020-01-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend retry strategy for job failures
     
     This introduces retries and and pauses for JOBs.
     Formerly, we only had a host failure strategy.
     
     * src/wget_job.h (struct JOB): Add retry_ts and failures
     * src/host.c (_search_queue_for_free_job): Check for pause after failure
     * src/wget.c (downloader_thread): Rearrange code for job retry strategy

2020-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Rohan Fletcher [skip ci]

2020-01-27 Suhas K S <suhasks123@gmail.com>

     Add --background support for Windows
     
     * src/wget.c: Add function make_section_name(),
       fake_fork_child(), fake_fork(), fork_to_background().
       Add struct fake_fork_info.
     * docs/wget2.md: Remove [Not Supported on Windows yet]
       from --background.
     
     Closes issue #457
     
     Copyright-paperwork-exempt: Yes

2020-01-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Use tag 'linux' instead 'docker'

2020-01-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib to fix FreeBSD CI runner
     
     * gnulib: Update
     * .gitlab-ci.yml: Remove --enable-threads=isoc from ./configure

2020-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update to fix use-after-free in glob()
     
     This fixes OSS-Fuzz issue 20176.

2020-01-10 Darshit Shah <darnir@gnu.org>

     * Update copyright year to 2020

2020-01-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.-yml: Add --enable-threads=isoc to FreeBSD configure run

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Do not use -Werror for ./configure run

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Update Makefile.am for latest gnulib
     
     * examples/Makefile.am: Amend LDADD assignment
     * fuzz/Makefile.am: Likewise
     * libwget/Makefile.am: Likewise
     * src/Makefile.am: Likewise
     * tests/Makefile.am: Likewise
     * unit-tests/Makefile.am: Likwise

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix clang warning '-Wunreachable-code' in tests/
     
     * tests/test--https-enforce-hard3.c: Ignore warning via #pragma
     * tests/test--https-enforce-soft2.c: Likewise

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Suppress clang warning '-Watomic-implicit-seq-cst'

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css_tokenizer.lex: Suppress clang warning '-Wextra-semi-stmt'

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: CFLAGS_DEFAULT: -O1 -g -ggdb3
     
     The sanitizer does not work with -O0, changed to -O1.

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove manual copying of gnulib directory

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2020-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Move sanitizer CI runner to Debian unstable

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Enable more sanitizer options for UBSAN and ASAN

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bitmap.c: Fix clang sanitizer's false positive (buffer overflow)

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c: Fix implicit conversion

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Fix implicit conversion

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix implicit conversion -1 to size_t

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test.c: Fix implicit conversions -1 to size_t

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer_printf: Fix implicit conversionsi (use unsigned flag values)

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer_printf: Fix implicit conversions

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_get_response_cb): Fix implicit conversion -1 to size_t

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_numbytes): Fix 8.35133e+19 outside long long range

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/base64.c (wget_base64_decode): Fix implicit conversion 218 to char

2020-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_parse_base): Fix implicit conversion -1 to size_t

2019-12-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_numbytes): Fix implicit conversion to double

2019-12-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test.c (test_mem): Fix buffer overflow in test

2019-12-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/commit-check: Don't say 'not found' if found [skip ci]

2019-12-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix old types in comments [skip ci]

2019-12-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-cut-get-vars.c: Add three more test variations

2019-12-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --cut-file-get-vars creating dirs on single file download
     
     * tests/test-cut-get-vars.c: Amend to reproduce issue #490.
     * src/blacklist.c (get_local_filename_real): Generate basename
       instead of filename, without query.
     * include/wget/wget.h: Add flag WGET_IRI_WITH_QUERY.
       Add param 'flags' to wget_iri_get_basename.
     * libwget/iri.c: Add param 'flags' to wget_iri_get_basename.
       Implement flag WGET_IRI_WITH_QUERY.
     * fuzz/libwget_iri_fuzzer.c (test): Use WGET_IRI_WITH_QUERY.
     
     Closes #490

2019-12-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Add test-cut-get-vars

2019-12-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_iri_get_filename -> wget_iri_get_basename
     
     * fuzz/libwget_iri_fuzzer.c: Likewise.
     * include/wget/wget.h: Likewise.
     * libwget/iri.c: Likewise.
     * src/blacklist.c: Likewise.

2019-12-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix OpenSSL for Win32
     
     * libwget/ssl_openssl.c (wget_ssl_open): Use FD_TO_SOCKET to
       convert POSIX fd to WIN32 socket.
       (ssl_transfer): Use SOCKET_TO_FD to convert WIN32 socket to POSIX fd.
     
     Reported-by: Gisle Vanem

2019-12-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Code cleanup
     
     * src/plugin.c (plugin_db_forward_downloaded_file):
       Change size from uint64_t to int64_t.
     * src/wget_plugin.h (plugin_db_forward_downloaded_file):
       Likewise.
     * src/wget.c (process_response): Likewise.
       Remove n_recurse_iris.

2019-12-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add two new tests for -c
     
     * tests/test-wget-1.c: Test -c with existing empty file.
       Test -c with existing complete file.

2019-12-03 TheAlakazam <piyushjaipuriyar@gmail.com>

     Fix -c with existing zero-length file
     
     * src/wget.c (prepare_file): Replace `> 0` by `>= 0`.
       (wget_http_request): Likewise.
     
     Copyright-paperwork-exempt: Yes

2019-12-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove usage of strerror_r due to diverting GNU/POSIX behavior
     
     * libwget/http_highlevel.c: Likewise
     * libwget/net.c: Likewise
     * src/wget.c: Likewise

2019-11-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update
     
     Fixes #492 (library -lnsl-lintl: not found)

2019-11-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace strerror() by strerror_r() in multi-threaded code
     
     * libwget/http_highlevel.c: Likewise
     * libwget/net.c: Likewise
     * src/wget.c: Likewise

2019-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix for 'Error on unknown value for --with-ssl'

2019-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix for LibreSSL
     
     * libwget/ssl_openssl.c: Some small fixes for LibreSSL
     
     For LibreSSL you need to './configure --with-ssl=openssl'.

2019-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Error on unknown value for --with-ssl

2019-11-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * NEWS: Update

2019-11-05 Darshit Shah <darnir@gnu.org>

     Support terminal hyperlinks in output
     
     Some terminal emulators now allow printing hyperlinks through escape
     sequences. See
     https://gist.github.com/egmontkob/eb114294efbcd5adb1944c9f3cb5feda for
     more information.
     
     Hyperlink support cannot be gauged accurately. And while most terminals
     just ignore the extra escape sequences, older versions of vte actually
     print the URI along with some garbage. So, in this patch, the hyperlink
     support is disabled by default and used only if the user explicitly
     requests it. Once there is a way to query for feature support in
     terminals, this can be intelligently enabled automatically.
     
     * bootstrap.conf: Add new module xgethostname
     * src/wget_options.h: Add a new option hyperlink and a global variable
       hostname
     * src/options.c: Add a new command line option --hyperlink. This is the
       same option name as `ls` from coreutils for consistency across
       programs
       (init): If the user requests hyperlink support, get the hostname and
       store it. This is to prevent having to get the hostname for each
       downloaded file
     * src/wget.c (prepare_file): Print the filename with a hyperlink if the
       user requests it.
     * docs/wget2.md: Add documentation entry for hyperlinks

2019-10-28 Archit Pandey <archpndy@gmail.com>

     Added --convert-file-only handling
     
     * src/options.c: Add --convert-file-only handling
     * src/wget_options.h (config): Add bool convert_file_only
     * src/wget.c (html_parse): conversions initialized when
     convert_file_only is set
     (main): Call convert_links when config.convert_file_only
     (convert_links): move conversion logic to convert_link_whole and
     convert_link_file_only
     New function convert_link_whole: convert whole URL
     New function convert_link_file_only: convert filename part of URLs
     * tests/test-convert-file-only.c: testcase for --convert-file-only
     with -E
     * tests/Makefile.am: add test-convert-file-only object
     * docs/wget2.md: Removed [unimplemented-option] from
     --convert-file-only

2019-11-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix

2019-11-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Fix output, make use of wget_read_file()

2019-11-02 Archit Pandey <archpndy@gmail.com>

     Add --ignore-length handling
     
     * include/wget/wget.h (wget_http_request): Add bool
     response_ignorelength
     (wget_http_response): Add bool length_inconsistent
     * src/options.c: Add --ignore-length handling
     * src/wget_options.h (config): Add bool ignore_length
     (exit_status_e): Add WGET_EXIT_INCONSISTENT_LENGTH
     * libwget/http.c (wget_http_response_cb): Set length_inconsistent
     when mismatch with Content-Length
     * src/wget.c (wget_send_request): Set ignore-length in request
     * tests/test-ignore-length.c: test --ignore-length
     * tests/Makefile.am: add test-ignore-length
     * docs/wget2.md: Removed [unimplemented-option] from
     --ignore-length

2019-10-20 Darshit Shah <darnir@gnu.org>

     src/libwget.doxy.in: Update doxygen file

2019-10-20 Darshit Shah <darnir@gnu.org>

     Explicitly set the FILE_PATTERNS for doxygen
     
     * docs/libwget.doxy.in: Set FILE_PATTERNS to workaround bug in doxygen
       1.8.16
     
     Fix-by: Tim Ruehsen <rockdaboot@gmail.com>

2019-10-03 Darshit Shah <darnir@gnu.org>

     Add license text to files

2019-09-13 Darshit Shah <darnir@gnu.org>

     Fix license of all tests
     
     All the tests in tests/ are part of Wget2 the binary, not libwget. Fix
     the license and copyright information accordingly.
     
     * tests/libtest.c: libwget -> Wget. LGPLv3+ -> GPLv3+
     * tests/test--accept.c: Same
     * tests/test--filter-mime-type.c: Same
     * tests/test--follow-tags.c: Same
     * tests/test--https-enforce-hard1.c: Same
     * tests/test--https-enforce-hard2.c: Same
     * tests/test--https-enforce-hard3.c: Same
     * tests/test--https-enforce-soft1.c: Same
     * tests/test--https-enforce-soft2.c: Same
     * tests/test--https-enforce-soft3.c: Same
     * tests/test--page-requisites.c: Same
     * tests/test--post-file.c: Same
     * tests/test--save-content-on.c: Same
     * tests/test--spider-r.c: Same
     * tests/test-E-k.c: Same
     * tests/test-auth-basic.c: Same
     * tests/test-auth-digest.c: Same
     * tests/test-bad-chunk.c: Same
     * tests/test-base.c: Same
     * tests/test-c-r.c: Same
     * tests/test-chunked.c: Same
     * tests/test-compression.c: Same
     * tests/test-cut-dirs.c: Same
     * tests/test-cut-get-vars.c: Same
     * tests/test-directory-clash.c: Same
     * tests/test-ftp.c: Same
     * tests/test-ftps.c: Same
     * tests/test-gpg-bad.c: Same
     * tests/test-gpg-invalid.c: Same
     * tests/test-gpg-missing.c: Same
     * tests/test-gpg-save-failed.c: Same
     * tests/test-gpg-styles.c: Same
     * tests/test-gpg-valid.c: Same
     * tests/test-gpg-verify-no-file.c: Same
     * tests/test-gzip.c: Same
     * tests/test-i-http.c: Same
     * tests/test-i-https.c: Same
     * tests/test-idn-cmd.c: Same
     * tests/test-idn-meta.c: Same
     * tests/test-idn-robots.c: Same
     * tests/test-include-and-exclude-directories.c: Same
     * tests/test-iri-disabled.c: Same
     * tests/test-iri-forced-remote.c: Same
     * tests/test-iri-list.c: Same
     * tests/test-iri-percent.c: Same
     * tests/test-iri-subdir.c: Same
     * tests/test-iri.c: Same
     * tests/test-k.c: Same
     * tests/test-limit-rate-http2.c: Same
     * tests/test-limit-rate.c: Same
     * tests/test-meta-robots.c: Same
     * tests/test-metalink.c: Same
     * tests/test-np.c: Same
     * tests/test-ocsp-server.c: Same
     * tests/test-ocsp-stap.c: Same
     * tests/test-p-nc.c: Same
     * tests/test-parse-css.c: Same
     * tests/test-parse-html-css.c: Same
     * tests/test-parse-rss.c: Same
     * tests/test-plugin-dummy.c: Same
     * tests/test-plugin-failure.c: Same
     * tests/test-plugin-interception.c: Same
     * tests/test-plugin-nonexistance.c: Same
     * tests/test-plugin.c: Same
     * tests/test-post-handhshake-auth.c: Same
     * tests/test-redirection.c: Same
     * tests/test-restrict-ascii.c: Same
     * tests/test-robots.c: Same
     * tests/test-stats-dns.c: Same
     * tests/test-stats-ocsp.c: Same
     * tests/test-stats-server.c: Same
     * tests/test-stats-site.c: Same
     * tests/test-stats-tls.c: Same
     * tests/test-timestamping.c: Same
     * tests/test-unlink.c: Same
     * tests/test-wget-1.c: Same

2019-09-13 Darshit Shah <darnir@gnu.org>

     * README: Symlink to README.md

2019-09-13 Darshit Shah <darnir@gnu.org>

     * README.md: Add license information

2019-10-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h (wget_bar_slot_begin): Set 'filename' not NONNULL

2019-10-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Switch off Content-Length sanity checks in MHD

2019-10-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test_start_server): Print MHD info

2019-10-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_http_server_start): Fix checks for MHD options

2019-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_send_request): Fix hard-coded GET for HTTP/2

2019-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Fix CI failure

2019-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_http_server_start): Make use of MHD_OPTION_SERVER_INSANITY

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Add wget_test_set_executable() to test suite
     
     * tests/libtest.h: Add declaration of wget_test_set_executable()
     * tests/libtest.c: Add definition of wget_test_set_executable(),
       add global variable 'global_executable',
       (wget_test): Use 'global_executable' to initialize 'executable',
       (wget_test): Use 'executable' if set

2019-10-27 Archit Pandey <archpndy@gmail.com>

     Added options --method, --body-data, --body-file
     
     * src/wget_options.h (config): Added method, body_data, body_file
     * src/options.c (options): Added --method, --body-data, --body-file
     handling
     * src/wget_job.h (JOB): New variable bool redirect_get
     * src/wget.c (http_create_request): Added support for user
     provided HTTP method and request body
     (process_response_header): Set redirect_get to TRUE for 30x
     response codes
     * tests/test-redirection.c: Added test for redirection with
     --method=POST
     * docs/wget2.md: Removed [unimplemented-option] for --method,
     --body-data, --body-file

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Add method check for test suite
     
     * tests/libtest.h: Add expected_method to wget_test_url_t
     * tests/libtest.c (_answer_to_connection): Check method against expected_method

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Free query.params

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix typo: test-post-handhshake-auth -> test-post-handshake-auth
     
     * tests/Makefile.am: Fix typo in handhshake -> handshake
     * tests/test-post-handhshake-auth.c: Rename to tests/test-post-handshake-auth.c

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): More code cleanup

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Simplify URL expansion

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Code cleanup

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-unlink.c (main): Remove double entry from urls

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Set given status code for response

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-metalink.c: Fix test for HTTP/2

2019-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-E-k.c: Fix for HTTP/2 test

2019-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     SKIP tests failing with MHD 0.9.67
     
     * tests/test--https-enforce-hard3.c: Likewise
     * tests/test--https-enforce-soft2.c: Likewise

2019-10-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Fix loading CA certs when 'system' is not supported

2019-10-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix cookie file header to be recognized by 'file'
     
     * libwget/cookie.c: Use uppercase 'Cookie' and 'File'
     * tests/test-cookies.c: Likewise

2019-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new test file test-E-k.c
     
     * tests/Makefile.am: Add test-E-k.c to tests
     * tests/test-E-k.c: New file

2019-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix conversion (-k) in combination with -E
     
     * src/wget.c (prepare_file): Adjust filename in blacklist if changed,
       (conversions): Change type to wget_stringmap,
       (convert_links): Use stringmap instead of vector,
       (hash_conversion): New function to hash conversion key,
       (compare_conversion): New function to compare conversion entries,
       (remember_for_conversion): Use stringmap instead of vector

2019-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new function blacklist_set_filename()
     
     * src/blacklist.c: Implement blacklist_set_filename()
     * src/wget_blacklist.h: Add declaration of blacklist_set_filename()

2019-10-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix type of 2nd param of wget_stringmap_iterator_next() to void **
     
     * include/wget/wget.h: Likewise
     * unit-tests/test.c: Likewise

2019-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Make metalink->iri 'const'
     
     * include/wget/wget.h: Make metalink->iri 'const'
     * libwget/metalink.c (add_mirror): Code cleanup
     * src/wget.c (establish_connection): Skip HTTP mirrors if HTTPS requested,
       (queue_url_from_local): Lock mutex a bit later

2019-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Move applying HSTS to queue_url*() functions
     
     * src/wget.c: Add new function test_modify_hsts(),
       (queue_url_from_local): Call test_modify_hsts(),
       (queue_url_from_remote): Call test_modify_hsts(),
       (try_connection): Remove code for applying HSTS

2019-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Use const wget_iri instances
     
     * src/wget_host.h (host_add, host_get): Add 'const' to param
     * src/host.c: Likewise
     * src/stats_site.c: Add 'const' to wget_iri types
     * src/wget.c: Likewise
     * src/wget_job.h (struct JOB): Add 'const' to 'iri'

2019-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend job_init() to take blacklist_entry instead of wget_iri
     
     * src/wget_job.h: Amend job_init() to take blacklist_entry instead of wget_iri
     * src/job.c: Likewise
     * src/host.c (host_add_robotstxt_job): Amend call to job_init()
     * src/wget.c (queue_url_from_local): Likewise,
       (queue_url_from_remote): Likewise

2019-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Deduplicate code for creating robots.txt jobs
     
     * src/wget.c (queue_url_from_local): Remove duplicated code,
       (queue_url_from_remote): Likewise,
       (set_file_metadata): Amend calling wget_iri_get_connection_part()
     * include/wget/wget.h (wget_iri_parse_base): Add 'const' to 'base' param,
       (wget_iri_get_connection_part): Add 'const' to 'iri' param,
       add second param 'buf'
     * fuzz/libwget_iri_fuzzer.c (test): Amend calling wget_iri_get_connection_part()
     * libwget/iri.c (wget_iri_get_connection_part): Add param 'buf',
       add 'const' to 'iri' param, amend docs,
       (wget_iri_relative_to_abs): Add 'const' to 'base' param,
       amend calling wget_iri_get_connection_part(),
       (wget_iri_parse_base): Add 'const' to 'iri' param
     * src/host.c (host_add_robotstxt_job): Add code removed in wget.c
     * src/wget_host.h: Don't include wget_blacklist.h,
       amend signature of host_add_robotstxt_job()
     * src/wget_job.h (struct JOB): Add 'const' to 'blacklist_entry'

2019-10-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Blacklist changes
     
     * src/wget_main.h: Remove decalration of get_local_filename()
     * src/wget_job.h (struct JOB): Remove local_filename, add blacklist_entry
     * src/wget_host.h: Amend declaration of host_add_robotstxt_job()
     * src/wget_blacklist.h (struct blacklist_entry): Add const to iri,
       add const to param of blacklist_add(),
       add declaration of blacklist_get()
     * src/job.c (job_free): Do not free job->local_filename
     * src/host.c (host_add_robotstxt_job): Param blacklist_entry instead of wget_iri
     * src/gpgme.c (determine_base_file): Fix calls to determine_base_file()
     * src/blacklist.c: Add new function blacklist_get(),
       (blacklist_add): Add const to param, call get_local_filename(),
       (blacklist_init): Amend destructors,
       Remove free_key(),
       Add free_value(),
       Add function get_local_filename(),
       Add function get_local_filename_real()
     * src/wget.c: Remove function get_local_filename(),
       Remove function get_local_filename_real(),
       Use blacklist_entry instead of local_filename

2019-10-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Rename add_url() -> queue_url_from_remote()

2019-10-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Rename add_url_to_queue() -> queue_url_from_local()

2019-10-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup blacklist code
     
     * src/wget_blacklist.h: Add new structure 'blacklist_entry',
       change return type of blacklist_add() to 'blacklist_entry *'
     * src/blacklist.c: Store 'blacklist_entry' instead of 'wget_iri',
       remove mutexes
     * src/wget.c: Amend code in add_url_to_queue() and add_url()

2019-10-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_blacklist.h: Remove unused declaration of in_blacklist()

2019-10-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add pkg-config support for GPGME

2019-10-22 Archit Pandey <archpndy@gmail.com>

     Using --robots=off downloads robots.txt
     
     * src/wget.c (add_url_to_queue): remove config.robots check,
       (add_url): add config.robots check when disallowing URLs
     * tests/test-robots-off.c: New file to test --robots=off behavior
     * tests/Makefile.am: Added test-robots-off
     * tests/test-iri-percent.c: Add check for robots.txt
     * docs/wget2.md: Describe --robots=off behaviour

2019-10-21 Archit Pandey <archpndy@gmail.com>

     Moved WGET_E_GPG_* definitions out of libwget
     
     * libwget/error.c (wget_strerror): Remove WGET_E_GPG_* symbols
     * include/wget/wget.h (wget_error): Remove WGET_E_GPG_* symbol definitions
     * src/wget_gpgme.h: New enum wget_gpg_error to hold WGET_E_GPG_* symbol definitions
     * AUHOTRS: Add archpndy [at] gmail.com
     
     Copyright-paperwork-exempt: Yes

2019-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (prepare_file): Fix regression from commit 3c6f61a8

2019-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (prepare_file): Check '.htm' for -E/--adjust-extension

2019-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (prepare_file): Simplify code to append extension (-E)

2019-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add automated coverity scan
     
     This only works on a branch called 'coverity-scan'

2019-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test_check_file_system): Use memcmp() instead of strcmp()

2019-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Add WGET_GCC_UNUSED_RESULT to wget_hashmap_get and wget_stringmap_get

2019-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats_site.c (stats_site_add): Check return value of wget_stringmap_get()

2019-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (in_directory_pattern_list): Return false if fname is NULL

2019-10-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix NULL dereference in html_parse()
     
     * src/wget.c (html_parse): Add 'filename' to list of params
     
     Under certain conditions (--convert-links) existing files are
     scanned for URLs with 'job' being NULL. We still need a filename
     without getting it from job->local_filename, which would cause a
     NULL pointer dereference.

2019-10-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hsts.c (new_hsts): Check memory allocation

2019-10-08 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/http.c (wget_http_get_response_cb): Don't ignore response body on header callback failure

2019-10-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix directory clash with --no-clobber
     
     * src/wget.c: New functions is_file() and is_directory(),
       (prepare_file): Tune clash checks
     * tests/test-directory-clash.c: Add two more tests

2019-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_connection): Allow list of tokens
     
     This change detects the keep-alive flag in headers like
       Connection: Upgrade, Keep-Alive

2019-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (html_parse): Limit to page requisites only for leaf pages

2019-10-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename --retry-on-http-status to --retry-on-http-error
     
     * docs/wget2.md: Likewise
     * libwget/http.c: Likewise
     * src/options.c: Likewise
     * src/wget.c: Likewise
     * src/wget_options.h: Likewise
     
     Needed for backward compatibility with Wget 1.x.

2019-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-compression.c: Replace malloc() by fixed size array

2019-10-03 Darshit Shah <darnir@gnu.org>

     * configure.ac: Update minimum required version

2019-10-03 Darshit Shah <darnir@gnu.org>

     Update Gnulib
     
     * gnulib: Update submodule
     * bootstrap.conf: Add module access

2019-09-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix bug in wget_dns_cache_add()
     
     * libwget/dns_cache.c (wget_dns_cache_add):
       wget_hashmap_get() gets a cache_entry, not a addrinfo

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove leading WG_ from exit_status_e enums
     
     * src/wget_options.h: Likewise
     * src/wget.c: Likewise
     * src/options.c: Likewise

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Introduce enum type gpg_verify_mode
     
     * src/wget_options.h: Add enum type gpg_verify_mode,
       remove leading WGET_ from GPG_VERIFY enums
     * src/options.c: Use new enum type
     * src/wget.c: Likewise

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_options.h (struct config): Move members from char to bool

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_options.h: Use bool for ocsp_date and ocsp_nonce

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Introduce enum type https_enforce_mode
     
     * src/options.h: Add enum type https_enforce_mode,
       remove leading WGET_ from HTTPS_ENFORCE enums
     * src/options.c: Use new enum type
     * src/wget.c: Likewise

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_stats.h: Remove unused macros

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats_site.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/plugin.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/log.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/job.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/bar.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xml.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_wolfssl.c: Improve C99 compliancy

2019-09-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Rely on gnulib poll module

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/sitemap_url.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/rss_url.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/random.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/logger.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/log.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/init.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_highlevel.c: Improve C99 compliancy

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Use int64_t for time_t to fix 32bit time_t limitations
     
     * include/wget/wget.h: Use int64_t instead of time_t
     * libwget/hpkp.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/tls_session.c: Likewise
     * src/options.c: Likewise
     * src/stats_site.c: Likewise
     * src/wget.c: Likewise
     * tests/libtest.c: Likewise
     * tests/libtest.h: Likewise
     * tests/test-plugin-dummy.c: Likewise
     * unit-tests/test.c: Likewise

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/decompressor.c (lzip_decompress): Fix warning

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix http date functions to use int64_t instead of time_t
     
     * include/wget/wget.h: Change time_t -> int64_t for wget_http_print_date()
       and for wget_http_parse_full_date()
     * libwget/http_parse.c: Likewise

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Print expected+real content of diverting files

2019-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix time_t to int64_t in cookie code
     
     * libwget/cookie.c: Likewise
     * libwget/cookie.h: Likewise

2019-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test-dl.c: Add missing len param to plugin function call

2019-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add Valgrind/i386 runner

2019-09-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Add unit test test-decompress.c
     
     * unit-tests/Makefile.am: Add test-decompress.c
     * unit-tests/test-decompress.c: New file

2019-09-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/decompressor.c (wget_decompress_open): Fix xz decompression

2019-09-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Modify wget_decompress() 2nd arg to const
     
     * include/wget/wget.h: Likewise
     * libwget/decompressor.c: Likewise

2019-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/decompressor.c: Make use LZ_decompress_finish()

2019-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add OSS-Fuzz badge [skip ci]

2019-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Implement Accept-Encoding: lzip including decompressor
     
     * README.md: Mention lzip
     * configure.ac: Detect lzip
     * docs/wget2.md: Document 'lzip'
     * include/wget/wget.h: Add wget_content_encoding_lzip
     * libwget/decompressor.c: Implement lzip decompression
     * libwget/http_parse.c (wget_http_parse_content_encoding): Add "lzip"
     * src/options.c: Add code to support lzip
     * src/wget.c (http_create_request): Add lzip to Accept-Encoding: if available
     * tests/test-compression.c: Add test vector for lzip decompression

2019-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mk_authors: Simplify getting the latest git tag [skip ci]

2019-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mk_authors: Fix getting the latest git tag [skip ci]

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashmap.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/dns_cache.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/dns.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css_url.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/console.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer_printf.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/base64.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove use of !! in src/
     
     * src/host.c: Change return type of _search_host_for_free_job() to bool
     * src/options.c (selftest_options): Make use of bool
     * src/stats_site.c (stats_site_add): Use '!= 0' instead of !!
     * src/wget.c: (_get_local_filename): Change type of directories to bool
     * src/wget_options.h (struct config): Change type of recursive to bool

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/atom_url.c: Improve C99 compliancy

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change type to bool for wget_tcp_set_ssl/wget_tcp_get_ssl
     
     * include/wget/wget.h: Likewise
     * libwget/net.c: Likewise

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Use '!= 0' instead of 'git commit --amend' in libwget/ssl_gnutls.c
     
     * include/wget/wget.h (wget_tls_stats_data): Change type of tfo and false_start to bool
     * libwget/ssl_gnutls.c: Use bool in _session_context,
       remove use of !!

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change return type of wget_tcp_get_tls_false_start() to bool
     
     * include/wget/wget.h: Likewise
     * libwget/net.c: Likewise

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change second param type of wget_tcp_set_tls_false_start() to bool
     
     * include/wget/wget.h: Likewise
     * libwget/net.c: Likewise
     * src/wget_options.h (struct config): Change type of tls_false_start to bool

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change return type of wget_tcp_get_tcp_fastopen() to bool
     
     * include/wget/wget.h: Likewise
     * libwget/net.c: Likewise

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change second param type of wget_tcp_set_tcp_fastopen() to bool
     
     * include/wget/wget.h: Likewise
     * libwget/net.c: Likewise
     * libwget/init.c (wget_global_init): Fix param type to wget_tcp_set_tcp_fastopen()
     * src/wget_options.h (struct config): Change type of tcp_fastopen to bool

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/logger.c: Use '!= 0' instead of !!

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/init.c: Use '!= 0' instead of !!

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Use '!= 0' instead of !!

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Use bool instead of char in HSTS code
     
     * include/wget/wget.h: Change param to bool in wget_hsts_db_add_fn(),
       (struct wget_http_response_st): Use bool for hsts_include_subdomains and keep_alive,
       change param to bool in wget_http_parse_strict_transport_security(),
       change param to bool in wget_http_parse_connection()
     * libwget/hsts.c: change param to bool in new_hsts(),
       change param to bool in wget_hsts_db_add()
     * libwget/http_parse.c: change param to bool in wget_http_parse_strict_transport_security(),
       change param to bool in wget_http_parse_connection()
     * tests/test-plugin-dummy.c: change param to bool in test_hsts_db_add()
     * unit-tests/test.c (test_hsts): Change type of include_subdomains to bool

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change return type of wget_str_needs_encoding() to bool
     
     * include/wget/wget.h: Likewise
     * libwget/encoding.c: Likewise

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie_parse.c (cookie_normalize_cookie): Use '!= 0' instead of !!

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Use bool param for wget_cookie_set_keep_session_cookies()
     
     * include/wget/wget.h: Change second param of wget_cookie_set_keep_session_cookies() to bool
     * libwget/cookie.c: Likewise
     * libwget/init.c (struct _CONFIG): Use bool for cookies_enabled, keep_session_cookies

2019-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/base64.c (_isbase64): Use '!= 0' instead of !!

2019-09-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new cookie test
     
     * tests/Makefile.am: Add test-cookies
     * tests/test-cookies.c: New file

2019-09-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new wget_test() option WGET_TEST_CLEAN_DIRECTORY
     
     * tests/libtest.c: Implement WGET_TEST_CLEAN_DIRECTORY
     * tests/libtest.h: Add WGET_TEST_CLEAN_DIRECTORY

2019-09-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix for reproducible builds
     
     * .gitignore: Remove src/version-text.h
     * cfg.mk: Add rule to update copyright in src/options.c
     * configure.ac: Remove YEAR
     * src/Makefile.am: Remove version-text.h.in
     * src/options.c: Add version text
     * src/version-text.h.in: Deleted
     
     Reported-by: Bernhard M. Wiedemann

2019-09-14 Darshit Shah <darnir@gnu.org>

     * libwget/cookie_parse.c: Fix spelling issue

2019-09-13 Darshit Shah <darnir@gnu.org>

     Don't call libwget as Wget / Wget2.
     
     Functions in Libwget may be called from other client applications as
     well. They should not report that the job was done by Wget / Wget2, but
     instead they should state that it was doen by libwget.
     
     * libwget/bar.c(_bar_update): Remove reference to Wget
     * libwget/list.c: Same
     * libwget/cookie.c(cookie_db_save): Wget -> libwget
     * libwget/error.c(wget_strerror): Same
     * libwget/hpkp_db.c(hpkp_db_save): Same
     * libwget/hsts.c(hsts_db_save): Same
     * libwget/ocsp.c(ocsp_db_save_hosts): Same
     * libwget/printf.c: Same
     * libwget/ssl_gnutls.c(wget_ssl_open: Same
     * libwget/tls_session.c(tls_session_db_save): Same

2019-09-12 Ander Juaristi <a@juaristi.eus>

     OpenSSL: Release cert chain (more memleaks)
     
      * libwget/ssl_openssl.c (_openssl_revocation_check_fn): free
        cert chain in all error paths

2019-09-04 Ander Juaristi <a@juaristi.eus>

     OpenSSL: fix memory leaks

2019-09-11 Darshit Shah <darnir@gnu.org>

     Remove gettext support in tests/
     
     * tests/libtest.h: Remove gettext support entirely
     * tests/test-iri-subdir.c: Needs the string.h header
     * tests/test-limit-rate-http2.c: Same
     * tests/test-limit-rate.c: Same
     * tests/test-metalink.c: Same
     * tests/gpg-test-util.h: Same
     * tests/test-gpg-save-failed.c: Same
     * tests/test-include-and-exclude-directories.c: Same

2019-09-10 Darshit Shah <darnir@gnu.org>

     Use gnulib's update-copyright module
     
     * bootstrap.conf: Add update-copyright module
     * cfg.mk: Setup environment for update-copyright
     * contrib/update_copyright: Remove script no longer used
     * libwget/ssl_openssl: Fix copyright year
     * tests/test-post-handshare-auth.c: Fix copyright years
     * contrib/commit-check: Add copyright and license
     * contrib/mail.sh: Same
     * src/version-text.h.in: Same

2019-09-08 Darshit Shah <darnir@gnu.org>

     Update Copyright statements to be compatible with update-copyright module

2019-09-10 Darshit Shah <darnir@gnu.org>

     Update cfg.mk. Add comments for future
     
     * cfg.mk: Multiple changes.
       (sc_GPL_version): Don't exclude all files when only one has a parsing
       issue
       (sc_po_check): Tests should always output English. Their output is for
       developers, not users
       (sc_prohibit_magic_number_exit): tests/test-plugin.c has a parsing
       issue that has been reported to gnulib. Others should be checked.
       (sc_trailing_blank): Fixed the relevant files instead of ignoring them
       (sc_two_space_separator_in_usage): Doesn't seem to trigger on removal
       (sc_prohibit_empty_lines_at_EOF): Same
       (sc_prohibit_sprintf): Same
       (sc_prohibit_printf): Re-arrange within file
       (sc_prohibit_free): Same
       (sc_prohibit_alloc): Same
       (sc_gettext_printf): Same
     * docs/DoxygenLayout.xml: Remove trailing whitespaces
     * docs/libwget.doxy.in: Same
     * tests/libtest.c: Don't internationalize test suite strings
     * tests/test-*.c: Use EXIT_FAILURE and EXIT_SUCCESS instead of 1 and 0

2019-09-10 Darshit Shah <darnir@gnu.org>

     * cfg.mk: We don't cast arguments to free anywhere

2019-09-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "* cfg.mk: We don't need to exclude gnulib from syntax-check" [ci skip]
     
     This reverts commit 074983606b3536d0cf2677beb0ed523dd43145e3.
     
     Also added a comment in cfg.mk to explain why

2019-08-22 Ander Juaristi <a@juaristi.eus>

     * libwget/ssl_openssl.c: Implement ALPN

2019-09-07 Darshit Shah <darnir@gnu.org>

     * cfg.mk: We don't need to exclude gnulib from syntax-check

2019-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/init.c (wget_global_get_ptr): Fix return type for WGET_COOKIE_DB

2019-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/dns.c: Add constructor & destructor for global mutex

2019-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/http_get.c: Use https:// instead of http://

2019-09-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_html_parsed_url.dir -> wget_html_parsed_url.tag
     
     * include/wget/wget.h: Rename wget_html_parsed_url.dir -> wget_html_parsed_url.tag
     * examples/print_html_urls.c: Likewise
     * libwget/html_url.c: Likewise
     * src/wget.c: Likewise

2019-09-01 Ander Juaristi <a@juaristi.eus>

     OpenSSL: Fix CRL checking
     
     Check CRLs properly on the OpenSSL backend. CRLs were previously bypassed
     because OpenSSL's internal certificate verification function was being overridden.
     
     We need to provide our own verification callback for HPKP and OCSP, but this callback is now
     introduced later in the verification chain, so that it does no longer override OpenSSL's checks.
     
     This commit also re-enables a CRL test on OpenSSL, which would previously only run on the GnuTLS backend.
     
     * libwget/ssl_openssl.c (openssl_init): Register verification callback, rather than revocation one.
       (_openssl_revocation_check_fn): Adhere to verification callback interface.
     * tests/test-i-https.c: Enable CRL test for OpenSSL (but keep it disabled for wolfSSL)
     
     Signed-off-by: Ander Juaristi <a@juaristi.eus>

2019-08-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add script to generate list of authors by # of commits
     
     * .mailmap: Map authors when using different names/email addresses
     * contrib/mk_authors: Create list of authors sorted by # of commits
     * contrib/release: Mention contrib/mk_authors

2019-08-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Release 1.99.2 (beta)

2019-08-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Only use clang's Nullability feature with enabled manywarnings

2019-08-21 Darshit Shah <darnir@gnu.org>

     * bootstrap.conf: Add gnulib modules for non-portable function calls

2019-08-21 Darshit Shah <darnir@gnu.org>

     Remove portability warnings from configure
     
     * configure.ac: Don't warn when we use GNU Make extensions.
     We have already dug into this by disabling the relevant syntax-check
     rule as well. The recent commit adding support for gcov based code
     coverage adds more GNU make specific rules.

2019-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashing with Gcrypt backend

2019-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashing with Nettle backend

2019-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashing with OpenSSL backend

2019-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashing with GnuTLS backend
     
     * libwget/hashfile.c: Fix the GnuTLS functions

2019-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c (wget_hash_file_fd): Do not close fd on error

2019-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashing with WolfTLS backend
     
     * include/wget/wget.h: Change param for wget_hash_init(),
       change param and return type for wget_hash_deinit()
     * libwget/hashfile.c: Rewrite hashing functions for WITH_LIBWOLFCRYPT
     * unit-tests/test.c: Add tests for incremental hashing

2019-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix TLS/hashing detection

2019-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-i-https.c: CRL test only for GnuTLS

2019-08-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Update test suite certs and build script
     
     * tests/certs/revoked-template.txt: New file
     * tests/certs/ca-template.txt: Update
     * tests/certs/generate_certs.sh: Use revoked-template.txt
     * tests/certs/server-template.txt: Update
     * tests/certs/*.pem: Update, generated by generate_certs.sh

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Fix some assignment warnings

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Apply fixes due to rebasing

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c: Make use of WGET_E_UNSUPPORTED

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/error.c (wget_strerror): Add WGET_E_UNSUPPORTED

2019-08-22 Ander Juaristi <ajuaristi@gmx.es>

     Add more hash backends

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Do not translate debug messages

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c (verify_hpkp): Add switch default

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Fix indentation

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c (openssl_load_trust_files_from_directory): Cleanup

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add OpenSSL runner

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Fix WolfSSL CI build

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c (openssl_load_trust_file): Use buffer printf instead of VLA

2019-07-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_openssl.c: Rebase for new stats API

2019-06-17 Ander Juaristi <a@juaristi.eus>

     Rebase wolfssl branch
     
     * configure.ac: Pretty print 'SSL/TLS support'
     * libwget/Makefile.am: Cleanup logic

2019-06-15 Ander Juaristi <a@juaristi.eus>

     * configure.ac: Add SSL/TLS option wolfssl

2018-09-16 Ander Juaristi <a@juaristi.eus>

     SSL/TLS: Add OpenSSL support
     
     * configure.ac: Add --with-ssl=[no,openssl,gnutls], remove --without-gnutls
     * libwget/Makefile.am: Add ssl_openssl.c
     * libwget/ssl_openssl.c: New file
     * po/POTFILES.in: Add libwget/ssl_openssl.c

2019-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add -Wno-used-but-marked-unused to GNULIB_WARN_FLAGS

2019-08-27 DalmeGNU <dalmemail@gmail.com>

     * benchmarks/sources/curl.bench.sh: Build curl with GnuTLS, in order to have SSL support

2019-08-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (_preload_dns_cache): Don't wait for stdin while testing

2019-08-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/spell-checker: Do not check tests/certs/README.md

2019-08-25 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/certs/README.md: Added README for certificate generation

2019-08-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Regenerating certificates for openssl compatibility
     
     * tests/certs/generate_certs.sh: Script for certificate generation
     * tests/certs/x509-ca-cert.pem: CA certificate
     * tests/certs/x509-ca-key.pem: CA key
     * tests/certs/x509-server-cert.pem: Server certificate
     * tests/certs/x509-server-key.pem: Server key
     * tests/certs/x509-server-crl.pem: CRL for the server certificate
     * tests/certs/ca-template.txt: Template for CA Certificate
     * tests/certs/server-template.txt: Template for Server Certificate

2019-08-23 DalmeGNU <dalmemail@gmail.com>

     Recursive mode now works with -N --no-if-modified-since
     
     * src/wget.c: Likewise
     * tests/test-timestamping.c: Added tests for -N -r (with If-Modified-Since) and amended the ones without If-Modified-Since
     * tests/test-include-and-exclude-directories.c: Amended tests that use -N --no-if-modified-since -r
     * tests/test--filter-mime-type.c: Amended tests that use -N --no-if-modified-since -r

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Update NEWS

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix typos

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/spell-checker: Abort on error (set -e)

2019-08-22 DalmeGNU <dalmemail@gmail.com>

     Consider files as 'application/octet-stream' if MIME is not present
     
     * src/wget.c: Likewise, following RFC 7231
     * tests/test--filter-mime-type.c: Added tests to ensure this behavior is present
     * docs/wget2.md: Added this new behavior to the docs

2019-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.h: Include netdb.h for struct addrinfo [skip ci]

2019-08-18 DalmeGNU <dalmemail@gmail.com>

     Implement --no-if-modified-since
     
     * src/options.c: Added new option --if-modified-since, and prevented certain combination of flags
     * src/wget.c: Added -N --no-if-modified-since implementation itself
     * src/wget_job.h: Added bool 'recursive_send_head' to JOB structure
     * src/wget_options.h: Added char 'if_modified_since' to config structure
     * tests/test--accept.c: Added tests that make use of -N --no-if-modified-since
     * tests/test--filter-mime-type.c: Added tests that make use of -N --no-if-modified-since
     * tests/test-include-and-exclude-directories.c: Added tests that make use of -N --no-if-modified-since
     * tests/test-timestamping.c: Added tests for -N --no-if-modified-since
     * docs/wget2.md: Unmarked --no-if-modified-since as "Not Implemented Yet"

2019-08-17 DalmeGNU <dalmemail@gmail.com>

     * src/options.c: Prevent certain combination of flags with -N (as in wget1.x)

2019-08-15 DalmeGNU <dalmemail@gmail.com>

     Move -N mode tests into a separate file
     
     * tests/test-wget-1.c: Removed -N (timestamping) tests
     * tests/test-timestamping.c: Added -N tests from tests/test-wget-1.c
     * tests/Makefile.am: Added tests/test-timestamping.c to Makefile

2019-08-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Use --disable-threads on FreeBSD instead MinGW CI runner

2019-08-20 DalmeGNU <dalmemail@gmail.com>

     * tests/libtest.c: Create directories if needed when creating WGET_TEST_EXISTING_FILES

2019-08-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/utils.c (mkdir_path): Do not write 'fname' param

2019-08-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/Makefile.am: Add -DMALLOC_RETURNS_NONNULL to AM_CFLAGS

2019-08-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: AC_SUBST BZ2_LIBS

2019-08-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/decompressor.c: Improve C99 compliance, check memory allocation

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_insert_ports): Fix for reject_https_connection

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --https-enforce tests
     
     * tests/test--https-enforce-hard3.c: Add --default-http-port={{port}}
     * tests/test--https-enforce-soft1.c: Use WGET_TEST_HTTPS_REJECT_CONNECTIONS
     * tests/test--https-enforce-soft2.c: Use WGET_TEST_HTTP_REJECT_CONNECTIONS
     * tests/test--https-enforce-soft3.c: Remove space (cleanup only)

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test--https-enforce-hard2.c: Allow error code 4 and 5

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Add WGET_TEST_EXPECTED_ERROR_CODE2

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test--https-enforce-hard3.c: Make test behave stable

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test--https-enforce-hard2.c: Make test behave stable

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Add WGET_TEST_HTTP_REJECT_CONNECTIONS to test suite
     
     * tests/libtest.h: Add WGET_TEST_HTTP_REJECT_CONNECTIONS
     * tests/libtest.c: Implement WGET_TEST_HTTP_REJECT_CONNECTIONS

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_set_scheme): Fix amending https port

2019-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Fix 'make code-coverage-capture' for gcc 9

2019-08-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer.c (wget_buffer_deinit): Fix NONNULL issue

2019-08-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (sitemap_parse_xml_gz): Use stack memory for wget_buffer

2019-08-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xml.c (wget_xml_parse_file): Use stack memory for wget_buffer

2019-08-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css.c (wget_css_parse_file): Use stack memory for wget_buffer

2019-08-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer.c: Add examples to documentation

2019-08-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup + amend return vales of buffer functions
     
     * include/wget/wget.h: Add wget_buffer.error
     * libwget/buffer.c: Amend docs,
       change return type of wget_buffer_init(),
       amend wget_buffer_alloc(),
       set buf.error in _buffer_realloc()
     * libwget/printf.c: Check buf.error, return (size_t)-1
     * unit-tests/test.c: Amend tests appropriately

2019-08-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer.c (_buffer_realloc): Make use of realloc() if possible

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix more docs [skip ci]

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix docs for wget_bitmap_init() [skip ci]

2019-08-14 DalmeGNU <dalmemail@gmail.com>

     Improvements on the progress bar
     
     * docs/wget2.md: There is no default progress value
     * src/options.c: If no progress type specifier is given return an error
     * src/wget.c: Set global file size and already downloaded amount when continuing a download

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix checking return value of wget_vector_find()
     
     * src/options.c: Likewise
     * src/wget.c: Likewise

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Fix clang build on FreeBSD

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bitmap.c: Small cleanup

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/Makefile.am: Add -DMALLOC_RETURNS_NONNULL to AM_CFLAGS and AM_CPPFLAGS

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Introduce WGET_E_IO
     
     * include/wget/wget.h: Introduce WGET_E_IO
     * libwget/error.c: Add WGET_E_IO to wget_strerror()
     * libwget/hashfile.c: Make use of WGET_E_IO
     * libwget/io.c: Likewise

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_match_no_proxy): Check value from wget_vector_get()

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename WGET_E_OPEN_FILE -> WGET_E_OPEN
     
     * include/wget/wget.h: Rename WGET_E_OPEN_FILE -> WGET_E_OPEN
     * libwget/io.c: Likewise
     * libwget/netrc.c: Likewise

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup vector functions and docs

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/test_linking.c: Don't give NULL to wget_plugin_get_name()

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_response_header): Check memory allocation

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_highlevel.c (wget_http_get): Check vector creation

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_create_request): Check memory allocation

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp_db.c (hpkp_db_load): Check memory allocations

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/vector.c: Check memory allocation

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Add NULLABLE to more functions

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Fix return values, add memory check

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/job.c (job_validate_file): Fix check for wget_truncate() return

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_parse): Avoid casts to suppress warning

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_parse): Return NULL on unknown scheme

2019-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_parse): Set scheme to -1 if unknown

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/netrc.c (wget_netrc_db_load): Check memory allocation

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_header_line): Check memory allocation

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (_parse_no_proxies): Check memory allocation

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie_parse.c (cookie_normalize_cookie): Check memory allocation

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/batch_loader.c: Check return value of wget_strmemdup()

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/check_url_types.c: Check return value of wget_strmemdup()

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Nullable wget_memdup, wget_strdup, wget_strmemdup

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml (Debian/HTTP2): Allow failure set to true

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/Makefile.am: Add -DMALLOC_RETURNS_NONNULL to AM_CFLAGS and AM_CPPFLAGS

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test-dl.c (string_vector_check): Fix va_list leak

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/tls_session.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/netrc.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ocsp.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hsts.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Check memory allocations

2019-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c (wget_memiconv): Check memory allocations, return WGET_E_* codes

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (wget_tcp_init): Check malloc return value

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Introduce nullability support for clang's static analyzer
     
     * configure.ac: Add -Wno-nullability-extension -Wno-nullability-completeness to WARN_CFLAGS
     * include/wget/wget.h: Add CLANG_VERSION_AT_LEAST,
       fix attribute defines for clang,
       make use of attributes by using static inline functions for wget allocation,
       define NULLABLE for clang
     * libwget/xalloc.c: Rename wget allocation function pointers
     * src/options.c: Likewise
     * unit-tests/test.c: Likewise

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_highlevel.c (wget_http_get): Fix va_list leakage

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Use clang and enable valist checker with scan-build

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/test_linking.c: Fix clang warning (needless semicolon)

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/test_linking.c: Make use of return value of wget_strdup()

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Add -DBUILDING_LIBWGET to AM_CFLAGS

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Define WGET_GCC_RETURNS_NONNULL for clang as well

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (wget_ssl_open): Avoid 0 size VLA

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (http_send_request): Fix possible NULL ptr issue

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_parse_hostname): Silence clang's scan-build

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml (FreeBSD.x86_64): Do not retry after failure

2019-05-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add convenience library for src/utils.c
     
     * src/Makefile.am: Add libtest-utils.la
     * tests/Makefile.am: Add libtest-utils.la to libtest_la_LIBADD

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (_add_authorize_header): Print error if wget_netrc_db_load() fails

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/netrc.c: Code cleanup

2019-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new error code WGET_E_OPEN_FILE

2019-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c: Make code more C99 compliant

2019-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Split hpkp.c into hpkp_db.c, hpkp.c and hpkp.h
     
     * libwget/Makefile.am: Add hpkp.h and hpkp_db.c
     * libwget/hpkp.c: Move HPKP database code to hpkp_db.c
     * libwget/hpkp.h: New file
     * libwget/hpkp_db.c: New file

2019-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Split cookie.c into cookie_parse.c, cookie.c and cookie.h
     
     * libwget/Makefile.am: Add cookie.h and cookie_parse.c
     * libwget/cookie.c: Move cookie parsing code to cookie_parse.c
     * libwget/cookie.h: New file
     * libwget/cookie_parse.c: New file

2019-08-14 DalmeGNU <dalmemail@gmail.com>

     * src/options.c: Don't accept negative numbers as a valid byte amount

2019-08-13 DalmeGNU <dalmemail@gmail.com>

     Implement --start-pos option
     
     * src/wget.c: Added --start-pos implementation
     * src/options.c: Added --start-pos option and resolved flag combination with --continue
     * src/wget_options.h: Added start_pos to the config structure
     * docs/wget2.md: Removed "Not Implemented Yet" label from --start-pos documentation

2019-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c: Cast enums to avoid warnings with clang

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Change return type of wget_hpkp_get_n_pins() to int
     
     * include/wget/wget.h: Change return type of wget_hpkp_get_n_pins() to int
     * libwget/hpkp.c: Likewise
     * unit-tests/test.c: Adjust code, cleanup

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove global wget_iri_schemes[], add wget_iri_scheme enum
     
     * include/wget/wget.h: Remove global wget_iri_schemes[],
       add wget_iri_scheme enum
     * libwget/iri.c: Add struct iri_scheme,
       remove wget_iri_schemes and iri_ports,
       new function wget_iri_scheme_get_name(),
       fix code
     * examples/check_url_types.c: Use comparison instead of wget_strcasecmp
     * fuzz/libwget_iri_fuzzer.c: Use WGET_IRI_SCHEME_HTTPS instead of string
     * libwget/http.c: Use wget_iri_scheme_get_name()
     * libwget/http.h: Change scheme from string to wget_iri_scheme
     * libwget/http_parse.c: Fix wget_http_get_scheme()
     * src/blacklist.c: Fix hash_iri()
     * src/host.c: Fix _host_hash()
     * src/options.c: Use WGET_IRI_SCHEME_* instead of string
     * src/stats_server.c: Use wget_iri_scheme for scheme member
     * src/wget.c: Fix code
     * src/wget_host.h: Use wget_iri_scheme fro scheme member
     * unit-tests/test.c: Fix tests

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Use more bool in HPKP code
     
     * include/wget/wget.h: Use bool for HPKP functions where possible
     * libwget/hpkp.c: Use bool where possible
     * libwget/http_parse.c: Use bool for HPKP functions

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/tls_session.c: Improve C99 compliance and cleanup

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Use more bool in OCSP code
     
     * include/wget/wget.h (wget_ocsp_db_add_fingerprint_fn): bool for last param
     * libwget/ocsp.c: Use bool where possible
     * libwget/ssl_gnutls.c: Use bool for OCSP functions

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/ocsp.c: Improve C99 compliance and cleanup

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/hsts.c: Improve C99 compliance and cleanup

2019-08-13 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/hpkp.c: Improve C99 compliance and cleanup

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add FreeBSD runner

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove variadic macro for wget_printf()
     
     * include/wget/wget.h: Remove variadic macro for wget_printf(),
       add prototype for wget_printf()
     * libwget/printf.c Implement wget_printf(),
       fix some wrongly documented return types

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Make post_handshake_auth static

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Move server stats code from library into wget2 tool
     
     * fuzz/Makefile.am: Add src/stats_server.c
     * src/Makefile.am: Likewise
     * unit-tests/Makefile.am: Likewise
     * include/wget/wget.h: Move `wget_server_stats_data` to src/stats_server.c,
       change wget_server_stats_callback,
       change wget_server_set_stats_callback(),
       add wget_tcp_get_ip(),
       remove host_ips_free()
     * libwget/http.c: Move stats code to src/stats_server.c
     * libwget/net.c: Add wget_tcp_get_ip()
     * src/options.c: Move _hpkp_string() and stats_callback_server() to src/stats_server.c
     * src/wget.c (main): Remove call to host_ips_free()
     * src/wget_stats.h: Add prototypes of stats_server_add, server_stats_init, server_stats_exit

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix variables to wget_stats_format
     
     * src/options.c (parse_stats): Use wget_stats_format instead of char
     * src/wget_options.h (stats_args): Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix variable types of wget_report_speed
     
     * src/options.c (parse_report_speed_type): Fix pointer type
     * src/wget_options.h (struct config): Amend type of report_speed

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add typedef 'wget_transfer_encoding'
     
     * include/wget/wget.h: Add typedef 'wget_transfer_encoding'
     * libwget/http_parse.c: Make use of wget_transfer_encoding

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename HTTP parse callback types
     
     * include/wget/wget.h: Rename HTTP parse callback types
     * examples/getstream.c: Likewise
     * libwget/http.c: Likewise
     * libwget/http_highlevel.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_xml_callback_t -> wget_xml_callback
     
     * include/wget/wget.h: Rename wget_xml_callback_t -> wget_xml_callback
     * libwget/xml.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename CSS parse callback types
     
     * include/wget/wget.h: Rename CSS parse callback types
     * libwget/css.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_decompressor types
     
     * include/wget/wget.h: Rename wget_decompressor types
     * libwget/decompressor.c: Likewise
     * libwget/http.c: Likewise
     * src/options.c: Likewise
     * src/wget_options.h: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_stringmap types
     
     * include/wget/wget.h: Rename wget_stringmap types
     * unit-tests/stringmap_perf.c: Likewise
     * unit-tests/test.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_hashmap types
     
     * include/wget/wget.h: Rename wget_hashmap types
     * libwget/dns_cache.c: Likewise
     * libwget/hashmap.c: Likewise
     * libwget/hpkp.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/http.c: Likewise
     * libwget/netrc.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/stringmap.c: Likewise
     * libwget/tls_session.c: Likewise
     * src/blacklist.c: Likewise
     * src/host.c: Likewise
     * src/wget.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_vector_destructor_t -> wget_vector_destructor
     
     * include/wget/wget.h: Rename wget_vector_destructor_t -> wget_vector_destructor
     * libwget/http.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/vector.c: Likewise
     * src/options.c: Likewise
     * src/plugin.c: Likewise
     * unit-tests/test.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_vector_browse_t -> wget_vector_browse_fn
     
     * include/wget/wget.h: Rename wget_vector_browse_t -> wget_vector_browse_fn
     * libwget/hpkp.c: Likewise
     * libwget/vector.c: Likewise
     * src/stats_site.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_vector_find_t -> wget_vector_find_fn
     
     * include/wget/wget.h: Rename wget_vector_find_t -> wget_vector_find_fn
     * libwget/vector.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_vector_compare_t -> wget_vector_compare_fn
     
     * include/wget/wget.h: Rename wget_vector_compare_t -> wget_vector_compare_fn
     * libwget/cookie.c: Likewise
     * libwget/hpkp.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/metalink.c: Likewise
     * libwget/vector.c: Likewise
     * src/options.c: Likewise
     * tests/test-plugin-dummy.c: Likewise
     * unit-tests/test-dl.c: Likewise
     * unit-tests/test.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_logger_func_t -> wget_logger_func
     
     * include/wget/wget.h: Rename wget_logger_func_t -> wget_logger_func
     * libwget/init.c: Likewise
     * libwget/logger.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h (wget_buffer): Fix typo

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_list_browse_t -> wget_list_browse_fn
     
     * include/wget/wget.h: Rename wget_list_browse_t -> wget_list_browse_fn
     * libwget/list.c: Likewise
     * src/host.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_update_(load|save)_t -> wget_update_(load|save)_fn
     
     * include/wget/wget.h: Rename wget_update_(load|save)_t -> wget_update_(load|save)_fn
     * libwget/cookie.c: Likewise
     * libwget/hpkp.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/io.c: Likewise
     * libwget/tls_session.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_global_get_func_t -> wget_global_func
     
     * include/wget/wget.h: Rename wget_global_get_func_t -> wget_global_func
     * libwget/init.c: Likewise

2019-08-12 Tim Rühsen <tim.ruehsen@gmx.de>

     examples/http_get2.c: Cleanup

2019-08-09 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/test-ocsp-server: Modified to test without OCSP responder's URL

2019-08-10 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Freed read response in-case no request is received by the responder

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Name unnamed enum to wget_report_speed
     
     * include/wget/wget.h: Name unnamed enum to wget_report_speed,
       use wget_report_speed for param of wget_bar_set_speed_type()
     * libwget/bar.c: use wget_report_speed for param of wget_bar_set_speed_type()

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/error.c (wget_strerror): Add missing WGET_E_MEMORY handling

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     wget_strerror(int) -> wget_strerror(wget_error)
     
     * include/wget/wget.h: wget_strerror(int) -> wget_strerror(wget_error)
     * libwget/error.c: Likewise

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Rename wget_error_t -> wget_error

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Remove unused commented code

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Remove unused WGET_PREFIX

2019-08-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (wget_ssl_init): Print priorities correctly on error

2019-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Changed G_GNUC_WGET prefix to WGET_GCC
     
     * include/wget/wget.h: Changed G_GNUC_WGET prefix to WGET_GCC
     * */*.[ch]: Likewise

2019-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add examples/relative_to_absolute_url.c

2019-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Allow -1 as len parameter to wget_iri_relative_to_abs()
     
     * libwget/http_highlevel.c (wget_http_get): Use -1 as len
     * libwget/iri.c (wget_iri_parse_base): Likewise
     * src/wget.c (process_response_header): Likewise
     * unit-tests/test.c (test_iri_relative_to_absolute): Likewise

2019-08-07 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/test-ocsp-stap.c: Removed redundant comment

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Save coverage for HTTP/2 runner as artifact

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/Makefile.am: Add CODE_COVERAGE flags

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename stats types (remove trailing _t)
     
     * include/wget/wget.h: Rename stats types (remove trailing _t)
     * libwget/dns.c: Likewise
     * libwget/http.c: Likewise
     * libwget/net.h: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/ssl_none.c: Likewise
     * libwget/ssl_wolfssl.c: Likewise
     * src/options.c: Likewise

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix type in two comments

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_hsts_db_t -> wget_hsts_db
     
     * include/wget/wget.h: Rename wget_hsts_db_t -> wget_hsts_db,
     * fuzz/libwget_hsts_fuzzer.c: Likewise
     * libwget/hsts.c: Likewise
     * src/wget_options.h: Likewise
     * tests/test-plugin-dummy.c: Likewise
     * unit-tests/test.c: Likewise

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Replace outdated docs for plugins

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_hpkp_db_t -> wget_hpkp_db and wget_hpkp_t -> wget_hpkp
     
     * include/wget/wget.h: Rename wget_hpkp_db_t -> wget_hpkp_db,
       rename wget_hpkp_t -> wget_hpkp
     * fuzz/libwget_hpkp_fuzzer.c: Likewise
     * libwget/hpkp.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/ssl_wolfssl.c: Likewise
     * src/wget_options.h: Likewise
     * tests/test-plugin-dummy.c: Likewise
     * unit-tests/test.c: Likewise

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rework HPKP DB plugin code
     
     * include/wget/wget.h: Add typedefs for HPKP DB functions,
       remove wget_hpkp_db_st,
       rewrite wget_hpkp_db_vtable,
       add wget_hpkp_set_plugin()
     * libwget/hpkp.c: Add one function table for all exposed functions,
       implement wget_hpkp_set_plugin(),
       call plugin functions if set
     * libwget/plugin.c: Remove wget_plugin_add_hpkp_db()
     * src/plugin.c: Remove impl_add_hpkp_db()
     * tests/test-plugin-dummy.c: Implement dummy hsts db API,
       initialize test_hpkp_db_vtable,
       call wget_hpkp_set_plugin() in plugin initializer

2019-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rework OCSP DB plugin code
     
     * include/wget/wget.h: Add typedefs for OCSP DB functions,
       remove wget_ocsp_db_st,
       rewrite wget_ocsp_db_vtable,
       add wget_ocsp_set_plugin()
     * libwget/ocsp.c: Add one function table for all exposed functions,
       implement wget_ocsp_set_plugin(),
       call plugin functions if set
     * libwget/plugin.c: Remove wget_plugin_add_ocsp_db()
     * src/plugin.c: Remove impl_add_ocsp_db()
     * tests/test-plugin-dummy.c: Implement dummy hsts db API,
       initialize test_ocsp_db_vtable,
       call wget_ocsp_set_plugin() in plugin initializer

2019-08-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Rework HSTS DB plugin code
     
     * include/wget/wget.h: Ad typedefs for HSTS DB functions,
       remove wget_hsts_db_st,
       rewrite wget_hsts_db_vtable,
       add wget_hsts_set_plugin()
     * libwget/hsts.c: Add one function table for all exposed functions,
       implement wget_hsts_set_plugin(),
       call plugin functions if set
     * libwget/plugin.c: Remove wget_plugin_add_hsts_db()
     * src/plugin.c: Remove impl_add_hsts_db()
     * tests/test-plugin-dummy.c: Implement dummy hsts db API,
       initialize test_hsts_db_vtable,
       call wget_hsts_set_plugin() in plugin initializer

2019-08-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename plugin types
     
     * include/wget/wget.h: Rename plugin types
     * libwget/plugin.c: Likewise
     * src/plugin.c: Likeiwse
     * src/wget_plugin.h: Likewise
     * tests/test-plugin-dummy.c: Likewise

2019-08-05 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added support for ax_code_coverage version 32
     
     * Makefile.am: Add code coverage rules as documented in ax_code_coverage.m4
     * cfg.mk: Exclude m4 files from sc_GPL_version
     * configure.ac: Add AX_CODE_COVERAGE
     * fuzz/Makefile.am: Add coverage flags
     * libwget/Makefile.am: Likewise
     * src/Makefile.am: Likewise
     * tests/Makefile.am: Likewise
     * m4/ax_ac_append_to_file.m4: New file
     * m4/ax_ac_print_to_file.m4: New file
     * m4/ax_add_am_macro_static.m4: New file
     * m4/ax_am_macros_static.m4: New file
     * m4/ax_check_gnu_make.m4: New file
     * m4/ax_code_coverage.m4: New file
     * m4/ax_file_escapes.m4: New file

2019-08-04 DalmeGNU <dalmemail@gmail.com>

     Background support for fork() compatible OS
     
     * src/wget.c: Added fork_to_background(), in order to implement --background
     * src/options.c: Added "--background" to the options list
     * src/wget_options.h: Added background member to structure config
     * docs/wget2.md: Background option marked as "Not supported on Windows"

2019-08-04 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Changed validity time for OCSP Stapled Response
     
     * tests/certs/ocsp/generate_stap.sh: Modified to generate longer validity response
     * tests/certs/ocsp/ocsp_stapled_resp.der: Regenerated for longer validity

2019-07-27 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Resolved tests failure due to OCSP

2019-06-22 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Add test-limit-rate-http2
     
     * tests/Makefile.am: Added test-limit-rate-http2
     * tests/test-limit-rate-http2.c: Cloned 'test-limit-rate' to test for h2 only

2019-06-22 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * .gitlab-ci.yml: Add Gitlab CI runner for HTTP/2

2019-06-21 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Making failing tests work on Second Pass
     
     * tests/test--https-enforce-soft3.c:
     * tests/test-bad-chunk.c:
     * tests/test-chunked.c:
     * tests/test-limit-rate.c:
     * tests/test-post-handshake-auth.c: Skipped for Second Pass
     
     * tests/test-i-https.c: Added '--no-ca-certificate' in options for expected failure for h2
     
     * tests/test-idn-cmd.c:
     * tests/test-idn-meta.c:
     * tests/test-idn-robots.c: Dynamic port replacement for http/https proxies
     
     * tests/test-iri.c:
     * tests/test-parse-css.c:
     * tests/test-parse-html-css.c: Dynamic port replacement for hostname

2019-06-21 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Adding support for running both http/1.1 and h2 tests
     
     * configure.ac: Modified to have check for availability of MHD-http2
     * tests/libtest.c: Modified to run both protocols on existing tests
     * tests/libtest.h: Added macros for h2 and modified wget_test_url_t data structure

2019-06-20 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Modified Range Header key check to be case-insensitive

2019-06-20 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Modified to have compatibility with MHD-http2

2019-07-25 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/test-ocsp-server.c: Added Revoked OCSP test with --no-check-certificate

2019-07-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/getstream.c: Fix call to wget_http_get()

2019-07-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix parsing Location header with trailign digits
     
     * libwget/http_parse.c (wget_http_parse_location): Replace
       c_isdigits() by c_isblank()

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/certs/ocsp/README.md: Added README for generating generating certificates and response

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Splitting certs/resp generator script
     
     * tests/certs/ocsp/generate_certs.sh: Added to generate certificates
     * tests/certs/ocsp/generate_resp.sh: Added to generate stapled response

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Removed redundant priority from MHD daemon initialization

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Added file loading checks for OCSP Stapling PEM/DER files

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Moved PEM/DER loading out of _ocsp_stap_cert_callback()

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Dynamically allocating 'privkey_stap'

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Enforced gnutls_certificate_retrieve_function3 type for _ocsp_stap_cert_callback()

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Removed ampersand from MHD_OPTION_HTTPS_CERT_CALLBACK2 value

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added templates, records, and script for OCSP stapling PEM/DER files
     
     * tests/certs/ocsp/demoCA/*: Openssl certificate signing records for root and intermediate
     * tests/certs/ocsp/generate_stap.sh: Added script for generating required certificates and response
     * tests/certs/ocsp/interm-template.txt: Added template for intermediate certificate
     * tests/certs/ocsp/interm.cnf: Added openssl config for intermediate certificate signing
     * tests/certs/ocsp/root-template.txt: Added template for root certificate
     * tests/certs/ocsp/server-template.txt: Added template for server certificate

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/libtest.c: Moved break into preprocessor else block

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added required certificates and response
     
     * tests/certs/ocsp/ocsp_stapled_resp.der: Added OCSP stapled response
     * tests/certs/ocsp/x509-interm-cert.pem: Added intermediate certificate
     * tests/certs/ocsp/x509-interm-key.pem: Added intermediate private key
     * tests/certs/ocsp/x509-root-cert.pem: Added root CA certificate
     * tests/certs/ocsp/x509-root-key.pem: Added root CA private key
     * tests/certs/ocsp/x509-server-cert.pem: Added server certificate
     * tests/certs/ocsp/x509-server-key.pem: Added server private key

2019-07-24 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added skeleton OCSP Stapling
     
     * tests/Makefile.am: Added test-ocsp-stap
     * tests/libtest.c: Added an MHD daemon to send OCSP stapled response
     * tests/libtest.h: Added macro WGET_TEST_FEATURE_OCSP_STAPLING
     * tests/test-ocsp-stap.c: Added test for OCSP stapling

2019-07-23 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     * tests/certs/ocsp/README.md: Added README for generating generating certificates and responses

2019-07-23 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Splitting certs/resps generator script
     
     * tests/certs/ocsp/generate_certs.sh: Added to generate certificates
     * tests/certs/ocsp/generate_resp.sh: Added to generate responses

2019-07-21 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Making OCSP Response Global
     
     * tests/libtest.c: Added 'struct ocsp_resp_t' and moved OCSP response to global scope

2019-07-21 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added templates, records, and script for OCSP Responder PEM/DER files
     
     * tests/certs/ocsp/demoCA/*: Openssl certificate signing records for root and intermediate
     * tests/certs/ocsp/generate_resp.sh: Added script for generating required certificates and responses
     * tests/certs/ocsp/interm-template.txt: Added template for intermediate certificate
     * tests/certs/ocsp/interm.cnf: Added openssl config for intermediate certificate signing
     * tests/certs/ocsp/root-template.txt: Added template for root certificate
     * tests/certs/ocsp/server-template.txt: Added template for server certificate

2019-07-21 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added required certificates and response
     
     * tests/certs/ocsp/ocsp_resp_ok.der: Added OCSP verified response
     * tests/certs/ocsp/ocsp_resp_revoked.der: Added OCSP revoked response
     * tests/certs/ocsp/x509-interm-cert.pem: Added intermediate certificate
     * tests/certs/ocsp/x509-interm-key.pem: Added intermediate private key
     * tests/certs/ocsp/x509-root-cert.pem: Added root CA certificate
     * tests/certs/ocsp/x509-root-key.pem: Added root CA private key
     * tests/certs/ocsp/x509-server-cert.pem: Added server certificate
     * tests/certs/ocsp/x509-server-key.pem: Added server private key

2019-07-21 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added test-ocsp-server
     
     * tests/Makefile.am: Modified to run the test
     * tests/test-ocsp-server: Added for testing OCSP verified/revoked responses

2019-07-20 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added OCSP Responder to the test library
     
     * tests/libtest.c: Added the skeleton responder
     * tests/libtest.h: Added required macros and function prototype

2019-07-20 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added option --ocsp-date
     
     * docs/wget2.md: Added documentation for --ocsp-date
     * include/wget/wget.h: Added macro WGET_SSL_OCSP_DATE
     * libwget/ssl_gnutls.c: Modified to use option
     * src/options.c: Added option handler
     * src/wget_options.h: Declared bool for option

2019-07-20 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added option --ocsp-nonce
     
     * docs/wget2.md: Added documentation for --ocsp-nonce
     * include/wget/wget.h: Added macro WGET_SSL_OCSP_NONCE
     * libwget/ssl_gnutls.c: Modified to use option
     * src/options.c: Added option handler
     * src/wget_options.h: Declared bool for option

2019-07-20 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Added option --ocsp-server
     
     * docs/wget2.md: Added documentation for --ocsp-server
     * libwget/ssl_gnutls.c: Modified to use value from option parameter
     * src/options.c: Added option handler
     * src/wget_options.h: Declared storage for option parameter

2019-07-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (safe_ctime): Fix buffer size

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_console_color_t -> wget_console_color
     
     * include/wget/wget.h: Rename wget_console_color_t -> wget_console_color
     * libwget/console.c: Likewise
     * src/log.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_bar_t -> wget_bar
     
     * include/wget/wget.h: Rename wget_bar_t -> wget_bar
     * fuzz/libwget_bar_fuzzer.c: Likewise
     * libwget/bar.c: Likewise
     * src/bar.c: Likewise
     * src/wget_bar.h: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_robots_t -> wget_robots
     
     * include/wget/wget.h: Rename wget_robots_t -> wget_robots
     * fuzz/libwget_robots_parse_fuzzer.c: Likewise
     * libwget/robots.c: Likewise
     * libwget/test_linking_robots.c: Likewise
     * src/wget_host.h: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_metalink_*_t -> wget_metalink_*
     
     * include/wget/wget.h: Rename wget_metalink_*_t -> wget_metalink_*
     * libwget/metalink.c: Likewise
     * src/job.c: Likewise
     * src/wget.c: Likewise
     * src/wget_job.h: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_digest_algorithm_t -> wget_digest_algorithm
     
     * include/wget/wget.h: Rename wget_digest_algorithm_t -> wget_digest_algorithm
     * libwget/hash_printf.c: Likewise
     * libwget/hashfile.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_hash_hd_t -> wget_hash_hd
     
     * include/wget/wget.h: Rename wget_hash_hd_t -> wget_hash_hd
     * libwget/hashfile.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_connection_t -> wget_http_connection
     
     * include/wget/wget.h: Rename wget_http_connection_t -> wget_http_connection
     * examples/check_url_types.c: Likewise
     * examples/http_get.c: Likewise
     * examples/http_get2.c: Likewise
     * examples/http_multi_get.c: Likewise
     * examples/websequencediagram.c: Likewise
     * examples/websequencediagram_high.c: Likewise
     * fuzz/libwget_http_client_fuzzer.c: Likewise
     * libwget/http.c: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * src/wget.c: Likewise
     * src/wget_job.h: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_request_t -> wget_http_request
     
     * include/wget/wget.h: Rename wget_http_request_t -> wget_http_request
     * examples/http_get2.c: Likewise
     * examples/http_multi_get.c: Likewise
     * examples/websequencediagram.c: Likewise
     * fuzz/libwget_http_client_fuzzer.c: Likewise
     * libwget/http.c: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * src/wget.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_response_t -> wget_http_response
     
     * include/wget/wget.h: Rename wget_http_response_t -> wget_http_response
     * examples/batch_loader.c: Likewise
     * examples/check_url_types.c: Likewise
     * examples/getstream.c: Likewise
     * examples/http_get.c: Likewise
     * examples/http_get2.c: Likewise
     * examples/http_multi_get.c: Likewise
     * examples/websequencediagram.c: Likewise
     * examples/websequencediagram_high.c: Likewise
     * fuzz/libwget_http_client_fuzzer.c: Likewise
     * fuzz/libwget_http_parse_fuzzer.c: Likewise
     * libwget/http.c: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * src/gpgme.c: Likewise
     * src/stats_site.c: Likewise
     * src/wget.c: Likewise
     * src/wget_gpgme.h: Likewise
     * src/wget_stats.h: Likewise
     * tests/test-cookies-http_state.c: Likewise
     * unit-tests/test-cookies-http_state.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename transfer_encoding_* -> wget_transfer_encoding_*
     
     * include/wget/wget.h: Rename transfer_encoding_* -> wget_transfer_encoding_*
     * libwget/http.c: Likewise
     * libwget/http_parse.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_challenge_t -> wget_http_challenge
     
     * include/wget/wget.h: Rename wget_http_challenge_t -> wget_http_challenge
     * libwget/http.c: Likewise
     * libwget/http_parse.c: Likewise
     * src/options.c: Likewise
     * src/wget.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_digest_t -> wget_http_digest
     
     * include/wget/wget.h: Rename wget_http_digest_t -> wget_http_digest
     * libwget/http_parse.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_link_t -> wget_http_link
     
     * include/wget/wget.h: Rename wget_http_link_t -> wget_http_link
     * libwget/http_parse.c: Likewise
     * src/wget.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_http_header_param_t -> wget_http_header_param
     
     * include/wget/wget.h: Rename wget_http_header_param_t -> wget_http_header_param
     * libwget/http.c: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/http_parse.c: Likewise
     * src/options.c: Likewise
     * src/wget.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_tcp_t -> wget_tcp
     
     * include/wget/wget.h: Rename wget_tcp_t -> wget_tcp
     * libwget/http.h: Likewise
     * libwget/net.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/ssl_none.c: Likewise
     * libwget/ssl_wolfssl.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_dns_t -> wget_dns
     
     * include/wget/wget.h: Rename wget_dns_t -> wget_dns
     * libwget/dns.c: Likewise
     * libwget/net.c: Likewise
     * libwget/net.h: Likewise
     * src/options.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_dns_cache_t -> wget_dns_cache
     
     * include/wget/wget.h: Rename wget_dns_cache_t -> wget_dns_cache
     * libwget/dns.c: Likewise
     * libwget/dns_cache.c: Likewise
     * libwget/init.c: Likewise
     * src/options.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_html_tag_t -> wget_html_tag
     
     * include/wget/wget.h: Rename wget_html_tag_t -> wget_html_tag
     * libwget/html_url.c: Likewise
     * src/options.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_html_parsed_result_t -> wget_html_parsed_result
     
     * include/wget/wget.h: Rename wget_html_parsed_result_t -> wget_html_parsed_result
     * examples/check_url_types.c: Likewise
     * examples/print_html_urls.c: Likewise
     * fuzz/libwget_html_url_fuzzer.c: Likewise
     * libwget/html_url.c: Likewise
     * src/wget.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_html_parsed_url_t -> wget_html_parsed_url
     
     * include/wget/wget.h: Rename wget_html_parsed_url_t -> wget_html_parsed_url
     * examples/check_url_types.c: Likewise
     * examples/print_html_urls.c: Likewise
     * libwget/html_url.c: Likewise
     * src/wget.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_string_t -> wget_string
     
     * include/wget/wget.h: Rename wget_string_t -> wget_string
     * examples/batch_loader.c: Likewise
     * examples/check_url_types.c: Likewise
     * examples/print_html_urls.c: Likewise
     * libwget/atom_url.c: Likewise
     * libwget/robots.c: Likewise
     * libwget/rss_url.c: Likewise
     * libwget/sitemap_url.c: Likewise
     * src/host.c: Likewise
     * src/wget.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_css_parsed_url_t -> wget_css_parsed_url
     
     * include/wget/wget.h: Rename wget_css_parsed_url_t -> wget_css_parsed_url
     * examples/print_css_urls3.c: Likewise
     * libwget/css_url.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_netrc_t -> wget_netrc
     
     * include/wget/wget.h: Rename wget_netrc_t -> wget_netrc
     * libwget/netrc.c: Likewise
     * src/wget.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_netrc_db_t -> wget_netrc_db
     
     * include/wget/wget.h: Rename wget_netrc_db_t -> wget_netrc_db
     * fuzz/libwget_netrc_fuzzer.c: Likewise
     * libwget/netrc.c: Likewise
     * src/wget_options.h: Likewise
     * unit-tests/test.c: Likewise

2019-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_ocsp_db_t -> wget_ocsp_db
     
     * include/wget/wget.h: Rename wget_ocsp_db_t -> wget_ocsp_db
     * examples/http_multi_get.c: Likewise
     * fuzz/libwget_ocsp_fuzzer.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/plugin.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/ssl_wolfssl.c: Likewise
     * src/plugin.c: Likewise
     * src/wget_options.h: Likewise
     * src/wget_plugin.h: Likewise
     * tests/test-plugin-dummy.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_tls_session_db_t -> wget_tls_session_db
     
     * include/wget/wget.h: Rename wget_tls_session_db_t -> wget_tls_session_db
     * fuzz/libwget_tlssess_fuzzer.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/ssl_wolfssl.c: Likewise
     * libwget/tls_session.c: Likewise
     * src/wget_options.h: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_tls_session_t -> wget_tls_session
     
     * include/wget/wget.h: Rename wget_tls_session_t -> wget_tls_session
     * libwget/tls_session.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_cookie_t -> wget_cookie
     
     * include/wget/wget.h: Rename wget_cookie_t -> wget_cookie
     * fuzz/libwget_cookie_fuzzer.c: Likewise
     * libwget/cookie.c: Likewise
     * libwget/http_parse.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_cookie_db_t -> wget_cookie_db
     
     * include/wget/wget.h: Rename wget_cookie_db_t -> wget_cookie_db
     * examples/http_get2.c: Likewise
     * fuzz/libwget_cookie_fuzzer.c: Likewise
     * libwget/cookie.c: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/init.c: Likewise
     * src/wget_options.h: Likewise
     * tests/test-cookies-http_state.c: Likewise
     * unit-tests/test-cookies-http_state.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_iri_t -> wget_iri
     
     * include/wget/wget.h: Rename wget_iri_t -> wget_iri
     * examples/*.c: Likewise
     * fuzz/*.c: Likewise
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * tests/*.c: Likewise
     * unit-tests/*.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_decompressor_t -> wget_decompressor
     
     * include/wget/wget.h: Rename wget_decompressor_t -> wget_decompressor
     * libwget/decompressor.c: Likewise
     * libwget/http.c: Likewise
     * src/wget.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_thread_cond_t -> wget_thread_cond
     
     * include/wget/wget.h: Rename wget_thread_cond_t -> wget_thread_cond
     * libwget/thread.c: Likewise
     * src/wget.c: Likewise
     * src/wget_job.h: Likewise
     * unit-tests/test-cond.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_thread_mutex_t -> wget_thread_mutex
     
     * include/wget/wget.h: Rename wget_thread_mutex_t -> wget_thread_mutex
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * unit-tests/test-cond.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_thread_id_t -> wget_thread_id
     
     * include/wget/wget.h: Rename wget_thread_id_t -> wget_thread_id
     * libwget/thread.c: Likewise
     * src/host.c: Likewise
     * src/wget_job.h: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_thread_t -> wget_thread
     
     * include/wget/wget.h: Rename wget_thread_t -> wget_thread
     * examples/batch_loader.c: Likewise
     * libwget/thread.c: Likewise
     * src/*.c: Likewise
     * unit-tests/test-cond.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_stringmap_iterator_t -> wget_stringmap_iterator
     
     * include/wget/wget.h: Likewise
     * unit-tests/test.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_stringmap_t -> wget_stringmap
     
     * include/wget/wget.h: Rename wget_stringmap_t -> wget_stringmap
     * libwget/stringmap.c: Likewise
     * src/options.c: Likewise
     * src/plugin.c: Likewise
     * src/wget.c: Likewise
     * unit-tests/stringmap_perf.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_hashmap_iterator_t -> wget_hashmap_iterator
     
     * include/wget/wget.h: Rename wget_hashmap_iterator_t -> wget_hashmap_iterator
     * libwget/hashmap.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_hashmap_t -> wget_hashmap
     
     * include/wget/wget.h: Rename wget_hashmap_t -> wget_hashmap
     * libwget/*.c: Likewise
     * src/*.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_vector_t -> wget_vector
     
     * include/wget/wget.h: Rename wget_vector_t -> wget_vector
     * examples/print_css_urls3.c: Likewise
     * fuzz/*.c: Likewise
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * tests/*.c: Likewise
     * unit-tests/*.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_logger_t -> wget_logger
     
     * include/wget/wget.h: Rename wget_logger_t -> wget_logger
     * libwget/log.c: Likewise
     * libwget/logger.c: Likewise
     * libwget/logger.h: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_buffer_t -> wget_buffer
     
     * include/wget/wget.h: Rename wget_buffer_t -> wget_buffer
     * examples/*.c: Likewise
     * fuzz/libwget_iri_fuzzer.c: Likewise
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * tests/*.c: Likewise
     * unit-tests/*.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_bitmap_t -> wget_bitmap
     
     * include/wget/wget.h: Likewise
     * libwget/bitmap.c: Likewise
     * unit-tests/test.c: Likewise

2019-07-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_list_t -> wget_list
     
     * include/wget/wget.h: Likewise
     * libwget/list.c: Likewise
     * libwget/test_linking.c: Likewise
     * src/wget_host.h: Likewise
     * src/wget_job.h: Likewise

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Add prototype for _get_body

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove wget_tcp_set_stats_site() function
     
     * include/wget/wget.h: Remove wget_stats_callback_t and
       wget_tcp_set_stats_site()
     * libwget/http.c: Remove wget_tcp_set_stats_site()

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_server_stats_callback_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/http.c: Amend casts and variable types

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_tls_stats_callback_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/ssl_gnutls.c: Amend casts and variable types
     * libwget/ssl_wolfssl.c: Likewise

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_ocsp_stats_callback_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/ssl_gnutls.c: Amend casts and variable types
     * libwget/ssl_wolfssl.c: Likewise

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_dns_stats_callback_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/dns.c: Amend casts and variable types

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef plugin functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/plugin.c: Amend casts and variable types
     * src/plugin.c: Likewise

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef http callback functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/http.c: Amend casts and variable types
     * libwget/http_highlevel.c: Likewise

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef XML parse functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/xml.c: Amend casts and variable types

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef CSS parse functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/css.c: Amend casts and variable types

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef decompressor functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/decompressor.c: Likewise, Amend casts

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add CI runner for Debian unstable

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef vector functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/*.c: Amend casts
     * src/*.c: Likewise
     * tests/*.c: Likewise
     * unit-tests/*.c: Likewise

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_logger_func_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/init.c: Amend va_arg params
     * libwget/logger.c: Amend function params

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_* alloc functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/xalloc.c: Amend declarations

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_list_browse_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/list.c: Amend wget_list_browse() argument
     * src/host.c: Amend cast

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_update_[load|save]_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/*.c: Amend casts

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef wget_global_get_func_t not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedef
     * libwget/init.c: Amend function definition

2019-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Typedef hashmap functions not as pointer
     
     * include/wget/wget.h: Remove '*' signature from function typedefs
     * libwget/*.c: Amend casts
     * src/*.c: Likewise
     * unit-tests/stringmap_perf.c: Likewise

2019-07-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c (_bar_update_speed_stats): Fix division by 0

2019-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats_site.c (site_stats_init): Always free resources

2019-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_stats): Fix stats options
     
     Stats options wrote to stdout when a filename was given without format.

2019-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*.in: Update fuzz corpora from OSS-Fuzz

2019-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/README.md: clang-6.0 -> clang

2019-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (init): Do not write stats to files when fuzzing

2019-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/Makefile.am: Add README.md to DISTCLEANFILES unconditionally

2019-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis_setup.sh: Add GNU grep and gawk for OSX

2019-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis.sh: Fix sed -i for OSX on TravisCI

2019-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test.c (test_mem): Fix buffer overflow detected by ASAN

2019-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_wolfssl.c (wget_ssl_init): Exit gracefully on error

2019-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Add new syntax-check rule 'sc_gettext_printf'

2019-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix missing gettext/translation for string literals
     
     * libwget/robots.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/ssl_wolfssl.c: Likewise
     * src/gpgme.c: Likewise
     * src/host.c: Likewise
     * src/options.c: Likewise
     * src/wget.c: Likewise

2019-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Add new syntax-check rule 'sc_prohibit_gettext_debug'

2019-06-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/Makefile.am: Replace $< from explicit rule

2019-06-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Replace $< from explicit rule

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (_add_tag): Fix OSS-Fuzz issue 15526

2019-06-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add pkg-config check for libnettle

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c (wget_strnglob): Return NULL if malloc fails

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Indentation cleanups

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_bar_st -> wget_bar_st
     
     * include/wget/wget.h: Likewise
     * libwget/bar.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_hash_hd_st -> wget_hash_hd_st
     
     * include/wget/wget.h: Likewise
     * libwget/hashfile.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_http_connection_st -> wget_http_connection_st
     
     * include/wget/wget.h: Likewise
     * libwget/http.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_netrc_db_st -> wget_netrc_db_st
     
     * include/wget/wget.h: Likewise
     * libwget/netrc.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_tls_session_db_st -> wget_tls_sessione_db_st
     
     * include/wget/wget.h: Likewise
     * libwget/tls_session.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_tls_session_st -> wget_tls_sessione_st
     
     * include/wget/wget.h: Likewise
     * libwget/tls_session.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Remove comment line

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_hpkp_st -> wget_hpkp_st
     
     * include/wget/wget.h: Likewise
     * libwget/hpkp.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_cookie_st -> wget_cookie_st
     
     * include/wget/wget.h: Likewise
     * libwget/cookie.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_options.h (struct config): wget_cookie_db_st -> wget_cookie_db_t

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_cookie_db_st -> wget_cookie_db_st
     
     * include/wget/wget.h: Likewise
     * libwget/cookie.c: Likewise
     * src/wget_options.h: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_decompressor_st -> wget_decompressor_st
     
     * include/wget/wget.h: Likewise
     * libwget/decompressor.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_thread_cond_st -> wget_thread_cond_st
     
     * include/wget/wget.h: Likewise
     * libwget/thread.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_thread_mutex_st -> wget_thread_mutex_st
     
     * include/wget/wget.h: Likewise
     * libwget/thread.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_thread_st -> wget_thread_st
     
     * include/wget/wget.h: Likewise
     * libwget/thread.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_hashmap_iterator_st -> wget_hashmap_iterator_st
     
     * include/wget/wget.h: Likewise
     * libwget/hashmap.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_hashmap_st -> wget_hashmap_st
     
     * include/wget/wget.h: Likewise
     * libwget/hashmap.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_logger_st -> wget_logger_st
     
     * include/wget/wget.h: Likewise
     * libwget/logger.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename _wget_list_st -> wget_list_st
     
     * include/wget/wget.h: Likewise
     * libwget/list.c: Likewise

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Rename _WGET_PREFIX -> WGET_PREFIX

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Add G_GNUC_WGET_MALLOC to wget_read_file()

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/robots.c (wget_robots_parse): Fix corner-case memleak

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Check OOM in wget_http_add_header*()
     
     * include/wget/wget.h: Return int for wget_http_add_header(),
       return int for wget_http_add_header_param()
     * libwget/http.c; New static function http_add_header(),
       (wget_http_add_header_vprintf): Use http_add_header(),
       (wget_http_add_header): Return int, use http_add_header(),
       (wget_http_add_header_param): Return int, use http_add_header()

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_highlevel.c (wget_http_get): Check return value of wget_vector_add_memdup()

2019-06-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Add memory checks to wget_http_add_header_vprintf()
     
     * include/wget/wget.h: return int for wget_http_add_header_vprintf(),
       return int for wget_http_add_header_printf()
     * libwget/http.c (wget_http_add_header_vprintf):
       check for memory allocations and return error code,
       (wget_http_add_header_printf): Return error code

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c (_html_get_url): Set url.link_inline

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c (_css_parse_uri): Use malloc + wget_vector_add

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/sitemap_url.c (_sitemap_get_url): Use malloc + wget_vector_add

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/rss_url.c (_rss_get_url): Use malloc + wget_vector_add

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css_url.c (_css_get_url): Use calloc + wget_vector_add

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/atom_url.c (_atom_get_url): Use malloc + wget_vector_add

2019-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Simplify vector API
     
     * libwget/vector.c: Use wget_free as default destructor,
       renamed _vec_insert_private() -> insert_element,
       (insert_element): removed args 'size' and 'alloc',
       removed the _noalloc() API,
       removed the 'size' argument from functions,
       added wget_vector_add_memdup() as convenience function,
       renamed _compare() -> compare_element
     * include/wget/wget.h: Removed _noalloc() functions
     * fuzz/libwget_cookie_fuzzer.c: Amended to new API
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * tests/*.c: Likewise
     * unit-tests/*.c: Likewise

2019-06-24 Gisle Vanem <gisle.vanem@gmail.com>

     * libwget/ssl_gnutls.c: Fix Doxygen indenting of bullet list
     
     Seems Doxgen gets confused unless all bullet-ed items in a list have the same number of spaced.
     And the generated HTML looks jagged.

2019-06-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Gisle Vanem

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Add sc_prohibit_alloc to 'make syntax-check'
     
     * cfg.mk: Add sc_prohibit_alloc rule plus exceptions
     * src/options.c: Tag exceptions
     * unit-tests/test.c: Likewise
     
     This rule checks for calling malloc()/calloc()/realloc(). Instead, either
     use wget_malloc(), wget_calloc() or wget_realloc().

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Add sc_prohibit_free to 'make syntax-check'
     
     * cfg.mk: Add sc_prohibit_free rule plus exceptions
     * examples/print_css_urls3.c: Remove unneeded comment
     * fuzz/libwget_base64_fuzzer.c: Use wget_free() instead of free()
     * fuzz/libwget_cookie_fuzzer.c: Likewise
     * fuzz/libwget_css_url_fuzzer.c: Likewise
     * fuzz/libwget_http_client_fuzzer.c: Likewise
     * fuzz/libwget_utils_fuzzer.c: Likewise
     * libwget/vector.c: Likewise
     * src/options.c: Likewise
     * src/wget_main.h: Likewise
     * tests/test-compression.c: Likewise
     * tests/test-cookies-http_state.c: Likewise
     * tests/test-metalink.c: Likewise
     * unit-tests/stringmap_perf.c: Likewise
     
     This rule checks for calling free(). Instead, either use wget_free() or
     the convenience macro xfree().

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * m4/wget_manywarnings.m4: Remove -Werror-... options

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Fix compiler warning on MinGW

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/wget_options_fuzzer.c: Fix compiler warning on MinGW

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Avoid using unportable .o reference with libtool

2019-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove need for C11 thread local storage
     
     * configure.ac: Remove check for threads.h
     * libwget/ssl_gnutls.c: Remove need for C11 thread local storage

2019-06-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_http_client_fuzzer.c: Add emulation of freeaddrinfo()

2019-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Add const to conn_info

2019-06-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Use top_srcdir instead of .. to fix VPATH build

2019-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (deinit): Fix OSS-Fuzz issue 15443

2019-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_stats): Fix OSS-Fuzz issue 15438

2019-06-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Use top_srcdir instead of .. to fix VPATH build

2019-06-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Inline most of stringmap API
     
     * include/wget/wget.h: Add stringmap API (mostly) as static inline functions
     * libwget/stringmap.c: Remove stringmap implementation (mostly)

2019-06-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Add memory checks and error return value to hashmap API
     
     * include/wget/wget.h: wget_hashmap_sethashfunc() returns int
     * libwget/hashmap.c: Check memory allocations
     * libwget/stringmap.c: wget_stringmap_sethashfunc() returns int

2019-06-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Simplify hashmap and stringmap API
     
     * include/wget/wget.h: Replace _put() by _put_noalloc() functions to
       keep memory allocations outside the library functions.
     * libwget/stringmap.c: Likewise
     * libwget/hashmap.c: Likewise
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * unit-tests/*.c: Likewise

2019-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Separate DNS and DNS caching
     
     * include/wget/wget.h: Rewrite parts of the DNS / DNS caching API
     * libwget/dns.c: Likewise
     * libwget/dns_cache.c: Likewise
     * libwget/init.c (wget_global_init): Amend WGET_DNS_CACHING
     * libwget/net.c: Cleanup and amend for the new API
     * libwget/net.h: Cleanup
     * src/options.c: Use DNS caching instance if caching is requested

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove --stats-all
     
     * docs/wget2.md Remove docs for --stats-all
     * src/options.c: Remove --stats-all and parse_stats_all()
     * fuzz/wget_options_fuzzer.dict: remove --stats-all
     * tests/Makefile.am: Remove test-stats-all
     * tests/test-stats-all.c: Remove file

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Rewrite Site statistics --stats-site
     
     * fuzz/Makefile.am: Remove ../src/stats_site.o
     * include/wget/wget.h: Remove wget_stats_type_t
     * po/POTFILES.in. Remove src/stats.c
     * src/Makefile.am: Remove stats_site.c
     * src/options.c (parse_stats_all): Remove site stats code,
       (init): Add DNS stats code,
       (deinit): Cleanup dns stats code
     * src/stats.c: Remove file
     * src/stats_site.c: iFix for new stats code
     * src/wget.c (main): stats_print -> site_stats_print,
       (add_statistics): config.stats_site -> config.stats_site_args,
       (process_response): Likewise
     * src/wget_options.h (struct config): Remove stats_site, add stats_site_args
     * src/wget_stats.h: Remove stats_opt_t,
       remove stats_print_func_t,
       remove stats_callback_setter_t,
       remove struct stats_opts,
       remove stats_site_opts,
       rename stats_init -> site_stats_init,
       rename stats_exit -> site_stats_exit,
       rename stats_print -> site_stats_print
     * unit-tests/Makefile.am: Remove ../src/stats.o

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend --stats-* syntax
     
     * docs/wget2.md: Amend docs for --stats-*
     * src/options.c: Amend option syntax for --stats-*
     * tests/stats-test-util.h: Amend tests to succeed

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Rewrite Server statistics --stats-server
     
     * fuzz/Makefile.am: Remove ../src/stats_server.o
     * include/wget/wget.h:
       remove wget_server_stats_t,
       rename wget_stats_callback_t -> wget_server_stats_callback_t,
       rename wget_tcp_set_stats_server -> wget_server_set_stats_callback,
       add wget_server_stats_data_t,
       add wget_server_stats_callback_t,
     * libwget/http.c: Remove _stats_data_t,
       add server_stats_callback,
       add server_stats_ctx
     * src/Makefile.am: Remove stats_server.c
     * src/options.c (parse_stats_all): Remove server stats code,
       add stats_callback_server(),
       (init): Add DNS stats code,
       (deinit): Cleanup dns stats code
     * src/stats.c (stats_print_func_t): Remove print_server[],
       remove WGET_STATS_TYPE_SERVER
     * src/stats_server.c: Remove file
     * src/wget_options.h (struct config): Remove stats_server, add stats_server_args
     * src/wget_stats.h: Remove stats_server_opts
     * unit-tests/Makefile.am: Remove ../src/stats_server.o

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Rewrite TLS statistics --stats-tls
     
     * fuzz/Makefile.am: Remove ../src/stats_tls.o
     * include/wget/wget.h: Add wget_tls_stats_data_t,
       add wget_tls_stats_callback_t,
       add wget_ssl_set_stats_callback_tls,
       remove WGET_STATS_TYPE_TLS,
       remove wget_tls_stats_t,
       remove wget_tcp_set_stats_tls(),
       remove wget_tcp_get_stats_tls()
     * libwget/ssl_gnutls.c: Remove old stats code, add new stats code
     * libwget/ssl_none.c: Add/remove function stubs
     * libwget/ssl_wolfssl.c: Remove old stats code, add new stats code
     * src/Makefile.am: Remove stats_tls.c
     * src/options.c (parse_stats_all): Remove TLS stats code,
       add stats_callback_tls(),
       (init): Add TLS stats code,
     * src/stats.c (stats_print_func_t): Remove print_tls[],
       remove WGET_STATS_TYPE_TLS
     * src/stats_tls.c: Remove file
     * src/wget_options.h (struct config): Remove stats_tls, add stats_tls_args
     * src/wget_stats.h: Remove stats_tls_opts
     * unit-tests/Makefile.am: Remove ../src/stats_tls.o

2019-06-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Rewrite OCSP statistics --stats-ocsp
     
     * fuzz/Makefile.am: Remove ../src/stats_ocsp.o
     * include/wget/wget.h: Add wget_ocsp_stats_data_t,
       add wget_ocsp_stats_callback_t,
       add wget_ssl_set_stats_callback_ocsp,
       remove WGET_STATS_TYPE_OCSP,
       remove wget_ocsp_stats_t,
       remove wget_tcp_set_stats_ocsp(),
       remove wget_tcp_get_stats_ocsp()
     * libwget/ssl_gnutls.c: Remove old stats code, add new stats code
     * libwget/ssl_none.c: Add/remove function stubs
     * libwget/ssl_wolfssl.c: Remove old stats code, add new stats code
     * src/Makefile.am: Remove stats_ocsp.c
     * src/options.c (parse_stats_all): Remove OCSP stats code,
       add stats_callback_ocsp(),
       (init): Add OCSP stats code,
     * src/stats.c (stats_print_func_t): Remove print_ocsp[],
       remove WGET_STATS_TYPE_OCSP
     * src/stats_ocsp.c: Remove file
     * src/wget_options.h (struct config): Remove stats_ocsp, add stats_ocsp_args
     * src/wget_stats.h: Remove stats_ocsp_opts
     * unit-tests/Makefile.am: Remove ../src/stats_ocsp.o

2019-06-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Rewrite DNS statistics --stats-dns
     
     * fuzz/Makefile.am: Remove ../src/stats_dns.o
     * include/wget/wget.h: Add wget_dns_stats_data_t,
       add wget_dns_stats_callback_t,
       add wget_dns_set_stats_callback,
       remove WGET_STATS_TYPE_DNS,
       remove wget_dns_stats_t,
       remove wget_dns_set_stats(),
       remove wget_dns_get_stats()
     * libwget/dns.c: Remove _stats_data_t,
       amend struct wget_dns_st,
       add wget_dns_set_stats_callback(),
       remove wget_dns_get_stats()
     * src/Makefile.am: Remove stats_dns.c
     * src/options.c (parse_stats_all): Remove DNS stats code,
       add stats_callback_dns(),
       (init): Add DNS stats code,
     * src/stats.c (stats_print_func_t): Remove print_dns[],
       remove WGET_STATS_TYPE_DNS
     * src/stats_dns.c: Remove file
     * src/wget_options.h (struct config): Remove stats_dns, add stats_dns_args
     * src/wget_stats.h: Remove stats_dns_opts
     * tests/stats-test-util.h: Remove "human"
     * unit-tests/Makefile.am: Remove ../src/stats_ocsp.o

2019-05-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Put resolver/dns code into own source file
     
     * docs/Makefile.am: Add libwget-dns.3 man page
     * examples/batch_loader.c: Remove call to wget_tcp_set_dns_timeout()
     * examples/check_url_types.c: Use wget_dns_set_timeout()
     * include/wget/wget.h: Add wget_dns_ API
     * libwget/Makefile.am: Add dns.c
     * libwget/dns.c: New file
     * libwget/init.c: Use wget_dns_set_caching()
     * libwget/net.c: Remove DNS functions
     * libwget/net.h (wget_tcp_st): Add dns member
     * po/POTFILES.in: Add libwget/dns.c
     * src/options.c: Use new DNS API
     * src/stats.c: Add some checks
     * src/stats_dns.c: Use wget_dns_get_stats()

2019-05-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Manually inline wget_get_timemillis() into wget_thread_cond_wait()

2019-05-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Move wget_restrict_file_name() to src/utils.c
     
     * fuzz/libwget_utils_fuzzer.c: Remove test code for wget_restrict_file_name()
     * include/wget/wget.h: Remove wget_restrict_file_name() prototype
     * libwget/utils.c: Remove wget_restrict_file_name()
     * src/utils.c: Add wget_restrict_file_name()
     * src/wget_utils.h: Add wget_restrict_file_name() prototype
     * tests/Makefile.am: Add ../src/utils.c to libtest_la_SOURCES
     * tests/libtest.c: Include ../src/wget_utils.h

2019-06-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix several forgotten xmalloc -> wget_malloc
     
     * libwget/css.c (wget_css_parse_file): Rename xmalloc->wget_malloc
     * libwget/hashfile.c (wget_hash_init): Likewise
     * libwget/ssl_gnutls.c (_cert_verify_hpkp): Likewise
     * libwget/xml.c (wget_xml_parse_file): Likewise

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashmap.c (hashmap_rehash): Fix for wget_calloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove xrealloc define for wget_realloc
     
     * libwget/private.h: Remove #define
     * libwget/*.c: Replace xrealloc by wget_realloc

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove xcalloc define for wget_calloc
     
     * libwget/private.h: Remove #define
     * libwget/*.c: Replace xcalloc by wget_calloc

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove xmalloc define for wget_malloc
     
     * libwget/private.h: Remove #define
     * libwget/*.c: Replace xmalloc by wget_malloc

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/vector.c (wget_vector_create): Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/mem.c: Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/list.c (wget_list_append): Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_parse,wget_iri_clone): Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (_server_stats_add): Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c (wget_cookie_create_request_header): Check result of malloc()

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Add LIBWGET_WARN_UNUSED_RESULT

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Don't ignore wget_malloc() return value
     
     * libwget/test_linking.c: Don't ignore wget_malloc() return value

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Add G_GNUC_WGET_RETURNS_NONNULL in wget.h
     
     * include/wget/wget.h: Add G_GNUC_WGET_RETURNS_NONNULL
     * src/Makefile.am: Add -DMALLOC_RETURNS_NONNULL
     * src/options.c: Use G_GNUC_WGET_RETURNS_NONNULL for own alloc functions

2019-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/base64.c: Check for malloc failures

2019-06-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend buffer functions to handle failed memory allocations
     
     * include/wget/wget.h: wget_buffer_ensure_capacity() returns int
     * libwget/buffer.c (wget_buffer_init): Return NULL if malloc fails,
       (_buffer_realloc): Return error if malloc fails
     * libwget/http.c (wget_http_get_response_cb): Check return value of
       wget_buffer_ensure_capacity()
     * unit-tests/test.c (test_buffer): Add asserts

2019-06-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Make wget allocation functions overridable function pointers
     
     * include/wget/wget.h: Remove allocation function prototypes,
       add function pointer types and 'extern' globals
     * libwget/private.h: Use wget_free() instead of free()
     * libwget/xalloc.c: Remove function definitions,
       add global function pointer variables
     * src/options.c: Add own allocation functions
     * unit-tests/test.c: Test that function pointers are overridable

2019-06-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change OOM callback implementation

2019-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix robots.txt code for stand-alone library API
     
     * fuzz/libwget_robots_parse_fuzzer.c: Amend API call
     * include/wget/wget.h: Amend wget_robots_parse() API
     * libwget/robots.c: Amend wget_robots_parse() API,
       check memory allocations
     * libwget/test_linking_robots.c: New file
     * src/wget.c (process_response): Amend call to wget_robots_parse()
     * unit-tests/test.c (test_robots): Amend call to wget_robots_parse()

2019-06-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Add robots.txt functions, make wget_robots_t opaque

2019-05-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Fix syntax-check (bindtextdomain)

2019-06-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup bitmap API
     
     * wget.h: Add WGET_E_MEMORY = -2,
       amend function interface of wget_bitmap_allocate,
       rename wget_bitmap_allocate -> wget_bitmap_init
     * libwget/bitmap.c: Likewise
     * unit-tests/test.c: Amend bitmap tests appropriate

2019-06-18 Darshit Shah <darnir@gnu.org>

     * gnulib: Update gnulib

2019-06-15 Darshit Shah <darnir@gnu.org>

     Don't check for always true headers
     
     * cfg.mk: Enable checking for always_true_header_tests
     * libwget/http.c,net.c,ssl_gnutls.c: Don't check for HAVE_SYS_SOCKET_H.
       The gnulib module always provides it.
     * libwget/ssl_gnutls.c: Don't check for HAVE_SYS_UIO_H. The gnulib
       module always provides it.
     * bootstrap.conf: Add header sys_uio
     * configure.ac: Remove check for sys/uio.h

2019-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Add sc_prohibit_sprintf and sc_prohibit_printf and fix code
     
     * cfg.mk: New syntax rules sc_prohibit_sprintf and sc_prohibit_printf
     * fuzz/*.c: Apply rules
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * tests/*.[ch]: Likewise
     * unit-tests/*.c: Likewise

2019-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: #define wget_printf()

2019-06-15 Darshit Shah <darnir@gnu.org>

     * cfg.mk: Our makefiles make judicious use of $<, skip the check

2019-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Add gnulib module arpa_inet
     
     On Debian unstable, after updating gnulib there was:
     
     In file included from ../lib/arpa/inet.h:46,
                      from ip.c:27:
     /usr/include/arpa/inet.h:34:8: error: unknown type name 'in_addr_t'
      extern in_addr_t inet_addr (const char *__cp) __THROW;

2019-06-15 Darshit Shah <darnir@gnu.org>

     * bootstrap: Patch script to use the python tool

2019-06-15 Darshit Shah <darnir@gnu.org>

     * bootstrap: Update the bootstrap script from gnulib

2019-06-15 Darshit Shah <darnir@gnu.org>

     * gnulib: Update gnulib

2019-06-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix --https-enforce=hard for metalink

2019-06-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Make read_xattr_metadata() easier and safer to use

2019-06-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix -nc/--no-clobber
     
     * src/wget.c: New function parse_local_file(),
       (add_url_to_queue): Parse local file if needed,
       (add_url): Likewise
     
     Closes #451

2019-06-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Moev _fix_broken_server_encoding() outside HTTP/2 code

2019-06-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Fix call to _fix_broken_server_encoding() for HTTP/2

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --http2-only to resist on HTTP/2
     
     * docs/wget2.md: Document --http2-only
     * libwget/ssl_gnutls.c (wget_ssl_open): Error if server doesn't accept h2
     * src/options.c: Add --http2-only
     * src/wget_options.h: Add config.http2_only

2019-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Fix WolfSSL CI runner

2019-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add WITH_TLS as define and conditional
     
     * configure.ac: Add WITH_TLS as define and conditional
     * tests/libtest.c: Use WITH_TLS for conditional code

2019-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-post-handhshake-auth.c: Check for WITH_GNUTLS

2019-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Enable SSL/TLS tests for WolfSSL

2019-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-i-https.c: Skip CRL test for WolfSSL

2019-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_wolfssl.c (wget_ssl_open): Fix return code for testing

2019-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add SSL/TLS engine 'none'
     
     * libwget/Makefile.am: Add building ssl_none.c
     * libwget/ssl_gnutls.c: Remove #ifdef WITH_GNUTLS
     * libwget/ssl_wolfssl.c: Likewise
     * libwget/ssl_none.c: Stub routines for 'no SSL/TLS support'

2019-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci-yml: Test WolfSSL build on Debian Unstable

2019-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     WolfSSL: Add ALPN and thus HTTP/2
     
     * libwget/ssl_wolfssl.c (wget_ssl_init): Fix setting minimal TLS version,
       (wget_ssl_open): Set ALPN for HTTP/2, add result to statistics

2019-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Initial implementation of WolfSSL as TLS backend
     
     * README.md: Mention WolfSSL
     * configure.ac: Check for WolfSSL
     * libwget/Makefile.am: Conditionally add WolfSSL to libwget
     * libwget/ssl_wolfssl.c: New file with WolfSSL implementation
     * po/POTFILES.in: Add libwget/ssl_wolfssl.c
     
     ./configure --without-gnutls --with-wolfssl

2019-05-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis.sh: Set gettext version to 0.18.2

2019-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Publish tarball via Gitlab CI
     
     * .gitlab-ci.yml: Create https://gnuwget.gitlab.io/wget2/wget2-latest.tar.gz
     * README.md: Instruction to download and build wget2 from tarball

2019-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Explicitly set source_base and test_base

2019-05-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Update spell-checker and fix more typos
     
     * contrib/spell-checker: Update to python3 version of codespell
     * libwget/robots.c: Fix typo(s)
     * src/plugin.c: Likewise
     * src/wget_plugin.h: Likewise
     * tests/test-plugin-nonexistance.c: Likewise

2019-05-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/.gitignore: Update

2019-05-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Work around VPATH issue

2019-05-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/main.c: Fix paths for WIN32

2019-05-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Update gettext version to 0.19.3

2019-05-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix checks to include C11 threads.h
     
     * configure.ac: Check for threads.h
     * libwget/ssl_gnutls.c: Add check for HAVE_THREADS_H

2019-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Fix position of _Thread_local

2019-05-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c: Replace sprintf/snprintf by wget_ functions

2019-05-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Remove #include timespec.h

2019-05-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap: Fallback to gnulib-tool if python version errors

2019-05-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Use thread-safe ctime() replacement

2019-05-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Silence gcc-9 -Wchkp

2019-04-29 sebma <sebma@users.noreply.github.com>

     Test if doxygen OR pandoc is present to build the docs
     
     * configure.ac: Logically split checking for doxygen and pandoc
     
     Copyright-paperwork-exempt: Yes

2019-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new option --unlink
     
     * bootstrap.conf: Add gnulib module 'link'
     * docs/wget2.md: Remove the 'unimplemented' tag for --unlink
     * src/options.c: Add --unlink option
     * src/wget.c (_prepare_file): Unlink file if requested
     * src/wget_options.h (struct config): Add 'unlink' member
     * tests/Makefile.am: Add test-unlink
     * tests/libtest.c (wget_test): Implement hardlink feature
     * tests/libtest.h (wget_test_file_t): Add 'hardlink' member
     * tests/test-unlink.c: New file with tests for --unlink

2019-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Fix memleaks from XDG and homedir functions

2019-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (get_config_files): Fix memleaks

2019-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Mark unimplemented options with '[Not implemented yet]'

2019-04-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-limit-rate.c: Increase tolerance from 200 to 500 ms
     
     Valgrind tests on Travis needed the higher value

2019-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/wget_options_fuzzer.c: Slightly change magic number
     
     Libfuzzer is too clever and detects the magic number used in the fuzzer.
     This leads to weird behavior and false positives.

2019-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*.in: Update fuzz corpora from OSS-fuzz

2019-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/get_ossfuzz_corpora: mkdir *.in directories

2019-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/get_ossfuzz_corpora: Remove -f from unzip

2019-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (_iri_unescape_inline): Fix integer overflow (harmless)

2019-04-18 Kumar Mallikarjuna <kumarmallikarjuna1@gmail.com>

     Add TLS 1.3 post-handshake authentication
     * tests/Makefile.am: Loading post-handshake-auth test
     * tests/libtest.c:
     Added execution of 'WGET_TEST_POST_HANDSHAKE_AUTH' key.
     Value: other than 0 (Check for post handshake authentication)
     Value: 0 (Don't check)
     * tests/libtest.h: Defined 'WGET_TEST_POST_HANDSHAKE_AUTH'
     * tests/test-post-handhshake-auth.c: Added to test post handshake authentication support

2019-04-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix heap buffer overflow introduced in previous commit
     
     * libwget/iri.c (_iri_unescape_inline): Add missing 'continue'
     
     Found by OSS-FUZZ (Issue 14428)

2019-04-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add basic HTML entity decoding
     
     * libwget/iri.c (_iri_unescape_inline): Decode basic HTML entities
     * tests/test-base.c: Add test for &amp;, #ddd; and #xHH;
     
     This only cares for the basic HTML entities mentioned in RFC1866.
     This commit closes Gitlab issue 44, though it is not a full handling
     of entities. But not sure if anyone ever requests it.
     
     Fixes #44

2019-04-22 Rohan Fletcher <rohfle@gmail.com>

     Added tests for limit-rate
     
     * tests/test-limit-rate.c: new test file for limit-rate
     * tests/Makefile.am: added tests/test-limit-rate.c to build

2019-04-22 Rohan Fletcher <rohfle@gmail.com>

     Progress bar speed now calculated earlier
     
     * libwget/bar.c: added ring_used to _bar_slot_t.
       speed calculations now use the first slot while the ring is filling

2019-04-20 Rohan Fletcher <rohfle@gmail.com>

     Added limit-rate feature (#408)
     
     * src/options.c: new --limit-rate command-line args
     * src/wget_options.h: new config variable for limit-rate cli arg
     * src/wget.c: new limit_transfer_rate function. Added limit rate state
       vars to struct _body_callback_context
       (_get_body): add call to limit_transfer_rate when limit-rate enabled
       (http_send_request): init limit rate state vars

2019-04-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix parsing float values for CLI options
     
     * src/options.c: New function _parse_double_modifier(),
       (parse_numbytes): use _parse_double_modifier() instead of sscanf(),
       (parse_timeout): Likewise
     
     Fixes #432

2019-03-21 Kumar Mallikarjuna <kumarmallikarjuna314@gmail.com>

     Fix for -p -nc Bug
     
     * src/wget.c: Modified to stop redownload if document already exists
     * tests/test-p-nc.c: Added test for '-p -nc'
     * tests/Makefile.am: Modified to include test-p-nc.c while testing.
     
     Fixes #209

2019-04-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Kumar Mallikarjuna [ci skip]

2019-04-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Use buildenv-fedora for FEDORA_BUILD

2019-04-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change /builds/common to /usr/local

2019-04-15 Kumar Mallikarjuna <kumarmallikarjuna314@gmail.com>

     Fix for --stats-all not working
     * src/options.c: Modified 'parse_stats_all()' for 'val' to be non-null.

2019-04-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add TCP FastOpen Linux 4.11+ style
     
     * libwget/net.c: #define TCP_FASTOPEN_LINUX_411,
       (_set_socket_options): Set TCP_FASTOPEN_CONNECT socket option,
       (wget_tcp_connect): Add code for Linux 4.11+

2019-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Move WINPATH further up

2019-04-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Fix pkg-config and gnutls

2019-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/spell-checker: Fix for 'te' in example URL

2019-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Skip blacklisting URLs from STDIN + tty
     
     * src/wget.c: Add URL_FLG_NO_BLACKLISTING,
       (add_url_to_queue): New param 'flags', skip blacklisting
       when URL_FLG_NO_BLACKLISTING is given,
       (input_thread): Add description, use URL_FLG_NO_BLACKLISTING
     
     This change allows us to use interactive services like
      (b="http://te.ttr.is:8003"; echo $b; \
       while read -sN1 a; do echo "$b/$a"; done) | wget2 --input-file=- -qO-
     (h,j,k,l = left, down, turn, right; ctrl-c = stop)

2019-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (input_thread): Fix communication with main thread

2019-03-31 Darshit Shah <darnir@gnu.org>

     Add Last-Modified and Content-Type to CSV stats
     
     * src/stats_site.c(struct site_stats_t): Add members last_modified and
     mime_type to store the last modified time and content-type respectively
     (stats_site_add): Store the mime type and last modification time of the
     file into the stats
     (free_stats): Free the heap-allocated mime_type field
     (print_csv): Add columns for last-modified and content-type to CSV
     header
     (print_csv_entry): Add the data for the above two columns

2019-03-26 Darshit Shah <darnir@gnu.org>

     Support XDG Desktop Specification for config files
     
     Adds functionality to Wget2 to support the XDG Base Directory
     Specification[1]. Also marks as deprecated the old location of the
     config file.
     
     * docs/wget2.md: Explicitly mark `$HOME/.wget2rc` as deprecated.
     * po/potfiles.in: utils.c now has a translateable stirng
     * src/options.c(read_config): Use bool instead of int
     (get_config_files): Now takes config_home and user_home as input.
     `user_home` is only temporary and will be removed once support for
     ~/.wget2rc is removed.
     (get_xdg_data_home): Derives the location where the data files are to be
     stored according to [1].
     (get_xdg_config_home): Derives the location where the config files are
     to be stored according to [1].
     (init): Store all the data files in $XD_DATA_HOME
     * src/wget.c(mkdir_path): Move function to utils.c
     * src/utils.c(mkdir_path): Move function from wget.c. Can now handle
       both file and directory paths.
     * src/utils.h: Add declaration for mkdir_path
     
     [1]: https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html

2019-02-16 Darshit Shah <darnir@gnu.org>

     Improve handling of initialization files
     
     * docs/wget2.md: Add section on initialization files and the order in
     which they are read.
     * src/options.c(struct config config): Set system_config to the default
     value of "SYSCONFDIR/wget2rc"
     (struct optionw): --config now maps to config.user_config and update the
     value of the default path
     (read_config): Read the configuration for system and user configs, if
     they're set
     (get_config_files): New function that sets the values for
     config.system_config and config.user_config. For the system config it
     picks either the file in `$SYSTEM_WGET2RC` or at
     `/usr/local/etc/wget2rc`. For the user config, it picks the first file from
     `--config`, `$WGET2RC`, `$XDG_CONFIG_HOME/wget/wget2rc`,
     `~/.config/wget/wget2rc` or `$HOME/.wget2rc`.
     (init): Remove the code for finding all the config files and move it to
     `get_config_file`.
     (deinit): Free config.user_config and config.system_config. Remove
     config.config_files.
     * src/wget_options.h(struct config): New char * user_config and
     system_config. Remove config.config_files

2019-02-16 Darshit Shah <darnir@gnu.org>

     Get system wget2rc file
     
     * src/Makefile.am: Don't create a separate directory for Wget2 in
     SYSCONFDIR
     * src/options.c: If SYSTEM_WGET2RC is not set, then try to read the
     global Wget2rc from SYSCONFDIR

2019-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c (wget_str_to_ascii): Use IDN2_USE_STD3_ASCII_RULES
     
     We convert hostnames and thus have to apply IDN2_USE_STD3_ASCII_RULES.
     If we don't do, the result could contain any ascii characters,
     e.g. 'evil.c\u2100.example.com' will be converted into
     'evil.ca/c.example.com', which seems no good idea.

2019-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_http_client_fuzzer.c: Fix for OpenBSD

2019-02-16 Darshit Shah <darnir@gnu.org>

     * docs/wget2.md: Fix typo in identation of --dns-cache

2019-02-16 Darshit Shah <darnir@gnu.org>

     * Pull gnulib forward

2019-02-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Correct --logfile -> --output-file

2019-01-23 Leon Klingele <git@leonklingele.de>

     * docs/wget2.md: --no-cache also sets the 'Cache-Control: no-cache' header
     
     Copyright-paperwork-exempt: Yes

2019-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Don't enable valgridn tests for Arch runner

2019-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Do not call pacman -Q

2019-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Prerequisite 'rsync' removed

2019-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix YAML syntax error

2019-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add Debian Testing CI runner

2019-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Really use Arch runner in CI

2019-01-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test.c (test_stringmap): Fix warning (shadowed variable)

2019-01-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashmap + stringmap docs
     
     * include/wget/wget.h: Add docs for hashmap/stringmap typedefs,
       fix argument of wget_hashmap_iterator_free()
     * libwget/hashmap.c: Add docs, fix wget_hashmap_iterator_free()
     * libwget/stringmap.c: Add docs
     * unit-tests/test.c: Fix call to wget_stringmap_iterator_free()

2019-01-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add iterators for hashmap and stringmap
     
     * include/wget/wget.h: New functions wget_hashmap_iterator_alloc(),
       wget_hashmap_iterator_free(), wget_hashmap_iterator_next(),
       also for stringmap.
     * libwget/hashmap.c: Implementation of the above functions
     * libwget/stringmap.c: Add wget_stringmap_iterator_next()
     * unit-tests/test.c: Add tests using stringmap iterator
     
     This functionality is sometimes more handy than the *_browse() API
     with callback functions and context variables.

2019-01-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_add_credentials): Code cleanup

2019-01-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename container set functions
     
     * include/wget/wget.h:
       rename wget_vector_set_growth_policy() to wget_vector_set_resize_factor(),
       rename wget_hashmap_set_growth_policy() to wget_hashmap_set_resize_factor(),
       rename wget_hashmap_setloadfactor() to wget_hashmap_set_load_factor(),
       rename wget_stringmap_setloadfactor() to wget_stringmap_set_load_factor(),
       rename wget_stringmap_set_growth_policy() to wget_stringmap_set_resize_factor().
     * libwget/hashmap.c: Likewise
     * libwget/stringmap.c: Likewise
     * libwget/vector.c: Likewise

2019-01-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Simplify hasmap/stringmap/vector API
     
     * include/wget/wget.h: Remove wget_hashmap_get_null() and
       wget_stringmap_get_null(),
       change params and return value of wget_hashmap_get() and
       wget_stringmap_get().
     * libwget/hashmap.c: Remove wget_hashmap_get_null(),
       change params and return value of wget_hashmap_get(),
       simplify hashmap_find_entry().
     * libwget/stringmap.c: Remove wget_stringmap_get(),
       change params and return value of wget_stringmap_get().
     * libwget/dns_cache.c: Amend for new API
     * libwget/hpkp.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/http.c: Likewise
     * libwget/netrc.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/tls_session.c: Likewise
     * src/host.c: Likewise
     * src/options.c: Likewise
     * src/plugin.c: Likewise
     * src/stats_site.c: Likewise
     * unit-tests/test.c: Likewise

2019-01-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Use float for container growth policy
     
     * include/wget/wget.h: Use float for *_set_growth_policy()
     * libwget/hashmap.c: Use float for wget_hashmap_set_growth_policy()
     * libwget/stringmap.c: Use float for wget_stringmap_set_growth_policy()
     * libwget/vector.c: Use float for wget_vector_set_growth_policy()
     
     Additionally, the +/- logic has been reversed in the above functions.

2019-01-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Update copyrigght to 2019

2019-01-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/version-text.h.in: Use ASCII only chars

2018-12-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix xattr behavior (CVE-2018-20483)
     
     * src/options.c (config): Disable --xattr by default
     * src/wget.c (set_file_metadata): Store origin URL without user/pw,
       store referer just as scheme/host/port

2018-12-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Spell check

2018-12-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix typos found by contrib/spell-checker

2018-12-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/spell-checker: Add script for spell checking

2018-12-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Fix order of libraries for linking [skip ci]

2018-12-27 Rafael Fontenelle <rafaelff@gnome.org>

     Fix misspellings

2018-12-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add libzstd as optional dependency

2018-12-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c: Cleanup wget_match_tail(_nocase)

2018-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-redirection.c: Add test for Location URI with spaces in filename

2018-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Allow 3xx for redirection

2018-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (src/wget.c): Small code cleanups

2018-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_location): Being more lenient
     
     Some servers don't percent encode the URI in a Location: header.
     Having spaces in the URI leads to magled file names and likely 404.
     
     Fixes #420

2018-12-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Handle ldconfig for unprivileged users

2018-12-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Call 'ldconfig' at the end of 'make install'

2018-12-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "Fix -k/--convert-links"
     
     This reverts commit 89ff57ee937e6c70d3927c00a9dda75f33947238.
     
     The commit fixed a bug by generating a regression at another place.
     See https://gitlab.com/gnuwget/wget2/issues/415#note_124641970

2018-12-12 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/http.c (wget_http_add_credentials): Compare case independent
     
     Fixes an issue with MHD 9.62 that uses a lowercase 'md5' string.

2018-12-03 Leif Ryge <leif@synthesize.us>

     * docs/wget2.md: Fix typo s/exists/exits
     
     Copyright-paperwork-exempt: Yes

2018-11-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_xattr.h: Fix getxattr args on OSX/FreeBSD

2018-11-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Do remove css_tokenizer.c with 'make clean'

2018-11-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/check_options: Exit if not run in bash

2018-11-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add CI tarball build on basic Alpine

2018-11-17 Darshit Shah <darnir@gnu.org>

     Fix VPATH build broken in earlier commit
     
     * tests/Makefile.am: Add new file plugin_tests.h to DIST Files
     * tests/plugin_tests.h: Use BUILDDIR not SRCDIR for .libs location

2018-11-14 Darshit Shah <darnir@gnu.org>

     Fix bug in dns_cache_preload
     
     * src/options.c(options): --dns-cache-preload does expect a value. It is
     not an option.

2018-11-14 Darshit Shah <darnir@gnu.org>

     Use a common header file to deduplicate plugin test boilerplate
     
     * tests/test_plugin.h: Add the OBJECT_DIR and other defines in a single
     common file for all plugin tests
     * tests/test-plugin*.c: Remove boilerplate code and include
     "test_plugin.h"

2018-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Ad -r to example for --filter-mime-type [skip ci]

2018-10-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Use extended file attributes for server's file timestamp
     
     * src/wget_xattr.h: Add fgetxattr definitions (Linux, Apple, FreeBSD)
     * src/wget.c (set_file_metadata): Save "user.last_modified" attribute,
      (read_xattr_metadata): Add function,
      (write_xattr_metadata): Cleanup code,
      (http_create_request): Get timestamp from xattr if available

2018-10-16 Josef Moellers <jmoellers@suse.de>

     Handle wide characters in download progress bar
     
     * bootstrap.conf: Add gnulib module 'wcwidth'
     * libwget/bar.c: New function inspect_multibyte(),
       (_bar_update_slot): Make use of inspect_multibyte()

2018-10-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (init): Avoid error msg if HSTS preload file isn't given

2018-10-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix -k/--convert-links
     
     When different URLs result in the same local file so that
     -k converts a file several times, that file becomes corrupted.
     
     This commit fixes it and adds a test case.
     
     Reported-by: rgpublic on Gitab.com
     Fixes #411

2018-10-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Add valgrind suppressions for TravisCI (due to old libidn)
     
     * fuzz/valgrind-suppressions: Add suppression
     * tests/valgrind-suppressions: Add suppression

2018-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Suppress some leaks detected by valgrind in fuzz/
     
     * fuzz/main.c: Use --suppressions and --gen-suppressions
     * fuzz/valgrind-suppressions: New suppression file
     
     Some library's memory can't be freed. So we suppress what is needed
     to let the CIs survive.

2018-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*_fuzzer.in/*: Update fuzzer copora from OSS-Fuzz

2018-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/get_ossfuzz_corpora: Use faster corpus download from OSS-Fuzz

2018-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitignore: Add fuzz/*_fuzer.new directories

2018-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (deinit): Free config.accept_regex and config.reject_regex

2018-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/csv2tree: Remove superfluous 'import json' [skip ci]

2018-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix documentation of HPKP return values

2018-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * .lgtm.yml: Classify test directories

2018-10-18 Darshit Shah <darnir@gnu.org>

     Fix progress bar display in VTE Terminals
     
     GNOME VTE removed support for VT-100 sequences to save and restore
     cursor position that libwget progress display was using. Their suggested
     approach is to use the DECSC/DECRC sequences from VT-520 instead of the
     SCOSC/SCORC sequences from VT-100. Since the DECSC/DECRC sequences are
     also supported by all other terminal emulators, we make the switch here
     in order to suport VTE emulators as well.
     Upstream Report: https://gitlab.gnome.org/GNOME/vte/issues/48
     
     * libwget/bar.c(_bar_print_slot): Use ESC 7 (DECSC) instead of CSI s (SCOSC)
     (wget_bar_write_line): Same
     (_restore_cursor_position): Use ESC 8 (DECRC) instead of SCI u (SCORC)

2018-10-17 Darshit Shah <darnir@gnu.org>

     * benchmarks/benches/convert.gp: Add generated file warning
     
     [ci skip]

2018-10-14 Darshit Shah <darnir@gnu.org>

     Remove old benchmark scripts
     
     * benchmarks/bench_https_*: Deleted. Superceded by new scripts
     * benchmarks/benchmark.sh: Deleted. Superceded by new scripts
     * benchmarks/new_benchmark.sh: Renamed to benchmark.sh
     
     [ci skip]

2018-10-14 Darshit Shah <darnir@gnu.org>

     Add a small harness for Benchmarking code
     
     [ci skip]
     This set of script works through the new_benchmark.sh script.
     I've tried to keep everything modular, extensible and clean.
     
     * benchmarks/new_benchmark.sh: New benchmark harness
     * benchmarks/sources/*.bench.sh: Program specification files
     * benchmarks/benches/http{1,2}.sh: Benchmark specification files
     * benchmarks/benches/convert.gp: A gnuplot script to convert the 2
     column data into four columns for making the errorbars plot

2018-10-16 Darshit Shah <darnir@gnu.org>

     * .gitignore: Ignore version-text.h, a generated file

2018-10-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * .lgtm.yml: Exclude unit-tests/files

2018-08-17 jmoellers <jmoellers@suse.de>

     Fix issue with the number of bytes downloaded vs accounted for in the progress bar.
     
     * include/wget/wget.h(wget_bar_slot_begin): Now accepts another
     parameter, `new_file`.
     * libwget/bar.c(wget_bar_slot_begin): Support `new_file` parameter.
     Allows calling mehod multiple times for the same file.
     * src/bar.c(bar_slot_begin): Same
     * src/wget_bar.h: Same
     * src/wget.c(_get_body): Pass only the difference (number of bytes
     actually downloaded since last call) to the progress routines

2018-08-17 jmoellers <jmoellers@suse.de>

     Fix a bug in HTTP/2 downloads that caused incorrect progress display
     
     * libwget/bar.c(wget_bar_slot_begin): Display filename when only 1 file
     per slot. Else, display total number of files in that slot.
     (wget_bar_slot_downloaded): The length now represents an incremental
     value, not the absolute number of bytes.
     * src/wget.c(_get_body): Same.

2018-10-14 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yml: Skip downloading po files during bootstrap

2018-10-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (deinit): Free config.hsts_preload_file

2018-10-13 Darshit Shah <darnir@gnu.org>

     * bootstrap: Update script from gnulib

2018-10-13 Darshit Shah <darnir@gnu.org>

     Update gnulib

2018-10-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Use rm -f to avoid error messages

2018-10-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add copyright,license and mailing list info to --version
     
     * configure.ac: Add creating src/version-text.h from .in file
     * src/Makefile.am: Add version-text.h to wget2_SOURCES
     * src/options.c (print_version): Print text from version-text.h
     * src/version-text.h.in: New template file

2018-10-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add zstd decompression (RFC8478)
     
     * README.md: Mention zstandard
     * configure.ac: Check for libzstd
     * docs/wget2.md: Document new --compression type
     * include/wget/wget.h: Add wget_content_encoding_zstd
     * libwget/decompressor.c: Implement the zstd decompressor
     * libwget/http_parse.c (wget_http_parse_content_encoding): Add zstd
     * src/options.c (print_version): Add +/-zstd for --version,
       (parse_compression): Check for wget_content_encoding_zstd,
       (options): Add zstd to help text
     * src/wget.c (http_create_request): Add zstd to Accept-Encoding:
     * tests/test-compression.c: Add test for zstd

2018-09-22 Darshit Shah <darnir@gnu.org>

     Remove support for libunistring and libidn2 < 0.14
     
     * configure.ac: Remove support for libidn2 < 0.14 and libunistring
     * libwget/encoding.c: Same
     * README.md: Same

2018-10-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-include-and-exclude-directories.c: Use double quote

2018-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Fix check for non-200 status codes

2018-07-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add option --save-content-on
     
     * docs/wget2.md: Add docs for --save-content-on
     * src/options.c (options): Add "save-content-on"
     * src/wget.c:
     * src/wget_options.h (struct config): Add save_content_on member
     * tests/Makefile.am: Add tests/test--save-content-on.c
     * tests/test--save-content-on.c: New test file

2018-10-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add support for Chromium's HSTS Preload List
     
     * README.md: Add libhsts as optional dependency
     * configure.ac: Add test for libhsts
     * docs/wget2.md: Add text for --hsts-preload and --hsts-preload-file
     * libwget/init.c:
     * src/options.c (print_version): Add +/-hsts for --version,
       (options): Add --hsts-preload and --hsts-preload-file,
       (init): Load the HSTS peload list,
       (deinit): Unload the HSTS preload list
     * src/wget.c (try_connection): Eventually change http to https
     * src/wget_options.h (config): Add hsts_preload and hsts_preload_file

2018-10-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add libpcre + libpcre2 as optional deps [skip ci]

2018-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (add_url): Fix -H / --span-hosts

2018-09-25 DalmeGNU <dalmemail@gmail.com>

     * docs/wget2.md: Fixed broken link on guide index
2018-09-23 Darshit Shah <darnir@gnu.org>

     * tests/valgrind-suppressions: Suppress issues from GPGME library

2018-09-21 Darshit Shah <darnir@gnu.org>

     * src/wget.c (process_response): Just an aesthetic improvement to the code

2018-09-21 Darshit Shah <darnir@gnu.org>

     Ensure that robots.txt is honoured even with -c
     
     There was a bug that prevented the robots.txt from being parsed when
     resuming an incomplete download. This would cause the robots rules to
     not be honoured when resuming a broken download.
     
     * src/wget.c (process_response): Move the robots check out of the
     conditional, so it runs in all valid cases
     (http_create_request): In case -c has been passed and we see an existing
     robots.txt, remove it. As a result, we will always download a fresh
     copy of the robots.txt file
     * tests/test-robots.c: Add a new test to ensure the robots file is
     always being parsed

2018-08-24 Darshit Shah <darnir@gnu.org>

     Add some debug messages when a URI is not added to queue
     
     * src/wget.c: Likewise
     * src/blacklist.c: Likewise

2018-09-21 Darshit Shah <darnir@gnu.org>

     Minor changes to the commit-check script

2018-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix searching for libpcre2

2018-09-19 DalmeGNU <dalmemail@gmail.com>

     Add Building with alternate GnuTLS version doc

2018-09-16 DalmeGNU <dalmemail@gmail.com>

     Add URL Encoding documentation

2018-09-16 DalmeGNU <dalmemail@gmail.com>

     Update TestSuite.md & fix pipeline

2018-09-16 DalmeGNU <dalmemail@gmail.com>

     Add test suite documentation

2018-09-14 DalmeGNU <dalmemail@gmail.com>

     Add Contributing Guide

2018-09-14 DalmeGNU <dalmemail@gmail.com>

     Add OptionHandling documentation

2018-09-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (options): List all TLS options for --secure-protocol

2018-09-16 Ander Juaristi <a@juaristi.eus>

     Fix SSL/TLS Doxygen documentation

2018-09-16 Ander Juaristi <a@juaristi.eus>

     Update AUTHORS file

2018-09-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/commit-check: Add support for companies (e.g. redhat.com)

2018-08-31 DalmeGNU <dalmemail@gmail.com>

     Update documentation about how to add a new command line option
     
     * src/options.c: Update comments on how to add a new option
     * docs/faq.md: Document how to add a new CLI-option

2018-09-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix buffer overflow in -X/-I parsing
     
     * src/options.c (set_char_prefix): Fix backslash handling
     * fuzz/wget_options_fuzzer.in/: Add reproducer
     
     This bug was introduced yesterday by commit
     756e470de942ec830a9a424a2340b7e986e9fe7c
     
     Found by oss-fuzz (issue 10163).

2018-09-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix buffer overflow in -X/-I parsing
     
     * src/options.c (set_char_prefix): Fix scratch buffer size
     * fuzz/wget_options_fuzzer.in/: Add reproducer
     
     This bug was introduced yesterday by commit
     756e470de942ec830a9a424a2340b7e986e9fe7c
     
     Found by oss-fuzz (issue 10159).

2018-04-10 Dan <dalmemail@gmail.com>

     Add -X/--exclude-directories and -I/--include-directories
     
     * docs/wget2.md: Add docs for -I/--include-directories=list
       and -X/--exclude-directories=list
     * src/options.c: New function _strchrnul_esc(),
       new function _strmemdup_esc(),
       (parse_stringlist_expand): Use new functions from above,
       new function set_char_prefix(), parse_included_directories()
       and parse_excluded_directories,
       (options): add exclude-directories and --include-directories
     * src/wget.c: New functions match_subdir() and in_directory_pattern_list(),
       (add_url): check if path matches directory patterns,
       (_prepare_file): add new param 'path',
     * src/wget_options.h (struct config): Add member 'exclude_directories'
     * tests/Makefile.am: Add 'test-include-and-exclude-directories'
     * tests/test-include-and-exclude-directories.c: New file

2018-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename --dns-caching to --dns-cache (Wget1.x compatibility)
     
     * docs/wget2.md: --dns-caching -> --dns-cache
     * src/options.c (options): Likewise

2018-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/Makefile.am: Add README.md to DISTCLEANFILES

2018-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Improve online documentation
     
     * README.md: Move some dev info to faq.md
     * docs/Makefile.am: Generate introduction from README.md
     * docs/faq.md: Started with User and Dev sections
     * docs/libwget.doxy.in: Remove mainpage, use README.md instead
     * docs/mainpage.md: Remove
     * docs/wget2.md: Amended intro to options that take lists

2018-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_base64_fuzzer.c: Silence scan-build

2018-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Document wget_base64_get_(en|de)coded_length() and move to base64.c
     
     * include/wget/wget.h: Declare both function as pure
     * libwget/base64.c: Add both functions incl. documentation,
       (wget_base64_decode_alloc): Remove hard-coded calculation,
       (wget_base64_encode_alloc): Likewise.
     * libwget/tls_session.c (_tls_session_save):
       Use wget_base64_get_encoded_length() instead hard-coded calculation
     * fuzz/libwget_base64_fuzzer.c:
       Avoid both functions to be optimized out

2018-08-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Add libwget/error.c

2018-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Set tries to 1 on HTTPS errors when built without TLS support

2018-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c (_verify_detached_sig): Return WGET_E_GPG_VER_FAIL on signatue failure

2018-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     New function wget_strerror()
     
     * docs/Makefile.am: Add man page build for error functions
     * include/wget/wget.h: Make WGET_E_* an enum wget_error_t,
       declare new function wget_strerror()
     * libwget/Makefile.am: Add error.c
     * libwget/error.c: New file

2018-08-17 Darshit Shah <darnir@gnu.org>

     * src/wget_options.h: Add the const qualifier to valid options

2018-08-17 Darshit Shah <darnir@gnu.org>

     * libwget/http.c(_print_frame_type): Don't print anything when frame type is DATA

2018-08-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Add base64 URL/file safety
     
     * include/wget/wget.h: Add wget_base64_urlencode()
     * libwget/base64.c: New function wget_base64_urlencode(),
       new function _wget_base64_encode(),
       (base64_2_bin): add charactes '-' and '_'.

2018-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Fix name of Josef Möllers

2018-08-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/commit-check: Don't check the name
     
     The name can't easily be used as an identifier.
     E.g. my name is different through commits: 'Tim Ruehsen' or 'Tim Rühsen'
     
     Checking the email address used for the FSF assignment is enough.

2018-08-16 Darshit Shah <darnir@gnu.org>

     * AUTHORS: Josef Moellers has copyrights assigned
     
     [skip ci]

2018-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile: Perform checks in check-local unconditionally

2018-08-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Fix local-check for VPATH build

2018-08-12 Darshit Shah <darnir@gnu.org>

     * Makefile.am: Make check-local fail on error

2018-08-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Add Aniketh Gireesh

2018-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add description for --dns-caching

2018-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new option --dns-cache-preload
     
     * include/wget/wget.h: New function wget_tcp_dns_cache_add()
     * libwget/dns_cache.c (wget_dns_cache_add): Fix docs
     * libwget/net.c (_wget_tcp_resolve): Changed params,
       new function wget_tcp_dns_cache_add()
     * src/options.c (options): Add --dns-cache-preload,
       new function _preload_dns_cache(),
       (init): Call _preload_dns_cache()
     * src/wget_options.h (struct config): Add member dns_cache_preload

2018-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (add_url): Don't follow redirects when --max-redirects=0

2018-08-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (process_response_header): Prevent read of uninitialized data

2018-08-05 DalmeGNU <dalmemail@gmail.com>

     Add information related to the build process in Haiku [skip ci]
2018-08-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add example batch_loader
     
     * examples/Makefile.am: Add batch_loader.c
     * examples/batch_loader.c: New example code
     
     This example uses 500 threads to process domains / URLS from
     stdin. It downloads the URL and creates a stats entry in out.csv.
     Check the source for details.

2018-08-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove usage of getaddrinfo_a() and gai_* functions
     
     The glibc async functions turned out to be unstable and
     error-prone. They also use threads to implement timeouts.
     If we need DNS timeouts and/or async DNS lookups, we should
     have a look at external resolver libraries.

2018-08-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix calling error handler for uncompressing
     
     * ../libwget/decompressor.c (wget_decompress): Fix argument to
       error_handler()
     * ../libwget/http.c (_on_stream_close_callback): Set stream context
       to NULL when freeing

2018-08-04 Darshit Shah <darnir@gnu.org>

     * src/wget.c (main): Add comment explaining why there are nthreads+2 slots

2018-08-01 Darshit Shah <darnir@gnu.org>

     * src/options.c: Remove dot progress from help text

2018-07-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Mention 'setarch x86' on Haiku [skip ci]

2018-07-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Remove -Wabi, too loud with gcc 8

2018-07-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (downloader_thread): Fix buffer overflow

2018-07-29 Darshit Shah <darnir@gnu.org>

     Rewrte the speed reporting codepath
     
     * include/wget/wget.h (wget_human_readable): Function is not a const
     * libwget/bar.c (_BAR_SETTINGS): Remove SPEED_REDRAW_TIME
     (struct _speed_report): Remove and add relevant fields to _bar_slot_t
     (_bar_update_speed): Removed
     (_bar_update_speed_stats): New function to populate the speed ring and
     fill in the speed_buf buffer
     (_bar_set_progress): Remove old commented out code
     (_bar_update_slot): Speed computation is moved to
     `_bar_update_speed_stats`.
     (wget_bar_set_slots): No longer need to realloc speed ring buffers
     (wget_bar_slot_begin): Initialize the ring_pos and the speed rings
     (wget_bar_deinit): Variable `speed_r` no longer used
     
     In this implementation, I've made a few functional changes and some
     other design changes to how the speed report is computed. First, I've
     removed the assumption that the progress bar is updated every 125ms.
     This is part of the client side logic and we can't assume that in the
     library. Instead, the speed report is computed every time the progress
     bar is refreshed. The size of the speed ring and how the computation is
     done is documented to allow the library users to make a decision on how
     they want to use the progress bar.
     
     While, I've currently removed SPEED_REDRAW_TIME, I do plan to bring it
     back soon. This will most likely be done alongside support for computing
     the ETA of the download.
     
     In this commit, I have also made it such that the speed is shown only
     after the speed ring is filled in entirely. This most likely needs to
     change such that we show the speed immediately. However, we document
     that it will jitter a lot while the speed ring is being populated.

2018-07-26 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c(_bar_update_speed): Get time only once

2018-07-23 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c(_BAR_DECOR_SIZE): Account for extra space at end

2018-07-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/tls_session.c: Only update/write when really changed

2018-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove --gnutls-options
     
     * docs/wget2.md: Remove docs for --gnutls-options
     * include/wget/wget.h: Remove WGET_SSL_DIRECT_OPTIONS
     * libwget/ssl_gnutls.c: Remove use of WGET_SSL_DIRECT_OPTIONS
     * src/options.c: Remove --gnutls-options
     * src/wget_options.h: Remove config.gnutls_options
     
     This option was obsoleted by --secure-protocol where you can
     also set an explicit priority/cipher string.

2018-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Add TLSv1_x to --secure-protocol
     
     * docs/wget2.md: Extend docs for --secure-protocol
     * libwget/ssl_gnutls.c (wget_ssl_init): Add priority handling
     
     This commit adds TLSv1_1, TLSv1_2 and TLSv1_3.

2018-07-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Extend OOM handling
     
     * include/wget/wget.h: Amend type of wget_oom_callback_t
     * libwget/xalloc.c: Amend OOM handling
     * src/options.c (_no_memory): Return EXIT_FAILURE
     * unit-tests/test.c (main): Cast to avoid warning
     
     The OOM callback can now return 0 and the allocation function is tried again.

2018-07-05 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Set the speed modifier globally
     
     This reduces the number of computations that need to be done on each bar
     slot update. The modifier is set only at startup, so we don't need to
     recompute it everytime

2018-07-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Increase version of cache

2018-07-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add wget_bitmap_t
     
     * include/wget/wget.h: Add bitmap prototypes
     * libwget/Makefile.am: Add libwget/bitmap.c
     * libwget/bitmap.c: New file for bitmap implementation
     * docs/Makefile.am: Add man pages for bitmap functions
     * unit-tests/test.c: Add tests for bitmap functions
     
     First version was written by Aniketh Girish

2018-07-04 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Use enums for constants instead of defines

2018-07-04 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Add a space to empty speed report

2018-06-11 DalmeGNU <dalmemail@gmail.com>

     Implementation of the --retry-on-http-status option
     
     * src/wget_options.h: Add http_retry_on_status (wget_vector_t) to config structure
     * src/options.c: Add --retry-on-http-status option
     * src/wget.c: Modify downloader_thread() in order to retry a download following the --retry-on-http-status option
     * docs/wget2.md: Add documentation for the --retry-on-http-status option

2018-06-11 DalmeGNU <dalmemail@gmail.com>

     * libwget/bar.c: Don't print zero as speed when we can't calculate it

2018-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new option --keep-extension
     
     * src/options.c: Add option --keep-extension
     * src/wget.c (_open_unique): Add code for --keep-extension
     * src/wget_options.h (struct config): Add keep_extension member
     * docs/wget2.md: Add docs for --keep-extension
     
     The new option --keep-extension changes the behavior for creating a
     unique filename if a file already exists.
     The standard (default) pattern is to generate <filename>.<N>, the new
     pattern is <basename>_<N>.<ext>.
     
     The idea is use such files without renaming when the use depends on the
     extension, like on Windows.

2018-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Allow MinGW runner to fail
     
     The MinGW runner fails due to GnuTLS randomizer failing.
     See https://gitlab.com/gnutls/gnutls/issues/486
     
     When fixed, we will revert this commit.

2018-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add config.h to MinGW artifacts

2018-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_get_response_cb): Fix clang warning

2018-06-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (_add_authorize_header): Fix tests for auth scheme name
     
     Reported-by: @Con7e (gitlab.com)

2018-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix http2 slowness issue
     
     We saw many WINDOW_UPDATE frames while debugging, so we tried to
     fix the window sizes for connection and stream windows to a large value.
     
     This patch also simplifies the receive loop.

2018-06-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_verify_certificate_callback): Fix grammar of error msg
     
     Reported-by: Nicholas Sielicki

2018-06-10 DalmeGNU <dalmemail@gmail.com>

     * libwget/bar.c (wget_bar_slot_begin): Reset speed ring buffer
     
     This fixes wrong (huge) values for small files on the progress bar.

2018-05-27 Neil Locketz <neil@nlocketz.com>

     Document new arguments
     
     * docs/wget2.md: Document the change in behavior, and what each option
       means.

2018-05-31 Neil Locketz <neil@nlocketz.com>

     Add verify-sig missing signature file behavior test.
     
     * tests/Makefile.am: Add new test.
     * tests/test-gpg-verify-no-fail.c: Test behavior of the new missing
     signature stuff.

2018-05-27 Neil Locketz <neil@nlocketz.com>

     Add arguments fail / nofail to --verify-sig
     
     * src/options.c: Change flag to parse out the signature options.
     * src/wget_options.h: Change verify_sig to allow more information
       (selected option rather then a boolean value).
     * src/wget.c: Check for missing signature behavior before failing for
       missing signature.
     * src/job.c: Added additional memory cleanup
     * src/wget_job.h: Shuffled some fields to make new behavior cleaner and
       more convinient. Also added list for remaining signatures that need to
       be attempted.
     
     Allows fine-tuning Wget2's behavior when signature files are not found.

2018-06-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Enable syncing with translationproject.org

2018-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not localize debug_printf format strings
     
     * libwget/cookie.c: Likewise
     * libwget/css_url.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/tls_session.c: Likewise
     * unit-tests/test.c: Likewise
     
     Reported-by: Rafael Fontenelle

2018-06-02 Yuri Chornoivan <yurchor@ukr.net>

     Fix minor typos
     
     * docs/wget2.md: sperated -> separated
     * src/bar.c (bar_init): progess -> progress
     
     Copyright-paperwork-exempt: Yes

2018-05-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Add libpsl build + cleanup

2018-05-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Skip -np/--no-parent for CSS URLs
     
     * src/wget.c: Use URL_FLG_REQUISITE for all CSS URLs
     * tests/test--page-requisites.c: Add tests for @import and url() in CSS

2018-05-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add URL_FLG_REQUISITE to add_url()
     
     * src/wget.c: Add flag URL_FLG_REQUISITE, call add_url() with
       URL_FLG_REQUISITE in case of page requisites.

2018-05-03 Tsukasa OI <floss_wget@irq.a4lg.com>

     Add test case to fail -p with -np
     
     * tests/test--page-requisites.c: Add test case to fail

2018-05-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Escape dots in path components

2018-05-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Remove libwget/html_url.c

2018-05-06 sameeran joshi <joshisameeran17@gmail.com>

     * libwget/html_url.c(_urls_to_absolute): Remove unused function

2018-05-04 Darshit Shah <darnir@gnu.org>

     Update AUTHORS
     
     [skip-ci]

2018-05-04 Tsukasa OI <floss_wget@irq.a4lg.com>

     * contrib/commit-check: Detect Copyright-paperwork-exempt correctly

2018-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove unconditionally set warning flags for GCC
     
     * configure.ac: Add -W(no-)unused-macros and -Wno-missing-field-initializers
       to gcc/clang compiler flags
     * libwget/Makefile.am: Remove -Wno-unused-macros
     * tests/Makefile.am: Remove -Wno-missing-field-initializers
     * unit-tests/Makefile.am: Likewise
     
     Reported-by: Dagobert Michelsen

2018-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Add $(EXEEXT) where missing

2018-05-03 Tsukasa OI <floss_wget@irq.a4lg.com>

     Fix null-pointer dereference on -r -np
     
     * src/wget.c (add_url): Fix null-pointer dereference on -r -np
     * tests/test-np.c: Modify test case to detect this condition
     
     Copyright-paperwork-exempt: Yes

2018-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Small cleanup

2018-05-01 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c(_bar_set_progress): Fix off by one error

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Prepare Release 1.99.1 (alpha)

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/fuzzer.h: Disable pedantic and unused warnings

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Update copyright to 2018

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/update_copyright: Update to 2018

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add scripts for testing on gcc and OpenCSW buildfarm
     
     * ci-test: New script with generic code
     * ci-test.d/gcc110.fsffrance.org.sh: Script with special code for gcc110 (CentOS 7.4)
     * ci-test.d/gcc70.fsffrance.org.sh: Script with special code for gcc70 (NetBSD 5.1)
     * ci-test.d/login.opencsw.org.sh: Script with special code for OpenCSW (Solaris)

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Don't do syntax-check + check_options in tarball build

2018-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/valgrind-suppressions: Ignore pthread leak from gai_misc.c

2018-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Add G_GNUC_WGET_UNUSED to fuzz code
     
     * fuzz/libwget_xml_parse_buffer_fuzzer.c: Likewise
     * fuzz/main.c: Likewise

2018-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Remove hard-coded compiler flags

2018-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove _GL_INLINE from functions
     
     * libwget/hashmap.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/utils.c: Likewise
     
     Gcc 4.1.3 on NetBSD 5.1 errors when duplicate _GL_INLINE is given as a
     function attribute.
     From the gnulib manual: "C code ordinarily should not use inline. Typically it
     is better to let the compiler figure out whether to inline, as compilers are
     pretty good about optimization nowadays. In this sense, inline is like
     register, another keyword that is typically no longer needed"

2018-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Exclude fuzz corpora from tarball
     
     * fuzz/Makefile.am: Do not include corpora in tarball
     * fuzz/main.c: SKIP if corpora directory isn't found (make check)
     
     The fuzz corpora are thousands of files, not needed for a standard build
     from a distribution tarball. The reproducers of former issues are being
     included for regression testing.

2018-04-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --retry-connrefused
     
     * src/options.c: Add --retry-connrefused
     * src/wget.c (establish_connection): Skip final failure
     * src/wget_options.h (struct config): Add retry_connrefused

2018-04-27 Darshit Shah <darnir@gnu.org>

     * tests/valgrind-suppressions: Update suppressions for Glibc 2.27

2018-04-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mail.sh: Assume bash, print email to file if msmtp not found

2018-04-17 Darshit Shah <darnir@gnu.org>

     * contrib/mail.sh: File got deleted accidentally in an earlier commit

2018-04-16 Darshit Shah <darnir@gnu.org>

     Update the AUTHORS list

2018-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * .lgtm.yml: Call ./bootstrap

2018-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Dont't recognize %3A as colon in relative URLs
     
     * include/wget/wget.h: New function wget_iri_unescape_url_inline()
     * libwget/iri.c: Likewise
     * src/wget.c (_normalize_uri): Use wget_iri_unescape_url_inline()
     * examples/check_url_types.c: Likewise
     * tests/test-base.c: Add test case
     * unit-tests/test.c (test_iri_relative_to_absolute): Add test case
     
     Relative URLS like in href='foo%3A/' have been detected and parsed
     as absolute URL with (unknown) scheme 'foo:'.
     This commit fixes it.

2018-04-11 Bas van Schaik <github@s.traiectum.net>

     * .lgtm.yml: Remove unnneeded package installation and ./bootstrap
     
     - no need to install gnutls-dev; it's installed automatically during the
       build/analysis process
     - however, the lgtm.yml I used for setting wget2 up on lgtm.com does
       install two other packages that are not auto-detected: lzip and
       libgpgme11-dev
     - no need to run ./bootstrap either; LGTM will do that automatically :)

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .lgtm.yml: New file for static analysis on lgtm.com [ci skip]

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xml.c: Fix copyright date (test lgtm.com automatism) [ci skip]

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix header guard (found by lgtm.com)

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_do_handshake): Fix error value for older GnuTLS on OSX

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile: Make css_tokenizer.c generation more portable

2018-03-15 Jiading Guo <zingdle@gmail.com>

     Add --[no-]compression=TYPE
     
     * src/options.c: Add compression option support
     * src/wget.c: Generate 'Accept-Encoding' headers accordingly
     * src/wget_options.h: Add compression variables
     * libwget/decompressor.c: Add xz and "none" types
     * include/wget/wget.h: Add xz types
     * docs/wget2.md: Add compression option document
     * tests/Makefile.am: Add compression test
     * tests/libtest.c: Add request header test support
     * tests/libtest.h: Add request header test support
     * tests/test-compression.c: Add compression test

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_do_handshake): Fix error value for older GnuTLS

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (wget_tcp_connect): Use WGET_E_* return code

2018-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add Jiading Guo to AUTHORS [ci skip]

2018-04-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_job.h: Fix typo in comment [ci skip]

2018-04-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_prefer_family): Fix pointer type
     
     Fixes #373

2018-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Enable hashing fallback to nettle

2018-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix scan-build for gnulib hash code
     
     * .gitlab-ci.yml: Obsolete configure cache
     * include/wget/wget.h: Add WGET_DIGTYPE_MAX
     * libwget/hashfile.c: Fix code

2018-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c: Fix warnings

2018-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix detection of gnutls/crypto.h
     
     Some versions of GnuTLS do not provide a crypto.h, so we have
     to check for it's presence.
     This check fails with some versions of GnuTLS since crypto.h
     lacks the #include <gnutls/gnutls.h>.

2018-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Add fix for lib/pthread_sigmask.c

2018-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Remove gcc's -Wno-incompatible-pointer-types when cross-compiling

2018-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Fix misalignment, found by oss-fuzz

2018-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*.in: Update oss-fuzz corpora

2018-04-02 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yml: Add new Arch CI which is run only on schedules
     
     [ci skip]

2018-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for gnutls/crypto.h
     
     * configure.ac: Check for gnutls/crypto.h
     * libwget/hashfile.c: Need HAVE_GNUTLS_CRYPTO_H to include gnutls/crypto.h
     
     Found this problem on the OpenCSW Solaris build farm

2018-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c: Don't define _U, already defined on Solaris

2018-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Remove gperf from dependency list

2018-04-02 Darshit Shah <darnir@gnu.org>

     * configure.ac: Add comment explaining IDNA support

2018-04-02 Darshit Shah <darnir@gnu.org>

     * bootstrap.conf: Update dependencies

2018-04-01 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yml: Switch commitcheck script to basic alpine container

2018-04-01 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yml: Remove flawfinder and change valgrind to Debian

2018-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Do not build lzip tarball

2018-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Copy gnulib subdir instead using git [skip ci]

2018-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Use wget_snprintf() in src/*.c
     
     * src/options.c: Use wget_snprintf() instead of snprintf()"
     * src/wget.c: Likewise

2018-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Use libwget's print-like functions instead the stdio ones
     
     * include/wget/wget.h: Amend return type of wget_bar_print(), wget_bar_vprintf()
     * libwget/Makefile.am: Replace fprintf in generated css_tokenizer.c
     * libwget/bar.c: Replace *printf by wget_*printf,
       (_bar_set_progress): Generate progress bar with memcpy/memset
     * libwget/hpkp.c: Replace *printf by wget_*printf
     * libwget/cookie.c: Likewise
     * libwget/hpkp.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/http.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/io.c: Likewise
     * libwget/net.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/pipe.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/utils.c: Likewise
     * libwget/xml.c: Likewise
     
     The intention is to not pull in (large) code parts from libc when
     linking statically, the performance is better and we have no
     portability issues on non-POSIX platforms (e.g. Windows).

2018-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Add more printf-like functions
     
     * include/wget/wget.h: Add wget_vfprintf(), wget_fprintf(),
       wget_vsnprintf(), wget_snprintf()
     * libwget/printf.c: Likewise

2018-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/strscpy.c: Fix return value of strscpy()

2018-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test.c: Add tests for strscpy()

2018-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/Makefile.am: Build man pages for hashmap/stringmap API

2018-03-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Document hashmap and stringmap
     
     * include/wget/wget.h: Cleanups
     * libwget/hashmap.c: Documentation + cleanups
     * libwget/stringmap.c: Documentation + cleanups
     * libwget/vector.c: Fix doxygen issue

2018-03-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/vector.c: Small cleanups

2018-03-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove param 'off' from wget_vector_create()
     
     * libwget/vector.c (wget_vector_create): Remove param 'off',
       (wget_vector_set_growth_policy): Add new function
     * include/wget/wget.h: Add prototype for wget_vector_set_growth_policy()
     * */*.c: Remove param 'off' from calls to wget_vector_create()

2018-03-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for vector routines
     
     * docs/Makefile.am: Add man page
     * include/wget/wget.h: Amend some vector functions
     * libwget/vector.c: Add checks for parameters,
       add documentation

2018-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove stages, fix configure cache

2018-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add testing on Alpine (musl/busybox)

2018-03-23 Darshit Shah <darnir@gnu.org>

     Merge the Full/Debian and VPATH Runners into one

2018-03-23 Darshit Shah <darnir@gnu.org>

     More efficient use of CI Pipelines
     
     * .gitlab-ci.yml: Split CI runners into 3 stages, build, test and
     deploy. Stages are executed in that order. So any breakage will save the
     later stages from executing.

2018-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Exclude tests/gpg and tests/certs from any syntax checks

2018-03-23 Darshit Shah <darnir@gnu.org>

     Fix GPGME detection in configure

2018-03-23 Darshit Shah <darnir@gnu.org>

     Update gnulib submodule
     
     * gnulib: Update submodule
     * bootstrap: Update script from gnulib submodule

2018-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-iri-subdir.c: Add runtime test for working SHIFT_JIS->UTF-8 transcoding

2018-02-24 Darshit Shah <darnir@gnu.org>

     New script to ensure that patches without copyright assignment aren't merged
     
         * AUTHORS: Update file with all known contributors to date. Update
         FSF Copyright Assignment status in the first column
         * contrib/commit-check: New script. This is to be run on each merge
         request to master to ensure that the copyright assignment process
         has been completed.
         * .gitlab-ci.yml: Add a new CommitCheck CI which ensures that the
         author has completed their Copyright Assignments. This runner is
         allowed to fail, so it won't affect the CI runners for all forks.

2018-02-26 Darshit Shah <darnir@gnu.org>

     Add new scripts to send Copyright assignment mails
     
         * contrib/assignment_template.txt: Template header text for email
         * contrib/mail.sh: Script that composes and sends an email to a new
         contributor for Copyright Assignment
         * cfg.mk: Add exceptions for assignment_template.txt to syntax-check

2018-02-25 Darshit Shah <darnir@gnu.org>

     Allow a list of possible signature-extensions
     
     * stc/options.c: Modify old option signature-extension to now be a
     stringlist. Also rename it to signature-extensions
     * src/wget_options.h: Move sig_ext from char* to wget_vector_t
     * src/wget.c: Iterate over all signature extensions and request a
     signature file
     * tests/test-gpg-styles.c: Add new test for signature extensions
     * docs/wget2.md: Update documentation for signature-extensions

2018-03-15 Jiading Guo <zingdle@gmail.com>

     Fix lzma  decompressor init
     
     * libwget/decompressor.c: Use lzma_auto_decoder() instead to auto detect lzma/xz format.

2018-03-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Add pkg-config as dependency

2018-03-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix decompress_open argument type
     
     * include/wget/wget.h: Fix 'encoding' to wget_content_encoding_type_t,
       make wget_content_encoding_by_name() PURE,
       make wget_content_encoding_to_name() PURE.
     * libwget/decompressor.c: Fix struct _wget_decompressor_st encoding to
       wget_content_encoding_type_t,
       fix wget_content_encoding_to_name() for 'identity'.

2018-03-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add type<->name functions for content-encoding types
     
     * include/wget/wget.h: AdD typedef wget_content_encoding_type_t,
       add wget_content_encoding_unknown,
       add prototypes for wget_content_encoding_by_name() and
       wget_content_encoding_to_name().
     * libwget/decompressor.c: Implement wget_content_encoding_by_name() and
       wget_content_encoding_to_name().

2018-03-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Increase GnuTLS version from 2.10.0 to 3.3, 3.5 or 3.6

2018-02-27 Jay <jbhv12@gmail.com>

     error handling in XML parsing
     
     * include/wget/wget.h: removed nonnull attribute and defined error code
     * libwget/metalink.c: wget_metalink_parse returns null if XML is malformed
     * libwget/xml.c: added coditions to detect malformed XML in parseXML
     * po/POTFILES.in: localization support for metalink.c

2018-03-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-gzip.c: Fix unused define w/o WITH_ZLIB

2018-03-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test_start_server): Fix unused var w/o WITH_GNUTLS

2018-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add -Werror to appropriate runners

2018-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add -Wno-error to gnulib compiler flags

2018-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats_site.c (print_human): Fix unused-but-used warning

2018-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_tcp_set_stats_site): Fix unused argument

2018-03-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Add dlfcn-win32 build

2018-03-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_http_server_start): Check MHD_OPTION_STRICT_FOR_CLIENT

2018-03-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_http_server_start): Enable strict MHD client mode
     
     Will not allow spaces in the GET target URI from the next release.

2018-02-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/http_parse.c (wget_http_parse_response_header): Remove unneeded comment

2018-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-gzip.c: Add tests for broken server gzip Content-Encoding

2018-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/http.c (wget_http_get_response_cb): Add gzip workarounds

2018-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Support binary content in test suite
     
     * tests/libtest.h (wget_test_file_t): Add content_length member
     * tests/libtest.c (_answer_to_connection): Support content_length member

2018-02-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix ignorant server's Content-Encoding
     
     * libwget/decompressor.c: Fix segfault on unexpected Content-Encoding
     * tests/Makefile.am: Add test-gzip.c
     * tests/test-gzip.c: New test
     
     Reported-by: Jiading Guo
      

2018-03-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix header guards
     
     * include/wget/wget.h: Likewise
     * include/wget/wgetver.h.in: Likewise
     * libwget/*.h: Likewise
     * src/*.h: Likewise
     * tests/libtest.h: Likewise
     
     Header guards should not start with _.
     Private headers now reflect the path within the project.
     The two public headers reflect the releative install directory.

2018-03-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix doxygen syntax
     
     * src/wget_gpgme.h: Likewise
     * libwget/thread.c: Likewise
     * src/wget_gpgme.h: Likewise

2018-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_get_escaped_resource): Escape space in query

2018-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Add links about request line format

2018-02-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix oss-fuzz build
     
     * fuzz/Makefile.am: Add ../src/stats_server.o ../src/stats_site.o to oss-fuzz rule
     * fuzz/libwget_http_client_fuzzer.c: Fix pedantic C++ errors

2018-02-23 DalmeGNU <dalmemail@gmail.com>

     * src/wget.c: Avoid printing two times the number of errors in the same bar_printf()
2018-02-21 Vijo Cherian <codervijo@gmail.com>

     * src/options.c: Improve --help output

2018-02-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Check config.metalink before executing metalink code

2018-02-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/ssl_gnutls.c (_do_handshake): Check for GNUTLS_E_PREMATURE_TERMINATION

2018-02-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix stats and add docs for stats
     
     * docs/wget2.md: Extend docs for --stats-*
     * include/wget/wget.h: Rename WGET_STATS_TLS_TCP_PROTO to WGET_STATS_TLS_HTTP_PROTO,
       add WGET_STATS_OCSP_STAPLING.
     * libwget/ssl_gnutls.c: add stapling stats member, cleanup variables
     * po/POTFILES.in: Remove rsrc/stats_server.c
     * src/stats_dns.c: Cleanup
     * src/stats_ocsp.c: Add stapling to stats
     * src/stats_server.c: Cleanup
     * src/stats_site.c: Rename STATS_SCHEME_* to STATS_METHOD_*
     * src/stats_tls.c: Cleanup
     * src/wget_stats.h: Remove memory alloc from NULL_TO_DASH()

2018-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats_site: Change PGP verification status in CSV output

2018-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats_site.c: Avoid double entries when signature checking is on

2018-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c: Add and use _print_gpg_error()

2018-02-20 Darshit Shah <darnir@gnu.org>

     * src/wget.c(_get_body): Remove leftover debugging statement

2018-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c: Some fixes and cleanups

2018-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c (wget_verify_job): Always initialize info structure

2018-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/csv2tree: New file

2018-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/csv2json: New file

2018-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove JSON format for stats options
     
     * include/wget/wget.h: Remove WGET_STATS_FORMAT_JSON
     * src/stats.c: Remove JSON code
     * src/stats_dns.c: Likewise
     * src/stats_ocsp.c: Likewise
     * src/stats_server.c: Likewise
     * src/stats_site.c: Likewise
     * src/stats_tls.c: Likewise
     * src/wget_stats.h: Likewise
     * tests/stats-test-util.h: Remove JSON tests
     We will provide an extra tool to convert CSV into JSON.

2018-02-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove tree statistics
     
     * docs/wget2.md: Remove 'tree' format from --stats-site
     * po/POTFILES.in: Remove src/stats_site.c
     * src/host.c: Remove host_docs, tree_docs
     * src/job.c: Add a unique ID for each job
     * src/stats.c: Remove TREE stuff
     * src/stats_dns.c: Likewise
     * src/stats_ocsp.c: Likewise
     * src/stats_server.c: Likewise
     * src/stats_tls.c: Likewise
     * src/stats_site.c: Likewise,
       add site_stats_t, cleanup CSV and HUMAN output
     * src/wget.c: Set job ID and ParentID, remove TREE stuff
     * src/wget_host.h: Remove TREE stuff
     * src/wget_job.h: add id and parent_id to struct JOB
     * src/wget_stats.h: Add json_stats
     * tests/stats-test-util.h: Remove TREE test
     We decided to provide an external tool to generate TREE and other
     formatted output from Wget2's CSV output.

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * stats_*.c: Add missing entry for WGET_STATS_FORMAT_TREE

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Move external stats_opts_t from stat.c to wget_stats.h
     
     * src/stats.c: Remove external stats_opts_t
     * src/wget_stats.h: Add external stats_opts_t

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c (stats_init): Fix memory leak

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c (stats_exit): Only deinit after init

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Move Site stats code to own source file

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Move Server stats code to own source file

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Move OCSP stats code to own source file

2018-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Move TLS stats code to own source file

2018-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Clean up DNS stats code
     
     * src/stats_dns.c: Renames and cleanups
     * src/wget_stats.h: Likewise

2018-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Move _shell_expand() into own source file
     
     * src/Makefile.am: Add utils.c and wget_utils.h
     * src/options.c: Remove _shell_expand()
     * src/stats.c: Likewise
     * src/utils.c: New file with shell_expand()
     * src/wget_utils.h: Header file for shell_expand()
     * fuzz/Makefile.am: Add utils.o
     * unit-tests/Makefile.am: Likewise

2018-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Move dns stats code into stats_dns.c

2018-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix stats tests

2018-02-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Refactorings on stats option parsing and printing

2018-02-14 Darshit Shah <darnir@gnu.org>

     Set callback for stats_site and allow freeing non-init mutex

2018-02-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Refactoring of stats callback functions

2018-02-13 Darshit Shah <darnir@gnu.org>

     Handle tree stats case

2018-02-13 Darshit Shah <darnir@gnu.org>

     Some more cleanups

2018-02-13 Darshit Shah <darnir@gnu.org>

     Replace dns data and mutex

2018-02-13 Darshit Shah <darnir@gnu.org>

     Improve stats printing

2018-02-21 Darshit Shah <darnir@gnu.org>

     * src/options.c(print_version): Add gpgme info to wget2 --version

2018-02-20 Darshit Shah <darnir@gnu.org>

     Handle case where wget_bar_init() fails

2018-02-20 Jay <jbhv12@gmail.com>

     added error in progress report

2018-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (process_response): Collect site stats only when requested

2018-02-17 zingdle <zingdle@gmail.com>

     * src/stats.c: Fix handling of output location for stats code

2018-02-15 Darshit Shah <darnir@gnu.org>

     * src/stats.c: Initialize all stats modules, always
     
     This is a terrible hack. But it's the smallest solution I can come up
     with, with the existing stats code to fix the problem that none of the
     stats are being reported.
     
     The problem is that stats_init() must be called before the command line
     is parsed. But stats_init() depends on the command line parsing code to
     set the status flags for which stats to report. Hence, it always sees
     them all as negative.
     
     This commit will initialize all the stats modules, always. So, the stats
     are always collected. Only, we decide at the very end, what, if
     anything, to display. As is obvious, this is terrible. It's a waste of
     resources to compute all these stats that are simply not required. But,
     till the stats code is re-written cleanly, this is what we have to deal
     with

2018-02-15 Darshit Shah <darnir@gnu.org>

     * .gitignore: Update gitignore file

2018-02-15 Darshit Shah <darnir@gnu.org>

     Revert "* libwget/thread.c(pthread_mutex_destroy): Survive destroying a non-initialized mutex"
     
     This reverts commit c46669387bcb4caffa792d2d6360b09685bf3449.

2018-02-15 Darshit Shah <darnir@gnu.org>

     * bootstrap.conf: Clean up some files that gnulib-tool.py creates

2018-02-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c (stats_print): Fix possible memory leak

2018-02-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "Delay stats_init till after comand line parsing"
     
     This reverts commit 33e3322a718a330fb6b426c6a640a0f3f7746d36.

2018-02-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2018-02-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module limits-h
     
     * bootstrap.conf: Add limits-h
     * libwget/cookie.c: Include limits.h
     * libwget/metalink.c: Likewise

2018-02-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Remove lib/openat-die.c

2018-02-14 Darshit Shah <darnir@gnu.org>

     * libwget/thread.c(pthread_mutex_destroy): Survive destroying a non-initialized mutex

2018-02-13 Darshit Shah <darnir@gnu.org>

     * src/stats.c: Print to stderr not stdout

2018-02-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Use realpath() instead of canonicalize_filename_mode()
     
     * bootstrap.conf: Use canonicalize-lgpl module
     * src/gpgme.c: Likewise
     
     Using realpath() reduces extra code from gnulib.

2018-02-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix help text for --enable-fuzzing

2018-02-13 Darshit Shah <darnir@gnu.org>

     Delay stats_init till after comand line parsing
     
     The stats module depends on the command line parser to set some of its
     values. Without that, the module is initialized incorrectly.

2018-02-09 Darshit Shah <darnir@gnu.org>

     src/wget.c(main): Honor --quiet for progress bar

2018-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix make dist with --disable-doc
     
     * configure.ac: Unconditionally process docs/*.in files
     * docs/Makefile.am: Unconditionally put DoxygenLayout.xml into EXTRA_DIST

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix --disable-docs for make distcheck

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix --disable-doc configure option

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove continuation slashes

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add pipeline (gcc full and gcc minial build)

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Exclude .gitlab-ci.yml from sc_two_space_separator_in_usage

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Remove obsolete dummy functions

2018-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/gpgme.c (wget_verify_get_base_file): Fix to build w/o WITH_GPGME

2018-02-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix manywarnings for gcc 8
     
     * configure.ac: Amend for gcc-8
     * m4/wget_manywarnings.m4: Amend for gcc-8

2018-02-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_get_response_cb): Fix undefined behavior

2018-02-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Use getaddrinfo() for fuzzing

2017-11-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_http_client_fuzzer
     
     * fuzz/Makefile.am: Add libwget_http_client_fuzzer
     * fuzz/libwget_http_client_fuzzer.c: New file
     * fuzz/libwget_http_client_fuzzer.in: Initial corpora
     * fuzz/run-clang.sh: Small cleanup

2018-01-30 Tim Rühsen <tim.ruehsen@gmx.de>

     More tests for --https-enfore
     
     * src/options.c: Add debug lines, fix exit_status to exit_status_t
     * src/wget_options.h: Amend prototype of get_exit_status()
     * tests/test--https-enforce-soft2.c: New test
     * tests/test--https-enforce-soft3.c: New test
     * tests/Makefile.am: Add new tests
     * src/wget.c (_fallback_to_http): Skip robotstxt jobs
     * tests/libtest.c: New option WGET_TEST_HTTPS_REJECT_CONNECTIONS
       for wget_test_start_server()

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add test test--https-enforce-hard3.c

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Allow {{port}} in options

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add options --default-http-port and --default-https-port
     
     * docs/wget2.md: Add docs for the two options
     * include/wget/wget.h: Prototype for wget_iri_set_defaultport()
     * libwget/iri.c: New function wget_iri_set_defaultport()
     * src/options.c: New options --default-http-port and --default-https-port
     * src/wget_options.h (struct config): Add default_http_port and default_https_port

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix exit code for TLS connect errors
     
     * libwget/ssl_gnutls.c (_do_handshake): Return WGET_E_CONNECT on connect errors
     * src/wget.c (establish_connection): Set WG_EXIT_STATUS_NETWORK on connect errors

2018-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_https_enforce): Fix wrong casts

2018-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests for --https-enforce
     
     * tests/Makefile.am: Add new tests
     * tests/libtest.c: Code cleanup,
       (_answer_to_connection): implement protocol specific urls,
       (wget_test_start_server): implement WGET_TEST_HTTP(S)_ONLY,
       (wget_test): Allow absolute URLS for WGET_TEST_REQUEST_URL(S)
     * tests/libtest.h (wget_test_url_t): Add https_only and http_only

2018-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix --https-enforce=soft --recursive

2018-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Add http:// to URIs without scheme
     
     * libwget/iri.c (wget_iri_parse): Add http:// to uri without scheme
     * include/wget/wget.h (wget_iri_t): Add member msize
     
     This commit also fixes a buffer overflow in wget_iri_set_scheme in
     combination with wget_iri_clone.

2018-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Simplify code for --https-enforce
     
     * libwget/iri.c (wget_iri_set_scheme): Cleanup
     * src/host.c (host_add_robotstxt_job): Add param http_fallback
     * src/wget_host.h: Likewise
     * src/job.c (job_init): Add param http_fallback
     * src/wget_job.h: Likewise
     * src/wget.c: Remove http_fallback_urls and http_fallback_urls_mutex,
       (add_url_to_queue): Set http_fallback for new jobs,
       (add_url): Likewise

2018-01-18 DalmeGNU <dalmemail@gmail.com>

     Add new option --https-enforce
     
     * docs/wget2.md: Add docs
     * src/options.c: Add --https-enforce and parse_https_enforce()
     * src/wget.c:
     * src/wget_options.h: Add config.https_enforce and WGET_HTTPS_ENFORCE_*

2018-01-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (_wget_tcp_resolve): Handle EAI_ALLDONE

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Save artifacts for the VPATH build

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix testing options
     
     * Makefile.am: Add wget2 executable from builddir
     * contrib/check_options: Use given command line arguments

2018-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Suppress ASAN leak detection in getaddrinfo_a()
     
     * .gitlab-ci.yml: export LSAN_OPTIONS=suppression=...
     * tests/Makefile.am: Add suppression file to TESTS_ENVIRONMENT
     * tests/clang-asan-suppressions: New file with leak suppression
     
     getaddrinfo_a() has leak(s) that we have to suppress when using
     the address sanitizer.

2018-01-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (downloader_thread): Pause on error with --disable-threads

2018-01-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/valgrind-suppressions: Add leaks in glibc's getaddrinfo_a()

2018-01-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Add 10s timeout to wget2 command line

2018-01-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Use persistent ccache and configure cache

2018-01-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: #undef select for _WIN32 build
     
     Reported-by: Gisle Vanem

2018-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/wget_options_fuzzer.dict: Update with new options

2018-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/wget_options_fuzzer.in: Add new corpora

2018-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_regex_type): Return error instead of exit()

2018-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (main): Minor cleanup

2018-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/host.c (host_queue_free): Fix double free with --debug

2018-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --http2-request-window to set max. # of parallel HTTP/2 streams
     
     * docs/wget2.md: Docs for --http2-request-window
     * src/options.c: Add --http2-request-window
     * src/wget_options.h: Remove unused config.http1_request_window

2018-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/release: Fix and add more checks

2018-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix option checking
     
     * Makefile.am: Add contrib/check_options to EXTRA_DIST
     * contrib/check_options: Fix paths

2018-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Add SECTION_PLUGIN and move plugin options into it

2018-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/check_options: Force /bin/bash to have shopt

2018-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Remove WARC and FTP stuff

2018-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2_md2man.sh.in: Remove set -o pipefail (incompatible)

2018-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for plugin options

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --local-db, --input-encoding=encoding

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Amend text for --secure-protocol

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --gnutls-options

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --fsync-policy, --hpkp, --hpkp-file

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --dns-caching, --http2, --metalink

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --cookie-suffixes

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Update link to public_suffix_list.dat

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/check_options: Enable/fix pattern matching for case

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --robots

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Fix syntax of --private-key

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Don't display -n compat option on --help

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Fix --inet*, Add text for --tcp-fastopen

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/check_options: Amend collecting options

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove --config-file in favor of --config
     
     * docs/wget2.md: Amend docs
     * src/options.c: Remove option --config-file

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Fix option syntax

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/check_options: Adjust search patter

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --ocsp, --ocsp-stapling and --ocsp-file

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --tls-session-file and --tls-false-start

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --http-proxy and --https-proxy

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add space before --tries and --output-document

2018-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --check-hostname

2018-01-11 Darshit Shah <darnir@gnu.org>

     * docs/wget2_md2man.sh.in: Add bash error flags to script

2018-01-11 Darshit Shah <darnir@gnu.org>

     * docs/wget2.md: Add documentation for --signature-extension

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Check wget2 options against wget2 manual
     
     * Makefile.am: Call contrib/check_options in 'make check'
     * contrib/check_options: New script to check options

2018-01-10 Neil Locketz <neil@nlocketz.com>

     Delete signature file, and delete files that fail signature validation.
     
     * docs/wget2.md: Added documentation for new '--verify-save-failed'
     * src/gpgme.c: Exposed function to determine base downloaded file from
       signature JOB.
     * src/options.c: Added '--verify-save-failed' to allow users to keep downloaded
       files that fail validation.
     * src/wget.c: Logic for unlinking signatures, and files failing validation.
     * src/wget_gpgme.c: Declaration for new function that determine base downloaded
       files.
     * tests/Makefile.am: Added New test code, fixed missing SOURCES.
     * tests/gpg-test-util.h: Conditionally expect a saved base file if exit
       code == 0, never expect a saved signature file.
     * tests/test-gpg-save-failed.c: A test that tests the '--verify-save-failed'
       flag.
     * tests/test-gpg-style.s: Remove signature file from expected output.
     
     Added flag '--verify-save-failed' to disable the "fail delete" behavior.

2018-01-12 Avinash Sonawane <rootkea@gmail.com>

     * README.md: Add libgpgme to build requirements

2016-11-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Prepare alpha release

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix warnings
     
     * configure.ac: Add -Wno-assign-enum -Wno-unreachable-code to gnulib warnings
     * libwget/thread.c: Add #pragmas to silence warnings from gnulib includes
     * libwget/utils.c: Likewise
     * src/log.c: Likewise
     * src/wget.c: Likewise
     * src/bar.c: Make _terminate_thread static
     * tests/test-gpg-styles.c: Make urls static

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add -Wno-float-conversion to gnulib compilation

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Make strings translatable for error_printf()
     
     * libwget/*.c: Likewise
     * src/*.c: Likewise
     * po/POTFILES.in: Add source files

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove data/ directory
     
     * Makefile.am: Remove data/ from SUBDIRS
     * configure.ac: Remove data/Makefile from AC_CONFIG_FILES
     * tests/Makefile.am: Remove WGET_DATADIR from DEFS
     * unit-tests/Makefile.am: Likewise
     * data/effective_tld_names.dat: Move to unit-tests/files/public_suffix_list.dat
       and update from upstream
     * unit-tests/test.c (test_cookies): Use public_suffix_list.dat

2018-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2.md: Add text for --xattr

2018-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Add man pages to tarball

2018-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix building docs
     
     * Makefile.am: Add README.md to EXTRA_DIST
     * configure.ac: Generate conditionals WITH_DOXYGEN and WITH_PANDOC
     * docs/Makefile.am: Use conditionals for building

2018-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for pandoc in ./configure
     
     * configure.ac: Check for pandoc
     * docs/Makefile.am: Use $(PANDOC)
     * docs/wget2_md2man.sh.in: Use $PANDOC shell variable

2018-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate .texi and .info from markdown manual
     
     * Makefile.am: Convert .md to .texi and .info
     * mainpage.md: Rename wget2_manual.md to wget2.md
     * wget2_manual.md: Renamed to wget2.md

2018-01-09 Darshit Shah <darnir@gnu.org>

     Add a space after section header string in md manual

2018-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate wget2 man page
     
     * .gitignore: Add auto-generated docs/wget2_md2man
     * README.md: Add pandoc
     * configure.ac: Generate docs/wget2_md2man
     * docs/Makefile.am: Build wget2.1
     * docs/wget2_manual.md: Fix things for a better man page experience
     * docs/wget2_md2man.sh.in: Template file for docs/wget2_md2man

2018-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Add src/stats.c

2018-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix calls to info_printf() for translation
     
     * src/stats.c: Add _() around static text
     * src/wget.c: Likewise

2018-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: 'make' before 'make distcheck' in VPATH build

2018-01-09 Neil Locketz <neil@nlocketz.com>

     GPG signature information now presented in --site-stats
     
     * src/stats.c: Site stats output contains relevant GPG signature information
     * stc/wget.c: Now exits with just a generic GPG error if any sigs fail validation.
     More information presented in --site-stats output.
     * src/wget_host.h: Added signature information to DOC struct.
     * src/wget_options.h: Removed old exit codes in favor of single GPG error exit code.
     * tests/Makefile.am: Added test-gpg-bad to Makefile
     * tests/gpg/helloworld.txt.bad.sig: A corrupted signature (I just deleted a byte somewhere)
     * tests/test-gpg-bad.c: A test for a bad (corrupted) signature.
     * tests/test-gpg-invalid.c: Changed exit code to the single GPG error exit code.

2017-12-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Use hashmap instead of vector for DNS caching
     
     * libwget/dns_cache.c: Likewise

2017-12-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Refactor DNS chaching code out of net.c
     
     * include/wget/wget.h: Add missing wget_dns_cache declarations
     * libwget/Makefile.am: Add dns_cache.c
     * libwget/dns_cache.c: New file
     * libwget/net.c: Remove DNS chaching code

2018-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix MinGW compilation without threads
     
     * .gitlab-ci.yml: Test without multi-threading
     * pthread_sigmask.c.mingw: New file with patch for MinGW
     
     Wine/MinGW seems to have a multi-threadign issue (sometimes hangs).
     Disabling threads using ./configure --disable-threads needs a change in
     gnulib. It has been reported, but not worked on currently.
     So we provide our own solution.

2018-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2018-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_print_info): Amend printed error messages

2018-01-04 Darshit Shah <darnir@gnu.org>

     Eliminate redundant variable config.head_progress

2018-01-04 Darshit Shah <darnir@gnu.org>

     Unify functions to print progress stats and progress_head stats

2018-01-04 Darshit Shah <darnir@gnu.org>

     * libwget/iri.c: Don't percent encode the query portion of a IRI

2018-01-02 Darshit Shah <darnir@gnu.org>

     Add support to change the GPG signature file extension
     
     * src/wget_options.h: Define a new option, --signature-extension
     * src/options.c: Guard the SECTION_GPG in help_section_t with ifdef's.
       Set new option as a string and give it a default value
     * src/wget.c(process_response): Use the value in config.sig_ext to
       decide the extension of the signature file
     * tests/Makefile.am: Add new tests to Makefile
     * tests/test-gpg-styles.c: New test file

2018-01-02 Darshit Shah <darnir@gnu.org>

     * src/options.c: Put GPG options in their own help section

2018-01-04 Darshit Shah <darnir@gnu.org>

     * src/wget.c: Gracefully disable progress when built without threads

2018-01-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix build to work without multi-threading
     
     * libwget/thread.c: Fix wget_thread_start() and wget_thread_join()
     * src/wget.c: Fix typo
     * tests/libtest.c: Don't skip tests when multi-threading is disabled

2018-01-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --without-plugin-support build
     
     * configure.ac: Check for dlsym and introduce $FUZZ_LIBS
     * fuzz/Makefile.am: Use $FUZZ_LIBS instead of $LIBS

2018-01-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Do not build/run GPG tests if gpgme isn't installed

2018-01-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add test for --filter-mime-type
     
     * tests/Makefile.am: Add test--filter-mime-type
     * tests/test--filter-mime-type.c: New test

2017-12-30 DalmeGNU <dalmemail@gmail.com>

     Add --filter-mime-type option
     
     * src/wget.c: Add mime type check before downloading a file
     * src/options.c: Add --filter-mime-type option
     * src/wget_options.h: Add mime_types to the config structure
     * docs/wget2_manual.md: Add documentation related to the new option

2018-01-01 Darshit Shah <darnir@gnu.org>

     Cleaner error messages for GPG Verification
     
     * src/wget.c(process_response): Remove some info_printf statements. They
     are printed from gpgme now
     * src/gpgme.c: Pass the filename of the signature file (if any) ad use
     it to print an error message to the screen. This prevents the double
     error messages that were printed and works well with the progress bar

2017-12-25 Neil Locketz <neil@nlocketz.com>

     Fixed problems pointed out in MR. Added tests and doxygen documentation.
     
     * bootstrap.conf: Add canonicalize module.
     * cfg.mk: Added exclusions to no new line at EOF for binary files used in tests.
     * configure.ac: Check for libgpgme
     * docs/wget2_manual.md: Added manual entries for --verify-sig, --gnupg-homedir, and new exit codes.
     * fuzz/Makefile.am: Amend linker options
     * include/wget/wget.h: Add error codes for GPG signature verification.
     * po/POTFILES.in: Add new files.
     * src/Makefile.am: Add src/gpgme.c and src/wget_gpgme.h
     * src/gpgme.c: Using new error codes, and better signature verification failure detection.
     * src/job.c (job_free): Free sig_filename
     * src/options.c: Add new options --gnupg-homedir and --verify-sig
     * src/wget.c: Verify the signature if possible, exit with the proper status code,
       print error messages
     * src/wget_gpgme.h: Add documentation.
     * src/wget_job.h: Extend struct JOB
     * src/wget_options.h: Add new status codes, add new members to struct config
     * tests/Makefile.am: Added new tests.
     * tests/gpg-test-util.h: Common GPG testing functionality (tries to verify a signature, expects exit code ... etc).
     * tests/gpg/helloworld.txt: Text that has been signed in the .sig files.
     * tests/gpg/helloworld.txt.{invalid,no-pub,missing,trusted}.sig: Signatures on helloworld.txt with properties described by their names.
     * tests/gpg/openpgp-revocs.d/*: Revocation certs for the fake "homedir"
     * tests/gpg/private-keys-v1.d/*: The not-so-private private keys used to sign the test file.
     * tests/gpg/pubring.kbx: Fake gnupg homedir public key ring.
     * tests/gpg/test-gpg-*.c: Tests.
     * tests/valgrind-supressions: Supress failures due to oddness with GPGME.
     * unit-tests/Makefile.am: Add src/gpgme.o to BASE_OBJS

2018-01-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: Exclude *gnulib/*.c from sc_copyright_check

2018-01-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Fix typos (make syntax-check)

2017-12-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove unused function wget_vector_deinit()
     
     * include/wget/wget.h: Likewise
     * libwget/vector.c: Likewise

2017-12-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c (_free_tree_docs_entry): Use wget_vector_free()

2017-12-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for thread functions
     
     * docs/Makefile.am: Add man page
     * libwget/thread.c: Add documentation

2017-12-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Extend list of dependencies

2017-12-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/main.c: Fix path separator on MinGW

2017-12-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "* .gitlab-ci.yml: Remove MinGW CI runner"
     
     This reverts commit 89166a38d428ccb02eb263394130dd4acada2b51.
     
     At least on Debian unstable the MinGW build works stable now.
     This might be due to the latest fixes in the threading area.

2017-12-30 DalmeGNU <dalmemail@gmail.com>

     * docs/wget2_manual.md: Remove duplicate documentation on the --report-speed option and change it a bit
2017-12-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c (wget_bar_set_slots): Fix memleak when adding more slots

2017-12-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (main): Fix read overflow on progress+spider without TTY

2017-12-23 DalmeGNU <dalmemail@gmail.com>

     Fix the filename encoding for the progress bar in spider mode
     
     * src/wget.c: Use functions from wget2 to get the filename,
       refactor get_local_filename(). Shorten the progress info
       line
     * src/wget_main.h: Use const for get_local_filename() param

2017-12-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Suppress -Wundef warnings in gnulib includes

2017-12-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Avoid copying initialized glthread structures
     
     * libwget/thread.c: Use malloc+init instead init+memdup
     
     Memdup'ing the glthread structures broke internal pointers,
     at least on Windows.
     
     Reported-by: Gisle Vanem

2017-12-23 DalmeGNU <dalmemail@gmail.com>

     Print progress info related to headers when spider+progress are set
     
     * src/options.c: Set config.head_progress if spider+progress are set
     * src/wget.c: New function print_head_progress_report(),
       new function get_filename()
     * src/wget_options.h: New var config.head_progress

2017-12-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/bar.c: Let progress thread stop
     
     Glthreads don't have a cancel or kill function, so we use
     a global termination flag.

2017-12-10 DalmeGNU <dalmemail@gmail.com>

     Improve progress speed display
     
     * include/wget/wget.h: Use enum for WGET_REPORT_SPEED_*
     * libwget/bar.c: Add ringbuffer for smoother speed calculations
     * src/wget.c (main): Replace call to print_progress_report() by
       call to bar_printf()

2017-12-20 Darshit Shah <darnir@gnu.org>

     libwget/bar.c: Ensure all progress bars have the same size

2017-12-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Add test for multi-threading
     
     * unit-tests/Makefile.am: Add test-cond
     * unit-tests/test-cond.c: New test

2017-12-17 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/build_fuzzers: Print out a small info

2017-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Thread abstraction via gnulib thread wrapper (glthread)
     
     * bootstrap.conf: Add modules cond, lock and thread,
       remove module pthread
     * include/wget/wget.h: Remove pthread code,
       add new wget_thread_* functions,
       amend params of wget_thread_* functions,
       add init and exit functions for mutex initialization
     * */*.[ch]: Amend threading to new API
     
     This change let libwget work with different kinds of
     threading libraries incl. pthreads and windows threads.

2017-12-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Reduce warnings from gnulib code

2017-12-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix some more URLs from http:// to https://
     
     * .travis.sh: Likewise
     * .travis_setup.sh: Likewise
     * COPYING: Likewise
     * COPYING.LESSER: Likewise
     * bootstrap: Likewise
     * include/wget/wget.h: Likewise
     * include/wget/wgetver.h.in: Likewise
     * libwget/atom_url.c: Likewise
     * libwget/iri.c: Likewise

2017-12-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix race condition(s) in downloader logic
     
     * src/host.c: Use new flag job.done,
       add more documentation,
       protect some debugging lines with hosts_mutex
     * src/wget.c: Use job.done instead of job.inuse
     * src/wget_host.h: Use void return for host_add_job()
       and host_add_robotstxt_job()
     * src/wget_job.h (struct JOB): Add job.done
     
     The job.inuse flag has been used for two purposes. This
     resulted in sporadic conflicts between threads. While one was
     destroying a job structure another got this structure from the
     job queue. Best reproducible with '-r --spider' combination.

2017-12-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix deadlock in host_remove_job()
     
     * src/host.c (_host_remove_job): New function fixes deadlock
     
     Fixes #314

2017-12-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*_fuzzer.in/*: Update fuzzer corpora

2017-12-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/build_fuzzers: Add new helper script to build fuzzers

2017-12-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/get_ossfuzz_corpora: Fix script to handle many corpora

2017-12-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix clang warning about 64/32 conversion

2017-12-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Fix clang warning about 64/32 conversion

2017-12-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2017-11-30 DalmeGNU <dalmemail@gmail.com>

     Implement speed reporting in the progress bar and the --report-speed switch
     
     * docs/wget2_manual.md: Add documentation for the --report-speed switch
     * include/wget/wget.h: Define the report speed types, add reference to wget_bar_set_speed_type()
     * libwget/bar.c: Modify the wget2 progress bar to print speed information
     * src/bar.c: Add code to set the type of speed reporting
     * src/options.c: Add the --report-speed switch and a function to parse the legal types
     * src/wget_options.h: Add 'report_speed' in the config structure
     * src/wget.c: Print speed reports at the end of a download thread

2017-12-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix several issues foudn by cppcheck
     
     * libwget/bar.c (_wget_bar_st): Remove unused member screen_width
     * libwget/css.c: Reduce scope of variables
     * libwget/encoding.c: Likewise
     * libwget/hpkp.c: Likewise
     * libwget/http.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/net.c: Likewise
     * libwget/sitemap_url.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/vector.c: Likewise
     * src/dl.c: Likewise

2017-12-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add VPATH build

2017-12-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Use BUILDDIR for popen() in test suite
     
     * tests/Makefile.am: Set BUILDDIR
     * tests/libtest.c: Use BUILDDIR for executable path

2017-12-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Update link libraries in Makefiles
     
     * fuzz/Makefile.am: Update link libraries and remove redundant code
     * libwget/Makefile.am: Likewise
     * src/Makefile.am: Likewise
     * tests/Makefile.am: Likewise
     * unit-tests/Makefile.am: Likewise

2017-12-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Add lib/regcomp.c

2017-12-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Fix -Wundef warning on Win32

2017-12-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Include getpass.h

2017-12-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Add modules pipe-posix, regex
     
     # Conflicts:
     #	bootstrap.conf

2017-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Use new Fedora27 CI image

2017-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c: Silence doxygen

2017-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c: Add missing documentation

2017-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c: Use doxygen 'ingroup' instead of 'defgroup'

2017-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Fix end of doxygen file

2017-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix some doxygen issues
     
     * libwget/hash_printf.c: Fix name of param
     * libwget/hpkp.c: Document missing param,
       (wget_hpkp_db_add): Rename param
     * libwget/ssl_gnutls.c: Fix \ref syntax warnings
     * libwget/strscpy.c: Fix param usage in docs

2017-08-19 Ander Juaristi <a@juaristi.eus>

     doxygen: Document SSL/TLS engine

2017-11-30 DalmeGNU <dalmemail@gmail.com>

     * docs/wget2_manual.md: Add documentation for --max-threads and --chunk-size switches

2017-11-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add make distcheck

2017-11-29 Dan <dalmemail@amaya.tk>

     * src/options.c: Prevert --max-threads & --chunk-size flags combination

2017-11-28 DalmeGNU <dalmemail@gmail.com>

     * src/options.c: Don't allow wget2 to show any password dialogs if there are no URL arguments

2017-11-28 Akash Rawal <argmlac@gmail.com>

     * unit-tests/Makefile.am: Make libwget usable in dummy libraries

2017-11-24 Akash Rawal <argmlac@gmail.com>

     Fix 'make distcheck' for VPATH build
     
     * fuzz/Makefile.am: Use $(srcdir) to find files
     * tests/Makefile.am: Add stats-test-util.h to *_SOURCES where needed

2017-11-24 Akash Rawal <argmlac@gmail.com>

     * .travis.yml: Fix travis-ci build

2017-11-28 DalmeGNU <dalmemail@gmail.com>

     * src/wget.c: Let the user know if file is completely retrieved after a 416 HTTP error

2017-11-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/wget_options_fuzzer.c: Fix for C++ building

2017-11-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Fix building for oss-fuzz

2017-11-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add testmode to avoid interactive functions when testing
     
     * fuzz/Makefile.am: Link options fuzzer with testing.o
     * fuzz/wget_options_fuzzer.c: Set test mode
     * src/Makefile.am: Add testing.c and wget_testing.h
     * src/options.c (prompt_for_password, run_use_askpass):
       Check for testing mode
     * src/testing.c: New file
     * src/wget_testing.h: New file
     * unit-tests/Makefile.am: Link with testing.o

2017-11-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hsts.c: Check some function arguments against NULL

2017-11-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test--accept.c: Fix new tests for Windows
     
     Reported-by: Gisle Vanem

2017-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Fix reading passwords for fuzzing

2017-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix resource leaks
     
     * src/options.c (prompt_for_password): Fix indentation,
       (run_use_askpass): Add file actions to close pipe fds in child,
       (init): Free config.password before calling prompt_for_password(),
       (deinit): Free config.use_askpass_bin

2017-11-14 Avinash Sonawane <rootkea@gmail.com>

     Fix warnings
     
     * src/wget.c : Declare 'nthreads' as static variable
     * src/wget.c (regex_match_pcre): explicit typecast to PCRE2_SPTR

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-stats-tls.c: Remove superfluous include

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/stats-test-util.h: Fix free() on arbitrary stack content

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (run_use_askpass): Remove warning

2017-11-13 Neil Locketz <neil@nlocketz.com>

     Hosts gathered from metalinks are added to hosts hashmap
     
     * src/wget.c: Add metalink mirrors to hosts hashmap

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix check for WITH_LIBPCRE

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (run_use_askpass): Use const for 'question'

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (init): Fix memleak (harmless)

2017-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add lzip to list of prerequisites

2017-11-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Cleanups, prevent resource leaks in --use-askpass

2017-11-11 DalmeGNU <dalmemail@gmail.com>

     Disable TLS Session Resumption by default
     
     * src/options.c: Set config.tls_resume to false/zero by default
     
     * docs/wget2_manual.md: Add docs for --tls-resume

2017-11-06 DalmeGNU <dalmemail@gmail.com>

     Implementation of --use-askpass switch
     
     * bootstrap.conf: Add 'posix_spawn' and 'spawn-pipe' gnulib modules
     * docs/wget2_manual.md: Add docs for --use-askpass
     * src/options.c: Add implementation of --use-askpass
     * src/wget_options.h (struct config): Add 'use_askpass_bin' member

2017-11-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap.conf: Add more prerequisites

2017-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: More documentation added

2017-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Add Cache-Control: no-cache if --no-cache is given

2017-11-06 Neil Locketz <neil@nlocketz.com>

     Response Time Site Statistic
     
     * include/wget/wget.h: first_data_back field added to represent the time of first bytes received back.
     * libwget/http.c: Assigning first_data_back at the appropriate time.
     * stc/wget_host.h: Added response_time field to DOC, holds response time for document.
     * src/stats.c: Logic to calculate response_time for DOCs, and stat printing.

2017-11-06 Neil Locketz <neil@nlocketz.com>

     Transfer time site statistic
     
     * include/wget/wget.h: Added request_start, and response_end to wget_http_request_t, and wget_http_response_t respectively.
     * libwget/http.c: New fields initialized/set with their corresponding values at the right time.
     * stc/wget_host.h: Added timestamps to DOC for request timeframes.
     * src/stats.c: Logic to calculate request_start and response_end for DOCs. Stats writing.

2017-11-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Skip DNS resolve for bind address for fuzz/ tests

2017-11-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (add_statistics): Count status 303, 307, 308 as redirects

2017-11-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_get_response_cb): Improve gzip workaround

2017-10-31 DalmeGNU <dalmemail@gmail.com>

     Implement --ask-password switch to enable a password prompt
     
     * bootstrap.conf: Add 'getpass' gnulib module
     * docs/wget2_manual.md: Amend docs for --ask-password
     * src/options.c: Add implementation of --ask-password
     * src/wget_options.h (struct config): Add 'password' member

2017-11-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Add some struct member documentation

2017-11-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix out-of-memory issue in option parsing
     
     * src/options.c (parse_stringlist_expand): Limit number
       entries in vector table.
     
     And endless loop situation when reading config files lead
     to an out-of-memory situation.
     
     Found by oss-fuzz (issue 4015).
     Bug existed since a long time.

2017-11-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/wget_options_fuzzer.in: Update fuzzer corpora

2017-11-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Let plugin_db_load_from_envvar() return error
     
     * src/options.c (init): Return error if plugin_db_load_from_envvar() fails
     * src/plugin.c (plugin_db_load_from_envvar): Return error instead of void
     * src/wget_plugin.h (plugin_db_load_from_envvar): Likewise

2017-10-23 Neil Locketz <neil@nlocketz.com>

     Split up plugin tests into several files
     
     * tests/Makefile.am: Add new files
     * tests/test-plugin-failure.c: New file with tests based on invalid input
     * tests/test-plugin-interception.c: New file for testing the various things
       plugins can intercept
     * tests/test-plugin-nonexistance.c: New file for tests with plugins that don't exist)
     * tests/test-plugin.c: Moved tests to the above new files

2017-10-23 Neil Locketz <neil@nlocketz.com>

     Split individual stats tests into their own files
     
     * tests/Makefile.am: Add new files
     * tests/stats-test-util.h: New file
     * tests/test-stats-all.c: New file
     * tests/test-stats-dns.c: DNS stats tests
     * tests/test-stats-ocsp.c: OCSP stats tests
     * tests/test-stats-server.c: Server stats tests
     * tests/test-stats-site.c: Site stats tests
     * tests/test-stats-tls.c: TLS stats tests

2017-11-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix memory leak in wget2
     
     * src/options.c (init): Free config.logfile before assignment
     
     Found by oss-fuzz (issue 3963).
     Bug existed since a long time.
     Bug is not relevant except for testing.

2017-10-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix buffer overflow in option parser
     
     * src/options.c (_parse_option): Add end-of-string check
     
     Found by oss-fuzz (issue 3950).
     Bug existed since a long time.

2017-10-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add support for RFC 7616 HTTP Digest Access Authentication
     
     * docs/Makefile.am: Remove libwget-md5.3
     * include/wget/wget.h: Remove wget_md5_printf_hex(),
       add wget_hash_printf_hex()
     * libwget/Makefile.am: Rename md5.c to hash_printf.c
     * libwget/hash_printf.c: New file with wget_hash_printf_hex()
     * libwget/http.c (wget_http_add_credentials): Remove hardcoded MD5 algo
     * tests/test-metalink.c: Use wget_hash_printf_hex()
     
     RFC 7616 adds/replaces the MD5 digest algorithm with SHA-256.

2017-04-13 Michael Heerklotz <michael.heerklotz@check24.de>

     Added new setting --filter-urls
     
     * docs/wget2_manual.md: Added doc for new setting
     * src/options.c: Added new setting
     * src/wget.c: Added code for new setting.
     * src/wget_options.h: Added new setting
     
     This commit hasn't been copyright-assigned to the FSF.

2017-04-13 Michael Heerklotz <michael.heerklotz@check24.de>

     Added regex filters (--accept-regex, --reject-regex, --regex-type)
     
     * configure.ac: Added detection of libpcre and libpcre2
     * include/wget/wget.h: Added regex_type defines
     * src/options.c: Added the new options
     * src/wget.c: Added regex code
     * src/wget_options.h: Added the new options
     * tests/test--accept.c: Added tests for the new options
     
     This commit hasn't been copyright-assigned to the FSF.

2017-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Fixes for oss-fuzz
     
     * fuzz/Makefile.am: Extend oss-fuzz make script
     * fuzz/wget_options_fuzzer.c: Do not opendir() in init()
     * src/wget_options.h: Tell C++ that functions are C
     * src/wget_plugin.h: Likewise

2017-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Add wget_options_fuzzer
     
     * Makefile.am: Fix make target 'fuzz-coverage'
     * configure.ac: Enable building static library by default,
       add option --enable-fuzzing
     * fuzz/Makefile.am: Add wget_options_fuzzer,
       check for FUZZING (set with --enable-fuzzing)
     * fuzz/README.md: Amend the text
     * fuzz/main.c: Use printf() instead of wget_info_printf()
     * fuzz/run-clang.sh: Use fuzzer binaries built by 'make'
     * fuzz/wget_options_fuzzer.c: New fuzzer
     * fuzz/wget_options_fuzzer.dict: New fuzzer dictionary
     * fuzz/wget_options_fuzzer.in/*: Initial fuzz corpora
     * libwget/net.c: Skip IP address resolution when fuzzing
     * src/log.c: Don't create files when fuzzing,
       don't print to console when fuzzing
     * src/options.c: Add set_exit_status() and get_exit_status(),
       don't print --help / --version to console when fuzzing,
       do not call exit() - return error instead,
       fix recursion level in _read_config(),
       don't create files when fuzzing,
       fix memory leaks in deinit()
     * src/stats.c: Don't create files when fuzzing
     * src/wget.c: Remove set_exit_status()
     * src/wget_main.h: Remove exit_status_t
     * src/wget_options.h: Add exit_status_t
     * tests/test-plugin.c: Fix expected exit codes from 1 to 2
     
     This is for application fuzzing (namely code from src/).
     The code in src/ had to be prepared in certain ways, but it
     doesn't add significant overhead, even makes the code cleaner
     in some ways. Several of these changes have already been committed
     into the master branch.

2017-10-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename WGET_HTML_PARSED_RESULT to wget_html_parsed_result_t
     
     * examples/check_url_types.c: Likewise
     * examples/print_html_urls.c: Likewise
     * fuzz/libwget_html_url_fuzzer.c: Likewise
     * include/wget/wget.h: Likewise
     * libwget/html_url.c: Likewise
     * src/wget.c: Likewise

2017-10-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename WGET_HTML_PARSED_URL to wget_html_parsed_url_t
     
     * examples/check_url_types.c: Likewise
     * examples/print_html_urls.c: Likewise
     * include/wget/wget.h: Likewise
     * libwget/html_url.c: Likewise
     * src/wget.c: Likewise

2017-10-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename WGET_PARSED_URL to wget_css_parsed_url_t
     
     * examples/print_css_urls3.c: Likewise
     * include/wget/wget.h: Likewise
     * libwget/css_url.c: Likewise

2017-10-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename ROBOTS to wget_robots_t
     
     * fuzz/libwget_robots_parse_fuzzer.c: Rename ROBOTS to wget_robots_t
     * include/wget/wget.h: Likewise
     * libwget/robots.c: Likewise
     * src/wget_host.h: Likewise
     * unit-tests/test.c: Likewise

2017-10-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace ROBOTS_PATH by wget_string_t
     
     * include/wget/wget.h: Remove struct ROBOTS_PATH
     * libwget/robots.c: Replace ROBOTS_PATH by wget_string_t
     * src/host.c: Likewise
     * src/wget.c: Likewise
     * unit-tests/test.c: Likewise

2017-10-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (_read_config): Fix buffer underflow

2017-10-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update for glob() buffer overflows

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_timeout): Fix two integer overflows

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_numbytes): Fix integer overflow

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup dl_error* functions
     
     * src/dl.c: Deduplicate code, use const where needed
     * src/wget_dl.h: Use const attribute for dl_error_t.msg

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_plugin.h: Include needed header files

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (get_home_dir): Allow free'ing 'home' outside the function

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (_read_config): Add errno and strerror to error message

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * unit-tests/test-dl.c: Fix memory leak

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (wget_tcp_set_bind_address): Fix allocation policy flag

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (_wget_tcp_resolve): Fix read of uninitialized stack memory

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (_parse_no_proxies): Remove wrong destructor from vector 'proxies'

2017-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2017-10-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Fine-tune help output

2017-10-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add wget_strscpy()
     
     * include/wget/wget.h: Add wget_strscpy()
     * libwget/strscpy.c: New file
     * libwget/Makefile.am: Add strscpy.c
     * libwget/html_url.c: Use wget_strscpy() instead of wget_strlcpy()
     * libwget/http.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/metalink.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/test_linking.c: Likewise
     * src/job.c: Likewise
     * src/plugin.c: Likewise
     * src/wget.c: Likewise

2017-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use MHD_free in test suite if available
     
     * configure.ac: Check for MHD_free(),
       fallback to AC_SEARCH_LIBS if pkg-config not available
     * tests/libtest.c: Call MHD_free() where appropriate,
       small cleanups

2017-10-10 Avinash Sonawane <rootkea@gmail.com>

     * .gitlab-ci/yml: Add scan-build for fuzz/*, tests/* and unit-tests/*

2017-10-10 Avinash Sonawane <rootkea@gmail.com>

     * .gitlab-ci.yml: Generate flawfinder report

2017-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup test library
     
     * tests/libtest.c (_http_server_start): Use wget_error_printf instead of printf,
       simplify some code,
       gettextize some printf strings,
       (wget_test): generate WIN32 command line

2017-10-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix usage of wget_global_init() and wget_http_get()
     
     * examples/*.c: Use 0 instead of NULL as terminating param
     * fuzz/main.c: Likewise
     * include/wget/wget.h: Remove G_GNUC_WGET_NULL_TERMINATED from
       wget_global_init() and wget_http_get().

2017-10-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Fix free'ing of certain variables

2017-10-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix usage of G_GNUC_WGET_NONNULL for clang-cl (Windows)

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_local_db): Let --local-db be a master switch

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --no-local-db to test suite
     
     * tests/libtest.c: Add --no-local-db to wget2 options
     * tests/test-plugin.c: Fix test

2017-09-27 Dan <dalmemail@amaya.tk>

     Implement '--local-db' option
     
     * src/options.c: New function parse_local_db(),
       new option '--local-db',
       (init): Check for config settings
     * src/wget_options.h (struct config): Add local_db

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Fix scan-build

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (wget_iri_relative_to_abs): Fix null pointer dereference

2017-09-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Implement --dns-timeout using getaddrinfo_a()
     
     * configure.ac: Check for getaddrinfo_a() in libanl
     * libwget/net.c: Implement _wget_tcp_resolve() with timeout
     
     Currently, there seems to be memory leak in getaddrinfo_a().
     Needs investigation and a bug report.

2017-10-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Generate scan-build report (clang static analyzer)

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (send_ocsp_request): Fix null ptr dereference

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_bar.h: Remove unneeded G_GNUC_WGET_NONNULL_ALL from bar_slot_begin()

2017-10-07 Avinash Sonawane <rootkea@gmail.com>

     Use snprintf() instead of sprintf()
     
     * tests/libtest.c: Likewise
     * unit-tests/test.c: Likewise

2017-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget_xattr.h: Move #include into guarded area

2017-10-05 Avinash Sonawane <rootkea@gmail.com>

     Fix issues reported by clang static analyzer
     
     * unit-tests/test-dl-dummy.c: use wget_strlcpy() intead of strcpy()
     * src/plugin.c: Likewise
     * tests/libtest.c: Get rid of strcpy()
     * unit-tests/test.c: Fix out-of-bound array access

2017-10-05 Avinash Sonawane <rootkea@gmail.com>

     Reduce variable scope
     
     * examples/print_html_urls.c: Likewise
     * fuzz/libwget_cookie_fuzzer.c: Likewise
     * fuzz/main.c: Likewise
     * tests/libtest.c: Likewise
     * unit-tests/test.c: Likewise
     
     Found by: cppcheck

2017-10-07 Avinash Sonawane <rootkea@gmail.com>

     Remove dead assignments
     
     * libwget/http.c: Likewise
     * libwget/net.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * src/wget.c: Likewise
     
     Found by: Clang static analyzer (scan-build)

2017-10-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-plugin.c: Fix check for skipping the test

2017-09-28 Josef Moellers <jmoellers@suse.de>

     Terminate http request on response status code 416.
     
     * libwget/http.c (wget_http_get_response_cb): Stop download on
       status code 416, cleanup using HTTP status defines.
     * libwget/http.h: Add HTTP status defines from Wget1.x
     
     HTTP status response 416 Requested Range Not Satisfiable.
     This sometimes happens when a server responds incorrectly to a range request.
     There is not enough information available (Range of the request) to properly
     handle this case. If it were, the case that the file has already been
     completely downloaded could be detected and an appropriate message could be
     generated. I also took the liberty to port the status codes from the old wget
     source to libwget/http.h to make the code more readable.

2017-10-05 Avinash Sonawane <rootkea@gmail.com>

     Reduce scope of variables
     
     * libwget/bar.c: Likewise
     * libwget/console.c: Likewise
     * libwget/encoding.c: Likewise
     * libwget/hashmap.c: Likewise
     * libwget/io.c: Likewise
     * libwget/md5.c: Likewise
     * libwget/netrc.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * libwget/xml.c: Likewise
     * src/job.c: Likewise
     * src/plugin.c: Likewise
     * libwget/hashfile.c: Include local private.h
     * src/host.c: Remove unused find_free_job_context struct
     
     Found by: cppcheck

2017-10-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove testing for MHD in test suite
     
     * tests/libtest.c: Likewise
     * tests/libtest.h: Likewise
     
     Reported-by: Gisle Vanem

2017-10-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*.in: Update fuzzer corpora

2017-10-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*: Fix clang-5.0 to clang-6.0

2017-10-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Skip plugin tests if shared build is disabled
     
     The use of -shared in the LDFLAGS for the plugins does not work
     with './configure --disable-shared'. Instead of failing the build
     this patch SKIPs the plugin tests.

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/main.c: Remove libtool prefix 'lt-' from directory names

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove -static from AM_LDFLAGS in test directories
     
     * fuzz/Makefile.am: Remove -static from AM_LDFLAGS
     * tests/Makefile.am: Likewise
     * unit-tests/Makefile.am: Likewise
     
     'make check' didn't work on CygWin with these settings.
     Also, GnuTLS removed these a short time ago from the fuzz/
     directory since there were build issues.

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Cleanup

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Set values for enum actions

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add libiconv to dependencies

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Extend plugin loading for CygWIN
     
     * src/dl.c: Add PATTERN for CygWin
     * tests/test-plugin.c: Define LOCAL_NAME for CygWin
     * unit-tests/test-dl.c: Define BUILD_NAME and LOCAL_NAME for CygWin

2017-10-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Make fuzzers survive on CygWin
     
     * fuzz/libwget_hpkp_fuzzer.c: Check for RTLD_NEXT
     * fuzz/libwget_hsts_fuzzer.c: Likewise
     * fuzz/libwget_netrc_fuzzer.c: Likewise
     * fuzz/libwget_ocsp_fuzzer.c: Likewise
     * fuzz/libwget_tlssess_fuzzer.c: Likewise
     
     On CygWin RTLD_NEXT doesn't exist, so we can't overwrite/preload fopen().

2017-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Flush stderr after each write

2017-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove MinGW CI runner
     
     Due to several instabilities / hangs we temporarily remove
     the MinGW CI runner. One problem is the buggy behavior of
     MinGW pthread_cond_broadcast() that doesn't wake up every thread.
     As a result Wget2 sometimes hangs and so does the test suite.

2017-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     .gitlab-ci.yml: grep posix version of libgcc_s_seh-1.dll

2017-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove --enable-static configure flag from MinGW build

2017-09-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Fix WINEPATH

2017-09-22 Avinash Sonawane <rootkea@gmail.com>

     * tests/libtest.c (_http_server_start): Remove explicit type conversion
2017-09-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/netrc.c (wget_netrc_db_load): Use wget_strncasecmp_ascii()

2017-09-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Add GNU extensions to .netrc parsing
     
     * include/wget/wget.h (wget_netrc_t): Add port and force
     * libwget/netrc.c (wget_netrc_db_load): Parse port and force

2017-09-22 DalmeGNU <dalmemail@gmail.com>

     Replace error_printf() with debug_printf() in order to solve #254
2017-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Test MinGW with -j1

2017-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Use type bool instead of char
     
     * include/wget/wget.h: Use type bool instead of char
     * libwget/bar.c: Likewise
     * libwget/base64.c: Likewise
     * libwget/cookie.c: Likewise
     * libwget/encoding.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/http.h: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/ip.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/logger.c: Likewise
     * libwget/net.h: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/tls_session.c: Likewise
     * libwget/vector.c: Likewise
     * src/plugin.c: Likewise
     * src/wget_host.h: Likewise
     * src/wget_job.h: Likewise
     * src/wget_plugin.h: Likewise
     * tests/test-plugin-dummy.c: Likewise

2017-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix HPKP checking
     
     * libwget/ssl_gnutls.c (_verify_certificate_callback): PIN check the
       whole cert chain.
     
     We used only cert #0 for HPKP checking. This broke connectivity
     to github.com.
     Now checking the whole cert chain.
     
     Fixes #293

2017-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Do not call pthread functions with NULL thread value

2017-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix HTTPS functionality on _WIN32
     
     * libwget/ssl_gnutls.c: Add _win32_send() and _win32_recv(),
       set those functions as push and pull functions on _WIN32.
     
     Sets the GnuTLS pull and push functions to make gnulib sockets work.
     Tested only on MinGW64.

2017-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove obsolete server code from library and test suite
     
     * include/wget/wget.h: Remove wget_tcp_listen(), wget_tcp_accept(),
       wget_ssl_server_init(), wget_ssl_server_deinit(), wget_ssl_server_open(),
       wget_ssl_server_close().
     * libwget/net.c: Remove wget_tcp_listen(), wget_tcp_accept(),
       remove tcp->passive,
       amend wget_tcp_tls_start() and wget_tcp_tls_stop().
     * libwget/net.h: Remove tcp->passive.
     * libwget/ssl_gnutls.c: Remove server variables, wget_ssl_server_init(),
       wget_ssl_server_deinit(), wget_ssl_server_open(), wget_ssl_server_close().
     * tests/libtest.c: Remove FTP(S) code and obsolete test server code.
     * tests/libtest.h: Remove FTP flags, structures, functions.

2017-09-08 Avinash Sonawane <rootkea@gmail.com>

     * doc/wget2_manual.md: Add docs for --stats-* options

2017-09-17 Avinash Sonawane <rootkea@gmail.com>

     Fix --stats-* for chunked download
     
     * src/stats.c (stats_docs_add): For chunked download add chunk sizes to print total size
     * src/stats.c (stats_tree_docs_add): Point to doc with non-HEAD method in case of collision

2017-09-15 Avinash Sonawane <rootkea@gmail.com>

     Add tests for --stats-*=format:file
     
     * tests/test-stats.c: test --stats-site=tree:file
     * tests/test-stats.c: test --stats-all=csv:file

2017-09-15 Avinash Sonawane <rootkea@gmail.com>

     * src/stats.c: Refactor stats code

2017-09-14 Avinash Sonawane <rootkea@gmail.com>

     Add HTTP status to --stats-site=csv and --stats-site=json
     
     * src/wget_host.h: Add 'status' to struct DOC
     * src/stats.c (print_*_site_entry): Print status

2017-09-14 Avinash Sonawane <rootkea@gmail.com>

     Add new format 'tree' for --stats-site
     
     * include/wget/wget.h: Add WGET_STATS_FORMAT_TREE to wget_stats_format_t enum
     * src/options.c (parse_stats): Accept format 'tree' for --stats-site switch
     * src/stats.c (stats_print_tree): Print tree-ish o/p for format WGET_STATS_FORMAT_TREE

2017-09-14 Avinash Sonawane <rootkea@gmail.com>

     * src/stats.c (stats_print): For --stats-all=csv:foo, save stats in separate files

2017-09-12 Avinash Sonawane <rootkea@gmail.com>

     Add --stats-all switch as a shorthand to turn ON all the stats-* switches
     
     * src/wget_options.h (struct config): Add member 'stats_all'
     * src/options.c: Add new function parse_stats_all to parse --stats-all
     * tests/test-stats.c (stats_options[]): Add "--stats-all"
     * src/stats.c (stats_print): Append to file if --stats-all is provided

2017-09-11 Avinash Sonawane <rootkea@gmail.com>

     Fix --stats-site o/p for --spider
     
     * src/wget_host.h (struct HOST_DOCS): change datatype of 'docs' from wget_vector_t to wget_hashmap_t
     * src/stats.c (stats_docs_add): For --spider replace contents of 'doc' with 'resp' of second GET request

2017-09-10 Avinash Sonawane <rootkea@gmail.com>

     Consolidate --stats-site CSV and JSON o/p
     
     * src/stats.c: Consolidate print_csv() and print_json()
     * src/stats.c: Consolidate print_site_stats_csv() and print_site_stats_json()
     * src/wget_stats.h: Move stats_format_t enum to include/wget/wget.h

2017-09-09 Avinash Sonawane <rootkea@gmail.com>

     Fix --stats-* JSON o/p
     
     * src/wget_host.h: Add 'json_stats' context struct
     * src/stats.c: Pass 'ctx' stats_print_*_entry()s

2017-09-09 Avinash Sonawane <rootkea@gmail.com>

     * src/stats.c: Consolidate code from stats_print_*() functions in stats_print()

2017-09-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c (stats_set_option): Fix memory leak

2017-09-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --stats-site hashing
     
     * src/stats.c (_host_docs_hash): Disable integer sanitizer checks,
       avoid memory allocation.
       (stats_docs_add): Use calloc instead of malloc.

2017-09-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c: More consolidation

2017-09-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Detangle src/hosts.c and src/stats.c
     
     * src/host.c: Move stuff to src/stats.c
     * src/options.c (init): Save --stats-site status in config
     * src/stats.c: Insert stuff rom src/host.c
     * src/wget.c: Cleaup regarding the above changes
     * src/wget_host.h: Add structs and prototypes
     * src/wget_options.h: Add config.stats_site
     * src/wget_stats.h: Add prototypes
     * unit-tests/Makefile.am: Link stats.o where needed

2017-09-07 Avinash Sonawane <rootkea@gmail.com>

     Add JSON o/p for --stats-site
     
     * src/wget_host.h: Add print_site_stats_json() prototype declaration
     * src/stats.c (stats_print_json): Handle WGET_STATS_TYPE_SITE case
     * src/host.c: Add print_site_stats_json(), hosts_hashmap_json() and
     print_json() functions

2017-09-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Detangle stats from options.c
     
     * src/options.c (parse_stats): Call stats_set_option() to set values,
       (deinit): Call stats_exit()
     * src/stats.c: Move stats_opts here,
       new functions stats_set_option() and stats_exit()
     * src/wget_options.h: Remove stats_format_t, stats_opts_t, stats_opts
     * src/wget_stats.h: Add stats_format_t,
       add prototypes for stats_exit() and stats_set_option()

2017-09-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c: Cleanup stats output dispatching

2017-09-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c (stats_server_hpkp): Add G_GNUC_WGET_PURE attribute

2017-09-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c: Reduce number of memory allocations

2017-09-06 Avinash Sonawane <rootkea@gmail.com>

     Add CSV o/p for --stats-site
     
     I'll amend this later.

2017-09-06 Avinash Sonawane <rootkea@gmail.com>

     Collect site stats only if --stats-site switch is supplied
     
     * src/wget.c (wget_tcp_set_stats_site): Set 'stats-site' flag
     * src/wget.c (add_statistics): Collect Site stats only if `stats_site` is set
     * src/stats.c (stats_init): Call wget_tcp_set_stats_site if --stats-site is supplied
     * include/wget/wget.h: Add wget_tcp_set_stats_site() prototype declaration

2017-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Rearrange stats struct members to avoid padding
     
     * src/wget_stats.h: Likewise
     * libwget/ssl_gnutls.c: Likewise

2017-09-05 Avinash Sonawane <rootkea@gmail.com>

     Add docs
     
     * libwget/http.c: Document wget_tcp_set_stats_server() and wget_tcp_get_stats_server()
     * libwget/net.c: Document wget_tcp_set_stats_dns() and wget_tcp_get_stats_dns()
     * libwget/ssl_gnutls.c: Document wget_tcp_set_stats_tls() and wget_tcp_get_stats_tls()
     * libwget/ssl_gnutls.c: Document wget_tcp_set_stats_ocsp() and wget_tcp_get_stats_ocsp()

2017-09-05 Avinash Sonawane <rootkea@gmail.com>

     Add robots.txt as child of first doc having same host as robots.txt
     
     * src/host.c (tree_docs_add): Likewise
     * src/host.c (print_treeish): Backtrack once all children have been printed
     * src/wget.c: Remove commented code
     * scr/wget_job.h: Remove not needed 'cloned_robot_iri' and 'previous_robot_job'
     * src/wget_host.h: Remove not needed 'bool robot_iri'

2017-09-04 Avinash Sonawane <rootkea@gmail.com>

     Add robot_iri to blacklist and do not free it explicitly
     
     * src/wget.c (add_url_to_queue): Likewise
     * src/wget.c (add_url): Likewise
     * src/host.c (host_remove_job): Don't free robot_iri explicitly

2017-09-04 Avinash Sonawane <rootkea@gmail.com>

     * tests/test-stats.c: Add tests for -r with --stats-* options

2017-09-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add test 'test-stats' for new stats options
     
     * tests/Makefile.am: Add test-stats.c
     * tests/test-stats.c: New file

2017-09-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (downloader_thread): Add missing brackets around else case

2017-09-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/stats.c: Reduce # of allocations in stats_print_* functions

2017-09-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/host.c (print_encoding): Add 'const' attribute to function

2017-09-03 Avinash Sonawane <rootkea@gmail.com>

     Do not print sizes in human-readable form
     
     * src/host.c (host_docs_hashmap): Likewise
     * libwget/http.c (_free_host_entry): Fix parenhesis
     * src/options.c: Amend help text to reflect the progress

2017-09-02 Avinash Sonawane <rootkea@gmail.com>

     * src/host.c (print_treeish): Use context variable instead of local static variable

2017-09-01 Avinash Sonawane <rootkea@gmail.com>

     Assign enum values explicitly
     
     * include/wget/wget.h: Likewise
     * src/stats.c (stats_print_human): Remove commented code

2017-09-01 Avinash Sonawane <rootkea@gmail.com>

     * src/stats.c (stats_print_csv): Use buffer to print CSV header

2017-09-01 Avinash Sonawane <rootkea@gmail.com>

     Refactor --stats-tls code
     
     * src/wget_stats.h: Change datatype of 'tls_con' and 'resumed' from char to bool
     * libwget/ssl_gnutls.c (stats_data_t struct): Likewise
     * src/stats.c (stats_print_*): Use WGET_HTTP_PROTOCOL_* instead of hard-coded values

2017-09-01 Avinash Sonawane <rootkea@gmail.com>

     Add port to DNS stats
     
     * include/wget/wget.h: Add WGET_STAST_DNS_PORT to wget_stats_dns_t enum
     * libwget/netc. (wget_tcp_resolve): store port in _stats_data_t struct
     * src/wget_stats.h: Add 'port' to dns_stats_t struct
     * src/stats.c (stats_callback): Collect port into dns_stats_t struct
     * src/stats.c (stats_print_*): Print port

2017-08-29 Avinash Sonawane <rootkea@gmail.com>

     * libwget/http.c: Suppress clang warning about integer overflow

2017-08-23 Avinash Sonawane <rootkea@gmail.com>

     Add parent child relationships and print them in tree-ish form
     
     * include/wget/wget.h: Add prototype for wget_vector_deinit()
     * libwget/vector.c: Add wget_vector_deinit() to free 'v->entry'
     (can be used for vector maintaining references)
     * src/host.c: Refactor tree_docs_add()
     * src/host.c: Add hosts_hashmap_tree() and print_treeish() to print tree-ish o/p
     * wget/host.h: Add 'root' and 'robot' to HOST struct
     * src/wget_job.h (JOB struct): Add 'previous_robot_job' and 'clonned_robot_iri'

2017-08-20 Avinash Sonawane <rootkea@gmail.com>

     Add data structures and functions for tree-ish o/p
     
     * src/wget_host.h: Add tree_docs hashmap to HOST struct
     * src/wget_host.h: Add TREE_DOCS struct
     * src/host.c: Add _tree_docs_hash() as hash function for 'tree_docs' hashmap
     * src/host.c: Add _tree_docs_compare() as compare function for 'tree_docs' hashmap
     * src/host.c: Add _free_tree_docs_entry() as destructor for 'tree_docs' hashmap
     * src/host.c: (tree_docs_add): Add entry to 'tree_docs' hashmap
     * src/host.c: (tree_docs_get): Get entry from 'tree_docs' hashmap

2017-08-17 Avinash Sonawane <rootkea@gmail.com>

     Add doc_size and content-encoding to --stats-site
     
     * src/wget_host.h (DOC struct): Add size_downloaded, size_decompressed and encoding
     * src/wget.c (_prepare_file): Simplify code
     * src/options.c: Amend --stats-* help text
     * src/host.c (host_docs_add): Collect size_downloded, size_decompressed and encoding

2017-08-16 Avinash Sonawane <rootkea@gmail.com>

     * src/host.c: Suppress clang warning about integer overflow

2017-07-31 Avinash Sonawane <rootkea@gmail.com>

     Add --stats-site switch
     
     * include/wget/wget.h: Add WGET_STATS_TYPE_SITE to wget_stats_type_t enum
     * src/options.h: Increase stats_opts[] size to 5
     * src/options.c: Add --stats-site
     * src/wget_host.h: Add 'robot_iri' to DOC struct
     * src/host.c: Add new functions print_site_stats(), hosts_hashmap() and host_docs_hashmap()
     * src/stats.c (stats_print_human): Print site stats
     * src/wget.c: Call host_add() as soon as scheme changes due to HSTS
     * src/wget.c: Clone robot_iri
     * src/wget_stats.h: Fix indentation

2017-07-31 Avinash Sonawane <rootkea@gmail.com>

     Assign enum values explicitly
     
     * src/wget_options.h (stats_format_t enum): Likewise
     * src/options.c (help_section_t enum): Likewise
     * libwget/css_tokenizer.h: Likewise
     * libwget/bar.c (_bar_slot_status_t enum): likewise
     * src/host.c (host_docs_get): Initialize 'host_docsp'
     * src/wget.c (add_statistics): Add call to host_docs_add()

2017-07-30 Avinash Sonawane <rootkea@gmail.com>

     Add WGET_STATS_HPKP_ERROR to handle HPKP error
     
     * include/wget/wget.h: Add WGET_STATS_HPKP_ERROR to wget_hpkp_stats_t enum
     * src/wget_stats.h (server_stats_t struct): Change datatype of 'hpkp' from char to wget_hpkp_stats_t
     * libwget/ssl_gnutls.c (_cert_verify_hpkp): Store WGET_STATS_HPKP_ERROR for error
     * src/stats.c (stats_server_hpkp): Return appropriate message depending on 'hpkp' value

2017-07-28 Avinash Sonawane <rootkea@gmail.com>

     Collect --stats-server for unique servers(IPs) only
     
     * src/wget_stats.h: Add member 'scheme' to server_stats_t struct
     * src/stats.c (stats_callback): Collect 'scheme' in server_stats_t struct
     * src/stats.c (stats_print_*): Print 'scheme'
     * include/wget/wget.h: Add WGET_STATS_SERVER_SCHEME to wget_server_stats_t enum
     * libwget/hashmap.c (wget_hashmap_contains): Add check for 'h' being non-NULL
     * libwget/http.c: Add _host_hash() as hash function for 'hosts' hashmap
     * libwget/http.c: Add _host_compare() as compare function for 'hosts' hashmap
     * libwget/http.c: Add _free_host_entry() destructor for 'hosts' hashmap
     * libwget/http.c (host_add): Add host to 'hosts' hashmap

2017-07-28 Avinash Sonawane <rootkea@gmail.com>

     * include/wget/wget.h: Set explicit enum values

2017-07-28 Avinash Sonawane <rootkea@gmail.com>

     Add IP to --stats-server
     
     * src/wget_stats.h: Add 'ip' to 'server_stats_t' struct
     * src/stats.c (stats_callback): Collect IP
     * src/stats.c (stats_print_*): Print IP
     * src/stats.c (free_server_stats): Free 'ip'
     * libwget/net.h (wget_tcp_st struct): Add 'ip'
     * libwget/net.c (wget_tcp_connect): Store IP in tcp->ip
     * libwget/http.c: Collect IP from conn->tcp->ip

2017-07-27 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c: Amend the help text for --stats-* options

2017-07-26 Avinash Sonawane <rootkea@gmail.com>

     Collect site-based stats
     
     * src/wget_host.h: Add  HOST_DOCS and DOC structs
     * src/host.c (_host_docs_compare): Add compare function for host_docs hashmap
     * src/host.c (_host_docs_hash): Add hash function for host_docs hashmap
     * src/host.c (_free_host_docs_entry): Add destructor for host_docs hashmap
     * src/host.c (host_docs_add): Add function to add stats in host_docs hashmap
     * src/host.c (host_docs_get): Add function to retrieve doc from host_docs hashmap
     * src/wget.c (process_response_header): Add call to host_docs_add()

2017-07-21 Avinash Sonawane <rootkea@gmail.com>

     Assign default value if wget_tcp_get_stats_* return NULL
     
     * src/stats.c (stats_callback): Likewise
     * src/wget_stats.h: Change datatype of cert_chain_size, nvalid,
     ignored, nrevoked from size_t to int
     * src/wget_stats.h: Change datatype of hpkp from wget_hpkp_stats_t
     to char
     * src/options.c (parse_stats): Exit if unknown stats format
     * libwget/net.c (wget_tcp_resolve): Initialize 'before_millisecs'
     * libwget/ssl_gnutls.c: Add function definitions for wget_tcp_*_stats_ocsp()

2017-07-20 Avinash Sonawane <rootkea@gmail.com>

     Add support for --stats-*[=[format:]filename]
     
     * src/options.c: Add parse_stats() function to parse --stats-*[=[format:]filename]
     * src/wget_options.h: Add stats_format_t enum and stats_opts_t struct
     * src/stats.c: Add stats_print_human() for "human" formatted output
     
     3 case-insensitive formats: json, csv and human (default)
     'stdout' is the default file. '-' stands for 'stdout'.

2017-07-12 Avinash Sonawane <rootkea@gmail.com>

     * src/stats.c: Fix --stats-server and --stats-ocsp JSON output

2017-07-12 Avinash Sonawane <rootkea@gmail.com>

     Add flag tls_stats to separate --stats-tls from --stats-ocsp
     
     * libwget/ssl_gnutls.c: Likewise
     * src/http.c (wget_http_open): Add check to see whether stats_callback is non-NULL

2017-07-12 Avinash Sonawane <rootkea@gmail.com>

     * src/stats.c (free_server_stats): free server_stats_t members

2017-07-11 Avinash Sonawane <rootkea@gmail.com>

     Print Server stats and OCSP stats in CSV and JSON format
     
     * src/stats.c: Likewise
     * src/wget_stats.h: Remove stats_print*() function declarations

2017-07-11 Avinash Sonawane <rootkea@gmail.com>

     Print --stats-server, if asked, for HPKP_NOMATCH
     
     * libwget/http.c (wget_http_open): Call stats_callback() even for WGET_E_CERTIFICATE, if asked
     * src/wget_stats.h (server_stats_t struct): Fix indentation
     * src/stats.c (stats_print): Fix info_printfs() for server stats

2017-07-10 Avinash Sonawane <rootkea@gmail.com>

     Add HPKP_NEW to --stats-server
     
     * src/wget_stats.h: Add hpkp_new to server_stats_t struct
     * src/stats.c (stats_callback): Collect hpkp_new
     * src/stats.c (stats_print): Print hpkp_new
     * libwget/http.c (wget_http_get_response_cb): Collect hpkp_new stats
     * include/wget/wget.h: Add WGET_STATS_SERVER_HPKP_NEW to wget_server_stats_t enum

2017-07-10 Avinash Sonawane <rootkea@gmail.com>

     Add IGNORED to --stats-ocsp
     
     * libwget/ssl_gnutls.c (_verify_certificate_callback): Add nignored to stats
     * src/stats.c (stats_callback): Collect nignored
     * src/stast.c (stats_print): Print nignored

2017-07-08 Avinash Sonawane <rootkea@gmail.com>

     Add HPKP stats and hostname to --stats-server
     
     * libwget/ssl_gnutls.c: Collect HPKP stats in tcp struct via session_context
     * libwget/http.c: Collect hostname and HPKP stats in _stats_data_t struct
     * src/stats.c: Collect hostname in stats_callback() and print it

2017-07-08 Avinash Sonawane <rootkea@gmail.com>

     Add --stats-ocsp option
     
     * src/wget_stats.h: Add ocsp_stats_t struct
     * src/stats.c: Add ocsp_stats_v vector to store OCSP stats
     * src/stats.c: Add OCSP stats code in stats_init(), stats_callback() and stats_print()
     * src/wget_options.h: Add stats_ocsp to struct config
     * src/options.c: Add --stats-ocsp
     * include/wget/wget.h: Add wget_ocsp_stats_t enum
     * include/wget/wget.h: Add WGET_STATS_TYPE_OCSP to wget_stats_type_t enum
     * libwget/ssl_gnutls.c: Add wget_tcp_set_stats_ocsp() and wget_tcp_get_stats_ocsp()

2017-07-07 Avinash Sonawane <rootkea@gmail.com>

     Print stats in CSV and JSON format
     
     * src/wget_stats.h: Add prototypes for stats_printcsv() and stats_printjson()
     * src/stats.c: Add stats_printcsv() and stats_printjson() functions
     * libwget/ssl_gnutls.c: Change datatype of cert_chain_size from unsigned int to size_t

2017-07-06 Avinash Sonawane <rootkea@gmail.com>

     Add --stats-server option
     
     * src/wget_stats.h: Add server_stats_t struct
     * src/stats.c: Add server_stats_v vector to store server stats
     * src/stats.c: Add server stats code in stats_init(), stats_callback and stats_print()
     * src/stats.c: Add free_server_stats() destructor
     * src/wget_options.h: Add stats_server to struct config
     * src/options.c: Add --stats-server
     * include/wget/wget.h: Add wget_server_stats_t and wget_hpkp_stats_t enums
     * include/wget/wget.h: Add WGET_STATS_TYPE_SERVER to wget_stats_type_t enum
     * libwget/http.c: Add wget_tcp_set_stats_server() and wget_tcp_get_stats_server()
     * libwget/http_parse.c: Check for "Content-Security-Policy" header
     * libwget/ssl_gnutls.c: Collect HPKP stats in wget_tcp_t struct
     * libwget/net.h: Add hpkp to wget_tcp_st struct

2017-06-16 Avinash Sonawane <rootkea@gmail.com>

     Add --stats-dns and --stats-tls options
     
     * src/wget_stats.h: Add dns_stats_t and tls_stats_t structs
     * src/stats.c: Add stats_init(), stats_callback() and stats_print() functions
     * src/stats.c: Add dns_stats_v and tls_stats_v vectors
     * src/stats.c: Add free_tls_stats() and free_tls_stats() functions
     * src/wget_options.h: Add stats_dns and stats_tls in config struct
     * src/options.c: Add --stats-dns and --stats-tls
     * src/wget.c: Add call to stats_init() and stats_print() functions
     * src/Makefile.am: Add stats.c and wget_stats.h files
     * include/wget/wget.h: Add prototypes for wget_tcp_set_stats_dns() and wget_tcp_set_stats_tls()
     * include/wget/wget.h: Add prototypes for wget_tcp_get_stats_dns() and wget_tcp_get_stats_tls()
     * include/wget/wget.h: Add wget_stats_type_t, wget_dns_stats_t and wget_tls_stats_t enums
     * libwget/ssl_gnutls.c: Add wget_tcp_set_stats_tls() and wget_tcp_get_stats_tls()
     * libwget/net.h: Add TLS stats in wget_tcp_st struct
     * libwget/net.c: Add wget_tcp_set_stats_dns() and wget_tcp_get_stats_dns()

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_answer_to_connection): Fix memleaks found by coverity

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Fix warnings on _WIN32

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/log.c: Fix unused param warning on _WIN32

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_print_info): Remove call to deprecated GnuTLS function

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change __WIN32 to _WIN32
     
     * tests/test-idn-cmd.c: Likewise
     * tests/test-idn-robots.c: Likewise

2017-09-18 Darshit Shah <darnir@gnu.org>

     * tests/libtest.h: Add WGET_TEST_FEATURE_FTP to satisfy clang

2017-09-18 Darshit Shah <darnir@gnu.org>

     Revert "* libwget/net.c: Remove port variable from DNS cache"
     
     This reverts commit b9006672dcbbffb3995a78918d04bfe009f29e2d.
     We cannot remove the port variable from the DNS cache. The struct
     addrinfo structure contains the port information and hence causes issues
     during HTTP->HTTPS redirects

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Cleanups

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix configure ans Makefile.am for MHD
     
     * Makefile.am: Add tests to SUBDIRS only with MHD
     * configure.ac: Fix MHD detection

2017-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix two IDN tests for MinGW/Windows
     
     * tests/test-idn-cmd.c: Skip UTF-8 on command line
     * tests/test-idn-robots.c: Likewise
     
     MinGW mangles UTF-8 characters on the command line, so we skip
     those tests.

2017-09-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Add Wget2 dependencies to mingw script

2017-09-16 Darshit Shah <darnir@gnu.org>

     * libwget/net.c: Remove port variable from DNS cache

2017-09-17 Darshit Shah <darnir@gnu.org>

     Use Feature Flags to SKIP unsupported tests
     
     * tests/libtest.{c,h}: Add support for feature flags during test
     startup. Check if Wget2 is compiled with the feature and conditionally
     SKIP the tests
     * tests/test-*.c: Pass the right feature flags for each test. MHD for
     HTTP, FTP for FTP, IDN and PLUGIN when applicable

2017-09-17 Darshit Shah <darnir@gnu.org>

     * configure.ac: Support compiling without MHD support

2017-09-18 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yml: The Fedora runner should use GCC

2017-09-18 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yml: Use new MingW Docker Image

2017-09-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Adjust WINEPATH, remove CXX

2017-09-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c (_add_file_hash): Skip spaces at begin of mirror URL

2017-09-16 Darshit Shah <darnir@gnu.org>

     Fix bug with combination of host-directories and cut-dirs
     
     * libwget/iri.c(wget_iri_get_path): Change API so that a path separator
     is added _only_ if one does not already exist at the end of the buffer.
     This should be a non-breaking change.
     * src/wget.c(get_local_filename): Append a "/" at the end of the
     hostname, always.

2017-09-16 Darshit Shah <darnir@gnu.org>

     * tests/test-cut-dir: Add two new tests with host directories

2017-09-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer_printf.c (wget_buffer_vprintf_append): Reset precision after use

2017-09-08 Didik Setiawan <ds@didiksetiawan.com>

     Fix socket handle issue on MinGW64 build
     
     Helped-by: Akash Rawal
     Helped-by: Tim Rühsen

2017-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_http_server_start): Do not use real randomness

2017-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Adjust build flags

2017-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Add /usr/x86_64-w64-mingw32/lib/pkgconfig to PKG_CONFIG_PATH

2017-08-17 Didik Setiawan <ds@didiksetiawan.com>

     Add digest authentication test
     
     * tests/Makefile.am: Add test 'test-auth-digest'
     * tests/libtest.c: Fix HTTP server to handle digest
       authentication
     * tests/libtest.h: Add opaque for digest authentication
     * tests/test-auth-digest.c: Add new test to prove digest
       authentication functionality

2017-09-11 Darshit Shah <darnir@gnu.org>

     * configure.ac: MHD is used only in tests. Don't link to Wget2

2017-09-12 Akash Rawal <argmlac@gmail.com>

     * .gitlab-ci.yml (MinGW64): Remove hardcoded path to wget2 clone

2017-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Include building libmicrohttpd

2017-09-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove MHD clone & bootstrap (now in docker build)

2017-09-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove MHD install, moved into docker build

2017-09-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use gnulib-tool.py to speed up ./bootstrap
     
     * README.md: Add python to optional dependencies
     * bootstrap: Use gnulib-tool.py if possible
     * gnulib: Update
     
     gnulib-tool.py is much faster than the old gnulib-tool.

2017-09-10 Avinash Sonawane <rootkea@gmail.com>

     * src/wget.c: If not -r then don't send second GET request for --spider

2017-09-10 Didik Setiawan <ds@didiksetiawan.com>

     Fix Clang warnings on MHD code
     
     Reported-by: Avinash Sonawane

2017-09-05 Darshit Shah <darnir@gnu.org>

     * .gitlab-ci.yaml: Set default CFLAGS to retain the human readable symbols

2017-09-05 Darshit Shah <darnir@gnu.org>

     Prevent heap-use-after-free of default_challenges
     
     * src/wget_job.h: Add new field to JOB struct, challenges_alloc. This
     field indicates whether the JOB object owns the challenges struct.
     * src/job.c(job_free): Free the challenges struct of the job only if it
     is owned. Else, let the owner handle freeing it.
     * src/wget.c: Mark the challenges vector as owned when it is taken from
     the response. If it is the default vector, it is not owned.

2017-09-03 Didik Setiawan <ds@didiksetiawan.com>

     Remove redundant debugging option
     
     * tests/test--post-file.c: Remove redundant debugging option
     * tests/test-auth-basic.c: Likewise
     * tests/test-metalink.c: Likewise
     * tests/test-redirection.c: Likewise
     * tests/test-wget-1.c: Likewise
     
     Debugging option already provided in tests/libtest.c, so we don't need
     to adding it in each test file

2017-09-03 Didik Setiawan <ds@didiksetiawan.com>

     Fix expected error code regarding wrong authentication test
     
     * tests/test-auth-basic.c: Fix expected error code regarding wrong
       authentication test which use basic scheme

2017-09-03 Didik Setiawan <ds@didiksetiawan.com>

     * test/libtest.c: Remove unnecessary old http server code

2017-09-03 Didik Setiawan <ds@didiksetiawan.com>

     * test/libtest.c: Ensure dinfo variable to be initialized before usage

2017-08-23 Didik Setiawan <ds@didiksetiawan.com>

     * tests/libtest.c: Add server info into HTTP header

2017-08-04 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server to handle chunked transfer encoding
     
     * tests/libtest.c: Fix HTTP server to handle chunked
       transfer encoding
     * tests/test-bad-chunk.c: Modify test to conform with new
       server
     * tests/test-chunked.c: Likewise

2017-07-19 Didik Setiawan <ds@didiksetiawan.com>

     * tests/libtest.c: Fix -Wunused-param caused by MHD API

2017-07-14 Didik Setiawan <ds@didiksetiawan.com>

     * tests/libtest.c: Add HTTPS server handler

2017-07-13 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server to handle basic authentication
     
     * tests/libtest.c: Add basic authentication test handler
     * tests/test-auth-basic.c: Add test for wrong credentials

2017-07-11 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to handle 302 redirection
     
     * tests/libtest.c: Fix HTTP server response to handle 302
       status code

2017-07-10 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to handle 404 Not Found
     
     * tests/libtest.c: Fix HTTP server response to handle 404
       Not Found status code with non-empty body

2017-07-09 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to handle Byte serving
     
     * tests/libtest.c: Fix HTTP server response to handle Byte
       serving

2017-07-05 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to handle If-Modified-Since
     
     * tests/libtest.c: Fix HTTP server response to handle
       If-Modified-Since

2017-06-25 Didik Setiawan <ds@didiksetiawan.com>

     Fix requested URL query string which contains space
     
     * tests/libtest.c: Fix requested URL query string which
       contains space

2017-06-23 Didik Setiawan <ds@didiksetiawan.com>

     Fix empty requested URL regarding IDN hostname
     
     * tests/libtest.c: Fix empty requested URL by redirect
       default page to index.html regarding IDN hostname

2017-06-22 Didik Setiawan <ds@didiksetiawan.com>

     Fix empty requested URL
     
     * tests/libtest.c: Fix empty requested URL by redirect
       default page to index.html

2017-06-21 Didik Setiawan <ds@didiksetiawan.com>

     Fix remote URL to handle IRI object
     
     * tests/libtest.c: Fix remote URL which contains IRI object
       using Libmicrohttpd function (MHD_http_unescape)

2017-06-18 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to handle directory creation
     
     * tests/libtest.c: Fix HTTP server response regarding
       directory creation on recursive download

2017-06-18 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to include available header
     
     * tests/libtest.c: Fix HTTP server response to include
       available header. This solved many cases which involving
       proper HTTP header response such as for Chunked
       "Transfer-Encoding" and "Redirection"

2017-06-17 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server to get available port
     
     * tests/libtest.c: Automatically get available port for HTTP
       server using Libmicrohttpd function

2017-06-16 Didik Setiawan <ds@didiksetiawan.com>

     Fix requested URL which contains query string
     
     * tests/libtest.c: Fix requested URL which contains
       query string

2017-06-14 Didik Setiawan <ds@didiksetiawan.com>

     Fix HTTP server response to handle 404 Not Found
     
     * tests/libtest.c: Fix HTTP server response to handle 404
       Not Found status code with empty body

2017-06-13 Didik Setiawan <ds@didiksetiawan.com>

     * tests/libtest.c: Create Libmicrohttpd function wrapper

2017-06-05 Didik Setiawan <ds@didiksetiawan.com>

     Initial system preparation for Libmicrohttpd integration
     
     * .gitlab-ci.yml: Add Libmicrohttpd package for CI testing
       using Debian/gcc, Fedora/clang and MinGW64
     * .travis.sh: Add Libmicrohttpd package for OSX/clang
     * .travis_setup.sh: Add Libmicrohttpd package for Debian/gcc
       and clang
     * README.md: Add info which mentioning Libmicrohttpd as
       optional requirement
     * configure.ac: Check for Libmicrohttpd availability

2017-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2_manual.md: Fix several small things

2017-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove redundant pointer syntax from function pointer calls
     
     * libwget/hsts.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/plugin.c: Likewise
     * src/plugin.c: Likewise

2017-09-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/plugin.c (plugin_db_finalize): Check if initialized

2017-09-05 Tim Rühsen <tim.ruehsen@gmx.de>

     README.md: document clang not working with 'make check-coverage'

2017-09-04 Akash Rawal <argmlac@gmail.com>

     Fix clang warnings
     
     * include/wget/wget.h: Add new function wget_ssl_set_config_object()
     * libwget/ssl_gnutls.c: Likewise
     * src/options.c: Use wget_ssl_set_config_object()
     * libwget/ssl_gnutls.c (wget_ssl_write_timeout): Remove unreachable code
                            not required by syntax
     * src/wget.c (downloader_thread): Likewise
     * unit-tests/test.c (test_hpkp): Remove unnecessary variable with same
                                      name

2017-09-03 Akash Rawal <argmlac@gmail.com>

     Add plugin APIs for custom HSTS, HPKP and OCSP databases
     
      * include/wget/wget.h: Add plugin API declarations
      * libwget/hsts.c: Make wget_hsts_db_t extensible
      * libwget/hpkp.c: Make wget_hpkp_db_t extensible
      * libwget/ocsp.c: Make wget_ocsp_db_t extensible
      * libwget/plugin.c: Add virtual functions for plugin API
      * src/plugin.c: Add plugin API implementation
      * src/wget_plugin.h: Likewise
      * src/option.c: Add code to call the implementation
      * src/wget.c: Likewise
      * tests/test-plugin-dummy: Add plugin with dummy databases for testing
      * tests/Makefile.am: Add target libplugindb.la
      * tests/test-plugin.c: Add tests for custom databases
      * unit-tests/test.c: Add tests for new HPKP functions
      * libwget/ssl_gnutls.c: Adapt to API changes
      * examples/http_multi_get.c: Likewise
      * fuzz/libwget_hpkp_fuzzer.c: Likewise
      * fuzz/libwget_hsts_fuzzer.c: Likewise
      * fuzz/libwget_ocsp_fuzzer.c: Likewise
     
     This feature implemented as per the specifications at
     https://gitlab.com/akash_rawal/wget2/wikis/Stage-4

2017-09-03 Akash Rawal <argmlac@gmail.com>

     Add plugin APIs for intercepting downloaded files.
     
     Merged from branch tmp-akash_rawal-stage3 into master
     
      * include/wget/wget.h: Add function declarations
      * libwget/plugin.c: Add virtual functions
      * configure.ac: Check for fmemopen()
      * src/plugin.c: Add implementation
      * src/wget_plugin.h: Likewise
      * src/wget.c: Add code that calls the implementation
      * tests/test-plugin-dummy.c (pluginapi): Add option 'parse-rot13',
        'only-rot13' and 'test-pp'
      * tests/test-plugin.c: Add tests
      * tests/libtest.c: Load files into dynamic memory instead of stack,
        enables testing with large files.
     
     Plugin APIs for intercepting downloaded files have been implemented
     as per specifications at https://gitlab.com/akash_rawal/wget2/wikis/Stage-3

2017-09-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Include sys/uio.h for writev()
     
     * configure.ac: Check for sys/uio.h
     * libwget/ssl_gnutls.c: Include sys/uio.h for writev() if available
     
     Fixes #260
     Reported-by: Gabriele Balducci
      

2017-09-01 Darshit Shah <darnir@gnu.org>

     Call strerror() to get Error message with some errors

2017-09-01 Darshit Shah <darnir@gnu.org>

     * libwget/http.c(wget_http_send_request): Fix printf specifier data type

2017-08-31 Darshit Shah <darnir@gnu.org>

     Remove magic numbers when setting exit codes
     
     Magic numbers are bad, they make the code very difficult to read since
     one must guess their intention. Which is why this commit eliminates all
     the magic numbers for setting the exit status and replaces them with a
     structured enum. This has the added benefit of having these values as
     symbols in the final symbol table.
     
     * src/wget.c: Replace all calls to set_exit_status() to use the
     exit_status_t enum values
     * src/wget_main.h: Define the exit_status_t enum and associated exit
     error code values

2017-08-31 Darshit Shah <darnir@gnu.org>

     * src/wget.c(process_response_header): Remove dead (commented) code

2017-08-31 Darshit Shah <darnir@gnu.org>

     * src/wget.c(process_response_header): Clean up auth failure pathways

2017-08-31 Avinash Sonawane <rootkea@gmail.com>

     Do not print request body if it's an OCSP request
     
     * include/wget/wget.h: Add 'debug_skip_body' flag to 'wget_http_request_t'
     * libwget/ssl_gnutls.c: set 'debug_skip_body' flag if it's an OCSP request
     * libwget/http.c: Do not print 'req->body' if 'debug_skip_body' is set

2017-08-31 Avinash Sonawane <rootkea@gmail.com>

     * src/wget.c: Fix regression of having extra '/' in filename

2017-08-23 Darshit Shah <darnir@gnu.org>

     New benchmark script

2017-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Improve fuzzer helper scripts
     
     * fuzz/get_ossfuzz_corpora: Improve description text
     * fuzz/view-coverage.sh: Allow 1+ arguments

2017-08-23 Darshit Shah <darnir@gnu.org>

     Add counter for authorization failures
     
     Fixes #259

2017-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Use clang for sanitizer CI
     
     * .gitlab-ci.yml: Use clang for sanitizing, remove memory sanitizer
     * configure.ac: Do not combine leak and memory sanitizer for clang
     
     Memory sanitizer only makes sense when all dependencies are built with it.
     Else we will see many false positives.

2017-08-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib

2017-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_do_handshake): Entangle code

2017-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/README.md: Add sanitizer options

2017-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib

2017-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix 'deflate' content-type decompression
     
     * ../libwget/decompressor.c (deflate_init): Fix deflate initialization
     
     Fixes: #251
     Reported-by: Avinash Sonawane

2017-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix possible buffer read underflow
     
     * libwget/cookie.c (_path_match): Fix underflow
     
     Fixes: #253
     Reported-by: Avinash Sonawane

2017-08-15 Avinash Sonawane <rootkea@gmail.com>

     * Suppress clang warning about integer overflow
     
     * src/host.c: Likewise
     * src/blacklist.c: Likewise
     * src/wget.c: Likewise

2017-08-15 Avinash Sonawane <rootkea@gmail.com>

     * libwget/utils.c: Fix unsigned integer overflow
     
     * wget_match_tail: Likewise
     * wget_match_tail_nocase: Likewise
     
     Found by fuzzing

2017-08-13 Didik Setiawan <ds@didiksetiawan.com>

     Fix DATADIR clash when build using MinGW64
     
     * tests/Makefile.am: Change DATADIR to WGET_DATADIR
     * unit-tests/Makefile.am: Likewise
     * unit-tests/test.c: Likewise
     
     When build Wget2 using MinGW64 and embedding other library
     (Libmicrohttpd), DATADIR macro from Wget2 clash with MinGW64
     header.

2017-08-09 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c(_bar_set_progress): Fix progress bar printf command to fit total size

2017-08-08 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Deduplicate code in function wget_bar_set_slots

2017-08-07 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: SPlit duplicated code into function

2017-08-07 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Replace redundant variable bar->max_slots with bar->nslots

2017-08-07 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c(wget_bar_init): Fix progress bar memory allocation value

2017-08-01 Darshit Shah <darnir@gnu.org>

     Add documentation for wget_bar_set_slots

2017-08-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Hide internal structures/defines from doxygen
     
     * include/wget/wget.h: Use _ as prefix for internals
     * libwget/atom_url.c: Likewise
     * libwget/cookie.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/net.c: Likewise
     * libwget/rss_url.c: Likewise
     * libwget/sitemap_url.c: Likewise
     * src/wget_options.h: Likewise

2017-08-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for xml parsing functions.
     
     * libwget/xml.c: Rename XML_CONTEXT to _xml_context,
       document wget_* functions
     * docs/Makefile.am: Sort order of man page files,
       add building of libwget-xml.3

2017-08-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Improve ASAN and UBSAN sanitizer flags

2017-08-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*.in/*: Update fuzzer corpora

2017-08-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c: Fix param name in docs of wget_strnglob()

2017-08-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Document 'protocol' for wget_tcp_set_protocol()

2017-08-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer_printf.c: Do not document internal defines

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Add -Wno-pedantic to suppress dlsym() warnings

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_tlssess_fuzzer
     
     * fuzz/Makefile.am: Add libwget_tlssess_fuzzer
     * fuzz/libwget_tlssess_fuzzer.c: New file
     * fuzz/libwget_tlssess_fuzzer.in/*: Add fuzz corpora
     * libwget/tls_session.c: Prepare code for fuzzing

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_ocsp_fuzzer
     
     * fuzz/Makefile.am: Add libwget_ocsp_fuzzer
     * fuzz/libwget_ocsp_fuzzer.c: New file
     * fuzz/libwget_ocsp_fuzzer.in/*: Add fuzz corpora

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ocsp.c: Suppress clang warning about integer overflow

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_netrc_fuzzer
     
     * fuzz/Makefile.am: Add libwget_netrc_fuzzer
     * fuzz/libwget_netrc_fuzzer.c: New file
     * fuzz/libwget_netrc_fuzzer.dict: Add dictionary
     * fuzz/libwget_netrc_fuzzer.in/*: Add fuzz corpora

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/netrc.c: Suppress clang warning about integer overflow in hash function

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_response_header): Fix 1-byte-read-buffer-overflow
     
     Fix oss-fuzz issue #2823.

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_content_disposition): Fix NULL ptr dereference
     
     Fix oss-fuzz issue #2822.

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_hsts_fuzzer
     
     * fuzz/Makefile.am: Add libwget_hsts_fuzzer
     * fuzz/libwget_hsts_fuzzer.c: New file
     * fuzz/libwget_hsts_fuzzer.in/*: Add fuzz corpora

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix HSTS code regarding time_t overflow
     
     * libwget/hsts.c: Use int64_t instead of time_t,
       (wget_hsts_new): Fix possible integer overflow,
       (_hsts_db_load): Likewise.
     
     Same type of changes that we applied to HPKP code,
     to fix the integer over/underflows found by fuzzing.

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/strlcpy.c: Add documentation

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/stringmap.c: Suppress clang warning about integer overflow
     
     The hash functions rely on integer overflow.
     Found by fuzzing.

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*.in/*: Update fuzzer corpora from oss-fuzz

2017-08-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (wget_hpkp_set_maxage): Fix integer overflow
     
     Fix oss-fuzz issue #2820.

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/strlcpy.c: Always include string.h

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for fmemopen()
     
     * configure.ac: Check for fmemopen()
     * fuzz/libwget_hpkp_fuzzer.c: Skip corpora load if fmemopen is missing

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_hpkp_fuzzer.c: Skip corpora loading on WIN32

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_hpkp_fuzzer.c: Remove assert.h (syntax-check)

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix DNS caching (regression)
     
     * libwget/net.c: Add 'port' param where needed
     
     Reported-by: Avinash Sonawane

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/README.md: Add undefined sanitizer to CFLAGS

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     New fuzzer 'libwget_hpkp_fuzzer'
     
     * fuzz/Makefile.am: Add libwget_hpkp_fuzzer
     * fuzz/libwget_hpkp_fuzzer.c: New fuzzer
     * fuzz/libwget_hpkp_fuzzer.in/*: Add fuzzer corpora

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix integer overflows in HPKP code
     
     * libwget/hpkp.c: Use int64_t instead of time_t,
       (_hash_hpkp): Suppress integer overflow detection,
       (_hpkp_db_load): Avoid integer overflow
     
     Two integer overflows detected by fuzzing. One is wanted and thus
     we suppress detection by clang. The other was unwanted and is fixed.

2017-07-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Build all fuzzers with 'make oss-fuzz'

2017-07-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_http_parse_fuzzer
     
     * fuzz/Makefile.am: Add libwget_http_parse_fuzzer
     * fuzz/libwget_http_parse_fuzzer.c: New fuzzer
     * fuzz/libwget_http_parse_fuzzer.dict: New dictionary
     * fuzz/libwget_http_parse_fuzzer.in/*: Fuzzer corpora
     * fuzz/run-clang.sh: Use all availbale cores for fuzzing

2017-07-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_content_disposition): Fix memleak (found by fuzzing)

2017-07-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_link): Fix memleak (found by fuzzing)

2017-07-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix off-by-one buffer read in wget_hpkp_pin_add()
     
     * libwget/hpkp.c (wget_hpkp_pin_add): Fix pinsize value,
       (_compare_pin): Fix off-by-one buffer read
     * libwget/base64.c (wget_base64_decode_alloc): Add outlen param
     * include/wget/wget.h (wget_base64_decode_alloc): Likewise
     * fuzz/libwget_base64_fuzzer.c: Add 3rd param to wget_base64_decode_alloc()
     
     Found by local fuzzing

2017-07-30 Darshit Shah <darnir@gnu.org>

     * libwget/http.c: Disable some very verbose debug statements

2017-07-30 Darshit Shah <darnir@gnu.org>

     Support Wget 1.x `--auth-no-challenge` switch
     
     * src/job.c(job_init): Set default value of challenges_alloc to false
     (job_free): Free the challenges vector only if the current job owns it
     * src/options.c: Add new switch "--auth-no-challenge"
     * src/wget.c(add_url_to_queue): Honor the config.auth_no_challenge
     option
     (add_url): Same
     (process_response_header): Fallback to Server provided challenges if
     defaults don't work

2017-07-29 Darshit Shah <darnir@gnu.org>

     Fix make syntax-check due to double word

2017-07-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_parse_header_line): Fix memleaks (found by fuzzing)

2017-07-29 Darshit Shah <darnir@gnu.org>

     * fuzz/libwget_utils_fuzzer.c: Fix call to wget_strglob

2017-07-29 Darshit Shah <darnir@gnu.org>

     Revert "Prevent tiny memory allocations when globbing"
     
     This reverts commit 2d7fe3e9fc364f282c945f372b9a78f8a56d66ff.
     
     With the above patch, a tiny memory allocation is avoided, but in doing
     so, it misses an important case. The glob(3) call never returns a
     success when the file does not already exist at the given path.

2017-07-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Move to Fedora 26

2017-07-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix more clang warnings
     
     * libwget/css_tokenizer.lex: Skip -Wsuggest-attribute=pure for clang
     * libwget/iri.c (wget_iri_parse): Explicit cast
     * src/dl.c: Use 'int' for vector size
     * src/options.c: Likewise,
       remove 'return' after call to exit(),
       (set_long_option): Rename local var 'env' to 'path'
     * src/plugin.c: Make global vars 'static',
       Use 'int' for vector size

2017-07-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix more clang warnings
     
     * tests/test-plugin-dummy.c: Make options 'static'
     * unit-tests/test-dl.c (string_vector_check): Make vector index 'int'
     * unit-tests/test-dl.c (string_vector_dump): Likewise
     * unit-tests/test.c (test_hsts): Make port 'uint16_t'

2017-07-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix clang warnings
     
     * libwget/css.c (wget_css_parse_buffer): Explicitly typecast 'len' to int
     * libwget/http.c (_send_callback): Change datatype of 'rc' from int to ssize_t
     * libwget/http.c (_recv_callback): Likewise
     * libwget/http.c (wget_http_match_no_proxy): Change param name from 'no_proxies' to
       'no_proxies_vec' to not to shadow global 'no_proxies'
     * libwget/ssl_gnutls.c (check_ocsp_response): Explicit type conversion to unsigned int
     * libwget/net.c (wget_tcp_listen): Move declaration of variable 'on' in #ifdef block where it's used
     * src/options.c (set_long_option): Change datatypes of 'invert', 'char_insensitive'
       and 'value_present' from int to char
     
     Reported-by: Avinash Sonawane

2017-07-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_cookie_fuzzer.in/*: Update corpora

2017-07-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/get_all_corpora: Work even if fuzzers are not pre-built

2017-07-26 Akash Rawal <argmlac@gmail.com>

     * libwget/iri.c (iri_ports): Remove redundant const

2017-07-25 Akash Rawal <argmlac@gmail.com>

     Make wget_iri_set_scheme() update iri->uri
     
     * include/wget/wget.h (wget_iri_st): Add field uri_allocated
     * libwget/iri.c: Make wget_iri_set_scheme() update iri->uri

2017-07-24 Akash Rawal <argmlac@gmail.com>

     Fix recursive downloads with '-c' option
     
     * bootstrap.conf: Enable safe-read module
     * src/wget.c: Fix recursive downloads with '-c' option
     * tests/Makefile.am: Add test-c-r.c
     * tests/test-c-r.c: Add tests

2017-07-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix fuzzer regression test for WIN32
     
     * fuzz/main.c: Adjust slash and remove .exe
     
     Reported-by: Gisle Vanem

2017-07-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fail fuzzers if *.in directory does not exist
     
     * fuzz/Makefile.am: Set -DTEST_RUN
     * fuzz/main.c: Error on non-exisiting *.in directory

2017-07-23 Darshit Shah <darnir@gnu.org>

     Use C99 bool instead of unsigned int in IRI struct and code

2017-07-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Change type of port numbers from char * to uint16_t
     
     * include/wget/wget.h: Amend struct wget_iri_st,
       amend API
     * libwget/hsts.c: Amend port type to uint16_t
     * libwget/http.c: Likewise
     * libwget/http.h: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/http_parse.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/net.c: Likewise
     * src/blacklist.c: Likewise
     * src/host.c: Likewise
     * src/wget.c: Likewise
     * src/wget_host.h: Likewise
     * tests/libtest.c: Likewise
     * unit-tests/test.c: Likewise

2017-07-23 Darshit Shah <darnir@gnu.org>

     Clean up .gitignore and sort

2017-07-23 Darshit Shah <darnir@gnu.org>

     Remove unneeded make variables

2017-07-22 Darshit Shah <darnir@gnu.org>

     * libwget/{hsts,hpkp}.c: Don't print all contents as debug messages

2017-07-23 Darshit Shah <darnir@gnu.org>

     Fix heap-use-after-free bug in IRI
     
     * libwget/http.c(wget_http_open): iri maybe free'd far before the
     connection is closed. Hence, strdup the relevant fields
     * libwget/http.c(wget_http_close): Free the newly strdup'ed memory

2017-07-22 Darshit Shah <darnir@gnu.org>

     * include/wget/wget.h: Improve setting of noreturn attribute to functions

2017-07-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c (_compare_cookie2): Fix code to avoid warnings and undefined behavior

2017-05-02 Avinash Sonawane <rootkea@gmail.com>

     Implement --force-progress to force show progress bar
     
     * bootstrap.conf: Add isatty module
     * src/options.c: Add force_progress option
     * src/wget.c: if force_progress then turn on progress bar
     * src/wget_options.h: Add force_progress in config struct

2017-05-02 Avinash Sonawane <rootkea@gmail.com>

     * src/wget.c: Disable progress bar if output isn't TTY
     
     Reported By: Darshit Shah

2017-07-22 Didik Setiawan <ds@didiksetiawan.com>

     Fix digest authentication when server omits algorithm value
     
     * libwget/http.c: Fix digest authentication mechanism when
       server omits algorithm value

2017-07-20 Avinash Sonawane <rootkea@gmail.com>

     Fix doxygen warnings
     
     * README.md: Mark options
     * docs/wget2_manual.md: Mark URLs
     * libwget/bar.c: Fix doc for bar_init(),
       add doxygen close tag at end of file
     * libwget/buffer.c: Fix doc for wget_buffer_reset()
     * libwget/console.c: Move unused tag to front of param
     * libwget/hpkp.c: Fix documented params for wget_hpkp_new()
     * libwget/iri.c: Fix doc for wget_iri_supported()
     * libwget/net.c: Fix doc for wget_tcp_printf()
     * libwget/utils.c: Move unused tag to front of param

2017-07-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Add missing param to print_plugin_help

2017-07-08 Akash Rawal <argmlac@gmail.com>

     Add plugin APIs for intercepting URLs
     
      * include/wget/wget.h: Add function declarations
      * libwget/plugin.c: Add virtual functions
      * src/plugin.c: Add implementation
      * src/wget_plugin.h: Likewise
      * src/wget.c: Add code that calls the implementation
      * src/wget_job.h: Add a variable to store 'accept' action
      * tests/Makefile.am: Add libpluginapi.la
      * tests/test-plugin-dummy.c: Add a test plugin for testing
      * tests/test-plugin.c: Add tests
     
     Plugin API for intercepting URLs has been implemented as per
     specifications at https://gitlab.com/akash_rawal/wget2/wikis/Stage-2

2017-07-16 Akash Rawal <argmlac@gmail.com>

     * src/dl.c: Fix gcc warnings when compiled without plugin support

2017-07-16 Akash Rawal <argmlac@gmail.com>

     * src/dl.c (convert_to_path_if_not): Use wget_aprintf() and simplify the code

2017-06-12 Akash Rawal <argmlac@gmail.com>

     Add command line option forwarding for plugins
     
     * include/wget/wget.h: Add API for command line option forwarding
     * libwget/plugin.c: Likewise
     * libwget/test_linking: Add function from libwget/plugin.c
     * src/dl.c: Remove unused dl_search1() and dl_list1(),
                 use wget_vector_t for pointer arrays
     * src/wget_dl.h: Likewise
     * src/plugin.c: Implement option forwarding
     * src/wget_plugin.h: Likewise
     * src/options.c: Add options '--plugin-opt=', '--plugin-help'
     * unit-tests/test-dl.c: Use dl_list() instead of dl_list1()
     * tests/Makefile.am: Add test plugins pluginoption, pluginfaulty1,
                          pluginfaulty2
     * tests/test-plugin-dummy.c: Implement additional test plugins
     * tests/test-plugin.c: Extend tests for testing option processing
     
     Command line option forwarding has been implemented as per
     specifications at https://gitlab.com/akash_rawal/wget2/wikis/Stage-1
     
     Several style issues were also fixed (Thanks Ander Juaristi)

2017-07-19 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c : Push 'invert' handling from set_long_option() to parse functions
     * src/options.c : Make --mirror boolean
     * src/options.c (parse_proxy): Modify --proxy to have behavior described below:
                                    1) --proxy is boolean which means inherit proxies from environment
                                    2) --no-proxy is boolean which means don't inherit proxies from environment
                                    3) --proxy=<addrs> sets http_proxy and https_proxy to <addrs> (shorthand!)
                                    4) --no-proxy=<addrs> makes wget2 to not use proxy while dealing with <addrs>

2017-07-19 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c (set_long_option): Check if opt->var is NULL before accessing *(opt->var)

2017-07-19 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c (set_long_option): Allow empty string i.e. "" to be argument of an option
     * src/options.c (parse_bool): If value is an empty string then set opt->var to 0

2017-07-19 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c (opt_compare_config_linear): Skip '_' or '-' from s1 only if there is '-' or '_' in s2
     * src/options.c (set_long_option): Invert value for boolean option with the prefix --no- even if the
     option argument is false/0/off e.g. --no-cache=off
     * src/options.c (set_long_option): For long options with value separated by '=', treat empty string("") argument
     as if no argument was given

2017-07-17 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c (set_long_option): Remove linear search
     
     * src/options.c (_parse_option): Accept command with '_' char e.g. http_proxy
     * src/options.c (set_long_option): Remove unnecessary linear search
     * src/options.c (set_long_option): options are case-, underscore- and minus-insensitive.

2017-07-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add -fdiagnostics-color only for gcc >= 5

2017-07-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Add libwget_html_url_fuzzer
     
     * fuzz/Makefile.am: Add libwget_html_url_fuzzer
     * fuzz/libwget_html_url_fuzzer.dict: Add dictionary
     * fuzz/libwget_html_url_fuzzer.in/*: New copora

2017-07-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib

2017-07-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "* libwget/http_parse.c (wget_http_print_date): Fix gmtime crash with Wine"
     
     This reverts commit 11d413476bac87d9315727f8ce127e7acdde2066.
     This has been fixed by gnulib.

2017-07-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "* src/log.c (_write_out): Fix localtime crash with Wine"
     
     This reverts commit e7c78f2e3049c6f862ed06da4424a5b2980ed616.
     This has been fixed by gnulib.

2017-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Use pkg-config to find libidn2 config

2017-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Use FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION from oss-fuzz
     
     * fuzz/Makefile.am: Remove -DTEST_RUN from AM_CPPFLAGS
     * fuzz/main.c: Use #ifndef FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION

2017-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for fuzzer build in helper scripts
     
     * fuzz/get_ossfuzz_corpora: Check if fuzzer were build for fuzzing
     * fuzz/run-clang.sh: Likewise

2017-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/get_all_corpora: New script to update oss-fuzz corpora

2017-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/*_fuzzer.in/*: Update fuzzer corpora from oss-fuzz

2017-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix buffer_printf() when char type is unsigned
     
     Sometimes 'char' is not enough. C doesn't specify if it is
     signed or unsigned. Here we had to explicitly use 'signed char'
     instead of 'char'.
     Gcc can be switched to unsigned char with -funsigned-char.
     
     Reported-by: Michael <michael@cyber-dome.com>

2017-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Fix static build of libwget_cookie_fuzzer

2017-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Consolidate response header parsing
     
     * include/wget/wget.h: New prototype wget_http_parse_header_line()
     * libwget/http.c (_on_header_callback): Use wget_http_parse_header_line()
     * libwget/http_parse.c: New function wget_http_parse_header_line(),
       (wget_http_parse_response_header): Use wget_http_parse_header_line()
     
     We had doubled code for HTTP/1.1 and HTTP/2 response header parsing.
     Now merged into one function.
     
     Reported-by: Avinash Sonawane

2017-07-10 Akash Rawal <argmlac@gmail.com>

     Fix broken Travis-CI builds
     
     * .travis.sh: Print fuzz/test-suite.log on failure
     * .travis.yml: Install libunistring-dev

2017-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Add password parsing to wget_iri_parse()
     
     * libwget/iri.c (wget_iri_parse): Find and set password
     * unit-tests/test.c: Test password parsing

2017-07-09 Akash Rawal <argmlac@gmail.com>

     Fix const-correctness issue with wget_iri_clone
     
     * include/wget/wget.h: Add 'const' to wget_iri_clone's parameter
     * libwget/iri.c: Likewise

2017-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/run-clang.sh: Needs bash for ctrl-c handling

2017-07-07 Darshit Shah <darnir@gnu.org>

     Fix recursive downloads when using HTTP2
     
     * src/wget.c (downloader_thread): Ensure that the job->original_url
     field is always set before attempting a download

2017-07-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Set default read timeout to 900s

2017-07-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not use ALPN when not build with HTTP/2 support
     
     * libwget/ssl_gnutls.c (struct _config): Conditionally set .alpn
     * src/options.c (init): Set ALPN string only when build with HTTP/2 support

2017-07-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/log.c (_write_out): Fix localtime crash with Wine

2017-07-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_parse.c (wget_http_print_date): Fix gmtime crash with Wine

2017-07-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Add link libraries to build cookie fuzzer

2017-07-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Disable plugin tests when plugins are disabled
     
     * configure.ac: Add conditional PLUGIN_SUPPORT
     * tests/Makefile.am: Enable plugin testing only if PLUGIN_SUPPORT exists
     * unit-tests/Makefile.am: Likewise

2017-07-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Fix static linking with libidn2

2017-07-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove h2-14 and h2-16 from ALPN
     
     * libwget/ssl_gnutls.c: Remove h2-14 and h2-16 from default ALPN offer
     * examples/http_multi_get.c: Set ALPN to h2,http/1.1
     * src/options.c: Likewise
     
     h2-14 and h2-16 were some HTTP/2 drafts, should not be relevant in
     the real world now.

2017-07-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Fix oss-fuzz target for new cookie fuzzer

2017-07-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Enhance memtohex fuzzer, rename it to utils fuzzer
     
     * Makefile.am: Rename libwget_memtohex_fuzzer to libwget_utils_fuzzer
     * libwget_memtohex_fuzzer.c: Renamed to libwget_utils_fuzzer.c
     * libwget_utils_fuzzer.c: New file
     * libwget_utils_fuzzer.in/*: Test corpora
     * run-clang.sh: Add merge step in ctrl-c handler

2017-06-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_memtohex_fuzzer.c: Add all functions from utils.c

2017-06-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Update fuzzer with latest corpora from oss-fuzz
     
     * fuzz/get_ossfuzz_corpora: Enhance corpora merging
     * fuzz/libwget_*fuzzer.in/*: Updated fuzz corpora

2017-06-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib submodule

2017-06-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Update fuzz corpora from OSS-Fuzz
     
     * fuzz/get_ossfuzz_corpora: New file to download and merge corpora
     * fuzz/*.in/*: New corpora
     * fuzz/run-clang.sh: Updated to work with get_ossfuzz_corpora

2017-06-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Switch MinGW64 build to Debian

2017-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_cert_verify_hpkp): Fix code for GnuTLS < 3.1.3

2017-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Correctly include config.h into css_tokenizer
     
     * libwget/css_tokenizer.lex: Add config.h via %top directive
     * libwget/Makefile.am: Remove sed from make target

2017-06-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c (wget_cookie_parse_setcookie): Avoid maxage integer overflow

2017-06-23 Avinash Sonawane <rootkea@gmail.com>

     *configure.ac: Fix warning about 'AM_PROG_MKDIR_P' macro being deprecated
     * README.md: Update gettext required version

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Increase fuzz coverage for cookie code
     
     * fuzz/libwget_cookie_fuzzer.c: Add more function calls
     * fuzz/libwget_cookie_fuzzer.in/*: Add test corpora

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_xml_parse_buffer_fuzzer.c: Don't hang when readng from stdin

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c (wget_update_file): Fix leak found by fuzzing

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix issues in cookie code found by fuzzing
     
     * libwget/cookie.c (wget_cookie_db_load_psl): Fix memleak when
       psl_load_file() fails,
       (_compare_cookie): Fix strcmp() NULL pointer crash,
       (_wget_cookie_normalize_cookie): Fix memleak

2017-06-22 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c: Fix array index out of bounds runtime error

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Enhance creating of libwget/css_tokenizer.c
     
     * Makefile.am: Remove '<stdout>' special handling in coverage rules
     * libwget/Makefile.am: Generate css_tokenizer.c with proper automake
       macros, prepend include line using sed.

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_xml_parse_buffer_fuzzer.c: Increase fuzz code coverage

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_base64_fuzzer.c: Add coverage for wget.h inline functions

2017-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Let CI create online fuzz coverage report
     
     * .gitlab-ci.yml: Place fuzz coverage report in public area
     * Makefile.am: Use 'make check' in fuzz directory
     * README.md: Add link to fuzz coverage report
     * fuzz/Makefile.am: Remove make target 'fuzz-coverage'
     * fuzz/coverage.sh: Remove file

2017-06-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Add libwget/http_parse.c

2017-06-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_cookie_fuzzer.c: Add forgotten file

2017-06-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_cookie_fuzzer
     
     * fuzz/Makefile.am: Add libwget_cookie_fuzzer
     * fuzz/libwget_cookie_fuzzer.c: New fuzzer
     * fuzz/libwget_cookie_fuzzer.in/*: Corpora
     * fuzz/run-clang.sh: Add -lpsl and -lgnutls

2017-06-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Move parsing from libwget/http.c to libwget/http_parse.c
     
     * libwget/Makefile.am: Add http_parse.c
     * libwget/http.c: Remove parse functions
     * libwget/http_parse.c: New file with parse functions

2017-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_base64_fuzzer
     
     * fuzz/Makefile.am: Add libwget_base64_fuzzer
     * fuzz/libwget_base64_fuzzer.c: New fuzzer
     * fuzz/libwget_base64_fuzzer.in/*: Corpora

2017-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Increase fuzz coverage for bar.c and rss_url.c
     
     * fuzz/libwget_atom_url_fuzzer.c: Add RSS parsing
     * fuzz/libwget_atom_url_fuzzer.dict: Add RSS tags
     * fuzz/libwget_bar_fuzzer.c: Increase fuzz code coverage
     * fuzz/*.in/*: Update corpora

2017-06-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Check slot value in wget_bar_slot_deregister()
     
     * libwget/bar.c (wget_bar_init): Remove redundant xfree()s,
       (wget_bar_slot_downloaded): Check value of 'slot' param

2017-06-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix issues in IRI code found by fuzzing
     
     * include/wget/wget.h: Remove nonnull attribute from wget_iri_compare()
     * libwget/iri.c (wget_iri_clone): Fix possible crashes due to random free(),
       (wget_iri_compare): Check input arguments against NULL,
       (wget_iri_set_scheme): Use string compare instead of pointer compare

2017-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_iri_fuzzer
     
     * fuzz/Makefile.am: Add libwget_sitemap_url_fuzzer
     * fuzz/libwget_iri_fuzzer.c: New fuzzer
     * fuzz/libwget_iri_fuzzer.dict: New dictionary
     * fuzz/libwget_iri_fuzzer.in/*: Corpora

2017-06-15 Ander Juaristi <a@juaristi.eus>

     Fix MinGW compatibility issues
     
      * libwget/buffer_printf.c (_read_precision): do not pass a va_list
        as argument.
        (_read_field_width): likewise.

2017-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_sitemap_url_fuzzer
     
     * fuzz/Makefile.am: Add libwget_sitemap_url_fuzzer
     * fuzz/libwget_sitemap_url_fuzzer.c: New fuzzer
     * fuzz/libwget_sitemap_url_fuzzer.dict: New dictionary
     * fuzz/libwget_sitemap_url_fuzzer.in/*: Corpora
     * fuzz/run-clang.sh: Add -jobs and -workers

2017-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c: Fix param in docs of wget_strglob()

2017-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove nonnnull attribute from functions
     
     * include/wget/wget.h: Remove G_GNUC_WGET_NONNULL from several functions
     * libwget/buffer.c: Add explicit checks for NULL
     * libwget/buffer_printf.c (wget_buffer_vprintf_append): Likewise
     * libwget/net.c: Likewise
     
     The nonnull attribute removes the NULL checks under certain conditions.
     That might turn out as a security flaw.

2017-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c: Avoid calling memcpy with src=NULL

2017-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_css_url_fuzzer
     
     * fuzz/Makefile.am: Add libwget_css_url_fuzzer
     * fuzz/libwget_css_url_fuzzer.c: New fuzzer
     * fuzz/libwget_css_url_fuzzer.dict: New dictionary
     * fuzz/libwget_css_url_fuzzer.in/*: Corpora

2017-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css.c (wget_css_parse_buffer): Fix length calculation

2017-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_atom_url_fuzzer.dict: Remove empty line at EOF

2017-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new fuzzer libwget_atom_url_fuzzer
     
     * fuzz/Makefile.am: Add libwget_atom_url_fuzzer
     * fuzz/libwget_atom_url_fuzzer.c: New fuzzer
     * fuzz/libwget_atom_url_fuzzer.dict: New dictionary
     * fuzz/libwget_atom_url_fuzzer.in/*: Corpora

2017-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add fuzz corpora from OSS-Fuzz
     
     * *.in/*: New copora
     * run-clang.sh: Add needed libraries to fuzzer executables (regression)

2017-06-12 Ander Juaristi <a@juaristi.eus>

     docs: Inline docs for net.c

2017-06-12 Ander Juaristi <a@juaristi.eus>

     docs: Inline docs for IRI/URI API

2017-06-12 Ander Juaristi <a@juaristi.eus>

     docs: Inline docs for buffer and buffer_printf

2017-06-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_add_credentials): Remove debug printf

2017-06-13 Tim Rühsen <tim.ruehsen@gmx.de>

     New options --http-proxy-user and --http-proxy-passord
     
     * docs/wget2_manual.md: Amend description of user/password options
     * docs/wget2_manual.md: Add new param to wget_http_add_credentials()
     * libwget/http.c (wget_http_parse_response_header): Add Proxy-Authenticate
       HTTP header,
       (wget_http_add_credentials): Add Proxy-Authorization HTTP header,
       (_on_header_callback): Add Proxy-Authenticate HTTP header
     * libwget/http_highlevel.c: Amend call to wget_http_add_credentials()
     * src/job.c (job_free): Free proxy_challenges
     * src/options.c: Add --http-proxy-password and --http-proxy-user
     * src/wget.c (process_response_header): Add status code 407,
       (_add_authorize_header): New function,
       (http_create_request): Use _add_authorize_header()
     * src/wget_job.h: Add JOB.proxy_challenges
     * src/wget_options.h: Add config.http_proxy_username and config.http_proxy_password
     * unit-tests/test.c: Amend call to wget_http_add_credentials()

2017-06-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Debug output for certain OCSP warnings

2017-06-11 Akash Rawal <argmlac@gmail.com>

     * src/options.c (set_long_option): Fix behavior for options that don't accept arguments and are not boolean

2017-06-11 Akash Rawal <argmlac@gmail.com>

     Allow setting destructor to keys to wget_stringmap_t
     
     * include/wget/wget.h: Add wget_stringmap_key_destructor_t and
                            wget_stringmap_set_key_destructor() declaration.
     * libwget/stringmap.c: Add wget_stringmap_set_key_destructor()
                            definition.

2017-06-11 Akash Rawal <argmlac@gmail.com>

     Remove rarely used parameter 'off' from wget_hashmap_create()
     
     * libwget/hashmap.c: Remove 'off' parameter, now defaults to -2,
                          Add wget_hashmap_set_growth_policy() to set 'off'
     * include/wget/wget.h: likewise
     * libwget/hpkp.c: Adapt to the change in wget_hashmap_create()
     * libwget/hsts.c: Likewise
     * libwget/netrc.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/stringmap.c: Likewise
     * libwget/test_linking.c: Likewise
     * libwget/tls_session.c: Likewise
     * src/blacklist.c: Likewise
     * src/host.c: Likewise
     * src/wget.c: Likewise

2017-06-11 Avinash Sonawane <rootkea@gmail.com>

     * unit-tests/test.c: Add tests for wget_http_parse_response_header()

2017-06-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix integer overflow in metalink code found by OSS-Fuzz
     
     * fuzz/libwget_metalink_parse_fuzzer.repro/5268760606801920:
       Reproducer from oss-fuzz
     * libwget/metalink.c (_add_piece): Avoid integer overflow

2017-06-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/fuzzer.h: Add extern 'C'

2017-06-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/README.md: Add code coverage section

2017-06-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Add clean-local make target

2017-06-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Increase fuzz coverage of wget_metalink_parse()
     
     * libwget_metalink_parse_fuzzer.c: Call wget_metalink_sort_mirrors()
     * libwget_metalink_parse_fuzzer.dict: Add keywords
     * libwget_metalink_parse_fuzzer.in/xml1: Add content

2017-06-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add script for fast checking of fuzz coverage
     
     * fuzz/view-coverage.sh: New helper script

2017-06-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add more fuzz corpora for wget_xml_parse_buffer()
     
     * fuzz/libwget_xml_parse_buffer_fuzzer.in/*: New files

2017-06-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Increase fuzz coverage for wget_xml_parse_buffer()
     
     * libwget_xml_parse_buffer_fuzzer.c: Increase fuzz coverage
     * libwget_xml_parse_buffer_fuzzer.dict: Add 'style' keyword

2017-06-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Use C instead of C++ for fuzzer targets
     
     * configure.ac: Remove AC_PROG_CXX
     * fuzz/Makefile.am: Amend *_SOURCES for .c fuzzer targets,
       Remove non-portable EXTRA_DIST wildcards,
       Add dist-hook to include fuzzer target files,
       Add oss-fuzz make target.
     * fuzz/fuzzer.h: New file
     * fuzz/*cc: Rename to C, include fuzzer.h
     * fuzz/main.c: Include fuzzer.h
     * fuzz/run-clang.sh: Build and run fuzzer targets made with clang/libFuzzer

2017-06-07 Akash Rawal <argmlac@gmail.com>

     Fix name clashes with gnulib
     
     * tests/test-plugin.c: Rename setenv and unsetenv to setenv_rpl
                            and unsetenv_rpl respectively.
     * unit-tests/test-dl.c: Rename rpl_remove to remove_rpl.
     
     Reported by @gvanem

2017-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/Makefile.am: Remove buffer_printf_perf, stringmap_perf from check_PROGRAMS

2017-06-06 Akash Rawal <argmlac@gmail.com>

     Fix sanitizer builds
     
     * .gitlab-ci.yml: Separate sanitizer build from `make distcheck` and
                       use clang++ as c++ compiler in clang/Fedora build
     * .travis.sh: Use clang++ as c++ compiler if CC=clang and
                   disable sanitizer builds (unstable on Travis-CI)
     * .travis.yml: Add lzip package
     * .travis_setup.sh: Likewise

2017-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove obsolete files from tests/
     
     * tests/buffer_printf_perf.c: Remove
     * tests/stringmap_perf.c: Remove
     
     Reported-by: Gisle Vanem

2017-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Parallel 'make check' for Debian image

2017-05-30 Akash Rawal <argmlac@gmail.com>

     Add basic plugin loading mechanism
     
     * configure.ac: Add configure time tests for plugin support backend.
     * include/wget/wget.h: Add basic plugin API
     * libwget/Makefile.am: Add new file plugin.c to libwget.la
     * libwget/plugin.c: Add plugin API functions (new file)
     * src/Makefile.am: Add new files dl.c, wget_dl.h, plugin.c, wget_plugin.h
                        to wget2
     * src/dl.c: Add abstraction for dynamic loading of object files
     * src/wget_dl.h: Likewise
     * src/plugin.c: Add implementation for loading plugins
     * src/wget_plugin.h: likewise
     * src/options.c: Add options `--plugin=`, `--local-plugin=`,
                      `--plugin-dirs=`, `--list-plugins`
     * src/wget.c: Add function calls to initialize and finalize plugin
                   support system
     * unit-tests/Makefile.am: Add test-dl, libalpha.la, and libbeta.la
     * unit-tests/test-dl.c: Add unit test for src/dl.c
     * unit-tests/test-dl-dummy.c: Likewise
     * tests/Makefile.am: Add test-plugin, libpluginname.la, and
                          libpluginexit.la
     * tests/test-plugin.c: Add tests for plugin support
     * tests/test-plugin-dummy.c: Likewise
     * libwget/test-linking.c: Fix warnings with --enable-manywarnings
     * unit-tests/test.c: likewise
     
     Plugin loading mechanism has been implemented as per specifications
     at https://gitlab.com/akash_rawal/wget2/wikis/Stage-0

2017-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Add test corpora to tarball

2017-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Use dist-lzip instead of dist-xz

2017-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Set CXXFLAGS for --enable-sanitize-... options

2017-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: YAML doesn't like paths starting with */

2017-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add OSS-Fuzz reproducers to test suite
     
     * cfg.mk: Exclude *.repro/* from syntax-check
     * fuzz/Makefile.am: Add *.repro/* to EXTRA_DIST
     * fuzz/libwget_metalink_parse_fuzzer.repro/clusterfuzz-testcase-minimized-5103826937839616:
         Reproducer for OSS-Fuzz issue #1915
     * fuzz/libwget_xml_parse_buffer_fuzzer.repro/clusterfuzz-testcase-minimized-4704516446355456:
         Reproducer for OSS-Fuzz issue #2041
     * fuzz/main.c: Scan and test all files from *.repro/

2017-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xml.c (getScriptContent): Fix read-off-by-one found by OSS-Fuzz (#2041)

2017-06-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Add all .log files to artifacts

2017-06-04 Akash Rawal <argmlac@gmail.com>

     * .travis.sh: Fix printing logs when build fails

2017-06-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile.am: Remove lib/ from include directories

2017-06-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Use fuzz targets as unit tests for 'make check'
     
     * Makefile.am: Add 'fuzz' directory to SUBDIRS,
       tune 'fuzz-coverage' make target,
       print info on how to view coverage report.
     * configure.ac: Add AC_PROG_CXX for C++ code in fuzz/
     * fuzz/Makefile: Removed
     * fuzz/Makefile.am: New file
     * fuzz/libwget_bar_fuzzer.cc: Fix memleak
     * fuzz/main.c: Add code for unit testing
     
     The OSS-Fuzz targets will now be taken for unit testing as well.
     
     That is, they will be tested by 'make check' including our sanitizer
     and valgrind checks. The fuzz tests will be run once with each test
     corpus from the corresponding '.in' directory.
     
     A 'make fuzz-coverage' generates a coverage report for running all
     fuzz targets against their corpora.

2017-06-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/libwget_memtohex_fuzzer.cc: Add two test vectors

2017-06-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add make target 'fuzz-coverage'
     
     * Makefile.am: Add target 'fuzz-coverage' to generate a coverage
       report for fuzz targets.
     * fuzz/Makefile: Add target 'fuzz-coverage'
     * fuzz/coverage.sh: New script to call a fuzz target with each corpus.
     * fuzz/libwget_metalink_parse_fuzzer.cc: Add check for max input length.
     * fuzz/libwget_xml_parse_buffer_fuzzer.cc: Likewise
     * fuzz/libwget_robots_parse_fuzzer.cc: Add comment
     * fuzz/libwget_robots_parse_fuzzer.in/user_agent2: Amend for max coverage
     * fuzz/main.c: selfmade __AFL_LOOP() returns 0 after first invocation.
     * fuzz/libwget_memtohex.in: Rename to fuzz/libwget_memtohex_fuzzer.in
     * fuzz/libwget_metalink_parse.in: Rename to fuzz/libwget_metalink_parse_fuzzer.in
     * fuzz/libwget_robots_parse.in: Rename to fuzz/libwget_robots_parse_fuzzer.in
     * fuzz/libwget_xml_parse_buffer.in: Rename to fuzz/libwget_xml_parse_buffer_fuzzer.in
     * fuzz/libwget_xml_parse_buffer.options: Removed
     * fuzz/libwget_metalink_parse_fuzzer.options: Removed

2017-06-01 Avinash Sonawane <rootkea@gmail.com>

     Use HTTPS url instead of SSH to clone the repo
2017-05-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Move unit tests from tests/ to unit-tests/
     
     * Makefile.am: Add unit-tests
     * cfg.mk: Make syntax-check work with unit-tests/
     * configure.ac: Add unit-tests/Makefile
     * tests/Makefile.am: Remove unit tests
     * unit-tests/Makefile.am: New file with unit test rules
     * unit-tests/*.c: Moved from tests/
     * unit-tests/files: Moved from tests/
     
     unit-tests/ is for library/API unit testing.
     tests/ is for testing wget2 utility.

2017-05-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Enhance fuzz code
     
     * fuzz/*_fuzzer.cc: Use malloc() instead of stack memory to help
       sanitizers.
     * fuzz/libwget_robots_parse.in/user_agent1: Increase code coverage.
     * fuzz/main.c: define __AFL_LOOP() is not already defined.

2017-05-31 Akash Rawal <argmlac@gmail.com>

     Silence GCC warnings
     
     * tests/test.c (test_parser): Replace hardcoded array size with an expression
     * tests/test-parse-html.c (test_parse_files): Likewise

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xml.c (getValue): Fix memleak
     
     Found locally via fuzzing.

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (metalink_parse_localfile): Fix memleak
     
     Found locally via fuzzing.

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c (_metalink_parse): Fix memleak
     
     Found locally via fuzzing.

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     .gitignore: Add generated files from fuzz/ directory

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add two fuzz corpora
     
     * fuzz/libwget_metalink_parse.in/tag1: New file
     * fuzz/libwget_xml_parse_buffer.in/tag1: New file

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix off-by-one read in XML code
     
     * libwget/xml.c (getToken): Fix off-by-one read
     
     Reported-by: oss-fuzz
     https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=1915

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix fuzz minimizing command
     
     * fuzz/README.md: Fix build recipe
     * fuzz/run-afl.sh: Fix check whether to call afl-tmin

2017-05-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * fuzz/Makefile: Forgot to add to repo

2017-05-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add *.options files to fuzzer
     
     * fuzz/libwget_metalink_parse.options: New file
     * fuzz/libwget_xml_parse_buffer.options: New file
     
     Max input len is 64 for OSS-Fuzz, we need larger input for
     some fuzz targets.

2017-05-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Enhance fuzzing
     
     * cfg.mk: Let make-syntax-check survive
     * fuzz/libwget_metalink_parse.dict: New dictionary
     * fuzz/libwget_robots_parse.dict: New dictionary
     * fuzz/libwget_xml_parse_buffer.dict: New dictionary
     * fuzz/libwget_robots_parse.in/disallowed1: Obsolete by afl-cmin
     * fuzz/libwget_robots_parse.in/user_agent3: Likewise
     * fuzz/libwget_xml_parse_buffer.in/index.html: Removed redundant HTML tags
     * fuzz/run-afl.sh: Auto-optimize corpora with afl-tmin

2017-05-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add initial fuzzing code
     
     * fuzz/*: New files
     
     README.md contains instructions how to build and run single fuzzers.
     Currently we have fuzzers and corpora for
       - wget_memtohex()
       - wget_metalink_parse()
       - wget_robots_parse()
       - wget_xml_parse_buffer()
     
     * fuzz/libwget_bar.in/123456: New file

2017-05-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c: Add test_strlcpy to cover wget_strlcpy()

2017-05-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c: Add test for wget_strmemcpy for 100% coverage

2017-05-28 Ander Juaristi <a@juaristi.eus>

     Make wget_buffer_realloc static
     
      * libwget/buffer.c (wget_buffer_realloc): rename to _buffer_realloc,
        and make it static.
        (_buffer_realloc): new function.
     
     This function may overflow if incorrectly used so we make it internal to
     'buffer.c'. All the functions there that rely on it know how to use it
     correctly.

2017-05-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix wget_strmemcpy() and add tests for mem.c
     
     * include/wget/wget.h: Remove nonnull attribute from wget_strmemcpy
     * libwget/mem.c: Check input values for wget_strmemcpy
     * tests/test.c: Add tests for functions of mem.c

2017-05-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Updated contributor list

2017-05-26 Akash Rawal <argmlac@gmail.com>

     * .gitlab-ci.yml: Enable MinGW64 build

2017-05-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix clang -Wconversion warnings
     
     * include/wget/wget.h (wget_ready_2_transfer): Change 'mode' to int
     * libwget/io.c: Likewise
     * libwget/hpkp.c: Explicit int to bit conversion
     * libwget/http.c: Likewise
     * libwget/net.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * tests/libtest.c: Likewise
     * libwget/iri.c (wget_iri_unescape_inline): Explicit int to char conversion
     * libwget/utils.c: Likewise

2017-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Fix CPPFLAGS for libcsstokenizer

2017-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Remove macro warnings

2017-05-22 Didik Setiawan <ds@didiksetiawan.com>

     Add support to save file extended attributes
     
     * configure.ac: Check for xattr availability
     * src/Makefile.am: Add wget_xattr.h
     * src/options.c: Add new config 'xattr',
       (parse_execute): Add new option 'xattr
     * src/wget.c: (_prepare_file): Add condition for 'xattr',
       (http_send_request): Add parameter 'original_url',
       (add_url): Assign 'original_url' with proper value,
       (download_thread): Add variable 'original_url',
       (write_xattr_metadata): New function,
       (set_file_metadata): New function
     * src/wget_job.h: Add variable 'original_url'
     * src/wget_options.h: Add new config 'xattr'
     * src/wget_xattr.h: Add new function declaration 'set_file_metadata',
       Add fsetxattr() if defined in operating system
     
     These attributes provide a lightweight method of later determining
     where a file was downloaded from. Adapted from Wget 1.x.
     
     This patch changes:
     *   autoconf detects whether extended attributes are available and
         enables the code if they are.
     *   The new flags --xattr and --xattr=no control whether xattr is enabled.
     *   The original and redirected URLs are recorded as shown below.
     *   This works for both single fetches and recursive mode.
     
     The attributes that are set are:
     user.xdg.origin.url: The URL that the content was fetched from.
     user.xdg.referrer.url: The URL that was originally requested.
     user.mime_type: Two-part identifier for file formats and format contents.
     user.charset: File encoding.
     
     For example, where http://lwn.net redirects to https://lwn.net:
     $ wget2 --xattr http://lwn.net
     ...
     $ getfattr -d index.html
     user.charset:"UTF-8"
     user.mime_type:="text/html"
     user.xdg.origin.url="https://lwn.net/"
     user.xdg.referrer.url="http://lwn.net/"

2017-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix build for non-Windows envs without poll()
     
     * bootstrap.conf: Add module msvc-nothrow
     * libwget/io.c: Include msvc-nothrow.h on _WIN32,
       (wget_ready_2_transfer): Fix code for non-Windows envs

2017-05-24 Tim Rühsen <tim.ruehsen@gmx.de>

     MinGW cleanup
     
     * include/wget/wget.h: Add const to first param of wget_restrict_file_name
     * libwget/utils.c: Likewise
     * tests/libtest.c: Remove debug output, start/stop ftp server thread,
       popen() without 'b'.
     * tests/test-iri.c: Skip test on _WIN32

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix more tests for MinGW build
     
     * include/wget/wget.h: Fixed indentation
     * tests/libtest.h (wget_test_file_t): Add restricted_mode member
     * tests/libtest.c (_scan_for_unexpected): Respect 'restricted_mode' value,
       (wget_test): Likewise.
     * test-iri-percent.c: Set WGET_RESTRICT_NAMES_NOCONTROL to expected filename
     * tests/test-iri.c: Likewise
     * tests/test-iri-subdir.c: Skip test on Windows build

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/mingw: Fix WINEPATH and ./configure options

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (_get_header): Restrict file name from Content-Disposition

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c (wget_restrict_file_name): Explicitely use signed char

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix test-directory-clash on MinGW+Wine
     
     * ../src/wget.c (_prepare_file): Check for EACCESS in unique loop
     
     Reported-by: Akash Rawal

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (wget_test): Sync output streams to avoid garbled output

2017-05-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Make _restrict_file_name() public as wget_restrict_file_name()
     
     * include/wget/wget.h: Add wget_restrict_file_name() declaration,
       add WGET_RESTRICT_* defines.
     * libwget/utils.c: Add wget_restrict_file_name() definition.
     * src/options.c (parse_restrict_names): Use WGET_RESTRICT_*,
       default to WGET_RESTRICT_NAMES_WINDOWS in _WIN32.
     * src/wget.c: Remove restrict_file_name(),
       (get_local_filename): Use wget_restrict_file_name().
     * src/wget_options.h: Remove RESTRICT_NAMES_* defines.
     * tests/libtest.c (_scan_for_unexpected): Use wget_restrict_file_name(),
       (wget_test): Use wget_restrict_file_name().
     
     Reported-by: Akash Rawal

2017-05-22 Akash Rawal <argmlac@gmail.com>

     Disabled /dev/full test on non-linux systems
     
     * tests/test-wget-1.c: Test full disc only if __linux__ is defined

2017-05-22 Akash Rawal <argmlac@gmail.com>

     Fix detecting directories on _WIN32
     
     * src/wget.c (_prepare_file): Check for dir on errno = EACCES
     
     _WIN32 set errno=EACCES on open(<directory>) while Linux sets
     errno=EISDIR.

2017-05-22 Akash Rawal <argmlac@gmail.com>

     Fix test--accept.c and test--follow-tags.c on Win32
     
     * tests/test--accept.c: Use " instead of ' on command line
     * tests/test--follow-tags.c: Remove unneeded ' on command line
     
     Win32 doesn't like 'xxx' on the command line, wants "xxx".

2017-05-20 Akash Rawal <argmlac@gmail.com>

     * tests/libtest.c (_write_msg): Flush stderr
     
     Without flushing, the output messages are garbled on
     MinGW / Win32 builds.

2017-05-22 Akash Rawal <argmlac@gmail.com>

     Fix select() for _WIN32
     
     * libwget/io.c: Include io.h and winsock2.h,
       use OS socket descriptor for select()

2017-05-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c: Start/Stop HTTPS server again

2017-05-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Open files in binary mode where needed
     
     * examples/websequencediagram.c: Use binary mode on file open
     * libwget/css.c: Likewise
     * libwget/hashfile.c: Likewise
     * libwget/http_highlevel.c: Likewise
     * libwget/io.c: Likewise
     * libwget/xml.c: Likewise
     * src/job.c: Likewise
     * src/options.c: Likewise
     * src/wget.c: Likewise
     * tests/libtest.c: Likewise
     * tests/stringmap_perf.c: Likewise
     
     This fixes discrepancies between stat/st_size and read bytes on
     MinGW / Wine / Windows.

2017-05-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Let test suite finish with MinGW + Wine
     
     * contrib/mingw: Amend the MinGW recipe
     * libwget/io.c (wget_ready_2_transfer): Wait 10ms before select() on MinGW
     * tests/libtest.c: Make 'terminate' a volatile sig_atomic_t.
       (_http_server_thread): Add debug output.
       (_empty_directory): Fix recursive removing directories.
       (wget_test_stop_server): Use wget_thread_cancel() instead of
         pthread_kill() + wget_thread_join().

2017-05-17 Akash Rawal <argmlac@gmail.com>

     * tests/libtest.c: Remove stray EXEEXT from the command line construction

2017-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Use convenience library to avoid unused macro warnings

2017-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Remove explicit 'make syntax-check'

2017-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Add 'make syntax-check' to 'make check'

2017-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove nonnull attribute from some functions
     
     * include/wget/wget.h: Remove nonnull attribute from some functions
     * libwget/encoding.c: Add explicit checks for NULL
     * libwget/io.c: Likewise
     * libwget/pipe.c: Likewise
     * libwget/strlcpy.c: Likewise
     * libwget/utils.c: Likewise

2017-05-12 Gianluca Varisco <gianluca.varisco@gmail.com>

     * README: Fixed typo "Accept-Encdoing" -> "Accept-Encoding"

2017-05-12 Akash Rawal <argmlac@gmail.com>

     Remove redundant VGSUPPFILE macro
     
      * tests/Makefile.am: Remove VGSUPPFILE macro from libtest.la
      * tests/libtest.c: Replace VGSUPPFILE with an expression using SRCDIR

2017-05-03 Vijo Cherian <codervijo@gmail.com>

     Moved help strings into options structure
     
     * src/options.c: New enum help_section_t,
       new functions print_first() and print_next(),
       moved all help strings to struct options.
     
     Print help strings such that it fits in 80 columns

2017-05-03 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c (set_long_option): Remove redundant bsearch call

2017-05-03 Avinash Sonawane <rootkea@gmail.com>

     * libwget/http.c: Reorder switch cases in ascending order

2017-05-03 Avinash Sonawane <rootkea@gmail.com>

     * libwget/http.c: Implement Wayback Machine's X-Archive-Orig-last-modified HTTP header

2017-05-03 Akash Rawal <argmlac@gmail.com>

     Make wget_http_connection_t an abstract type
     
      * include/wget/wget.h: Convert wget_http_connection_t to forward declaration
      * libwget/http.h: Move wget_http_connection_t definition here
      * libwget/Makefile.am: Add new file http.h
      * libwget/http.c: Include http.h and add accessor functions
      * libwget/http_highlevel.c: Include http.h
      * src/wget.c: Replace access to wget_http_connection_t with accessor function calls

2017-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xalloc.c: Satisfy syntax-check

2017-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/getstream.c (header_callback): Use wget_malloc() instead of malloc()

2017-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new function wget_free()
     
     * examples/check_url_types.c: Use wget_xfree() instead of free()
     * examples/http_get2.c: Likewise
     * examples/print_css_urls2.c: Likewise
     * examples/print_html_urls.c: Likewise
     * include/wget/wget.h: Add wget_free() and define wget_xfree()
     * libwget/xalloc.c: Implement wget_free()
     
     * include/wget/wget.h: Add declaration for wget_free()
     * libwget/xalloc.c: Implement wget_free()

2017-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Enable syntax-check

2017-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Remove trailing whitespace

2017-05-02 Avinash Sonawane <rootkea@gmail.com>

     * tests/libtest.c: Use --no-proxy for wget2 invocation in test-suite

2017-05-02 Avinash Sonawane <rootkea@gmail.com>

     Implement `--proxy` switch to import env proxy vars
     
     * src/wget_options.h: Add `--proxy` option
     * src/options.c(init): Import env proxy var by default and only if no
       corresponding proxy variable is specified on command-line

2017-05-03 Akash Rawal <argmlac@gmail.com>

     * src/options.c: Implement optional arguments and separate handling for --no-<option>

2017-05-02 Tim Rühsen <tim.ruehsen@gmx.de>

     *libwget/strlcpy.c: Fix wget_strlcpy on OSX / BSD

2017-05-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename strlcpy to wget_strlcpy
     
     * include/wget/wget.h: Rename and remove gnulib deps.
     * libwget/strlcpy.c: Rename function and fall back to strlcpy.
     * */*.c: Rename strlcpy to wget_strlcpy.

2017-05-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend --http-proxy and --https-proxy behavior
     
     * libwget/http.c (_parse_proxies): Alloc vector on demand
     * src/options.c (wget_http_set_http_proxy): Return # of proxies
       successfully parsed,
       (wget_http_set_https_proxy). Likewise.
     * src/options.c (init): Empty and undefined proxy variable is the same.
     * tests/test.c (test_set_proxy): Amend tests.

2017-05-02 Avinash Sonawane <rootkea@gmail.com>

     Remove unnecessary `while` loop & add test
     
     * libwget/http.c (_parse_proxies): Remove non-required `while`
     * tests/test.c (test_set_proxy): Add test with leading whitespaces

2017-05-01 Avinash Sonawane <rootkea@gmail.com>

     Add tests for wget_http_set_http(s)_proxy() functions
     
     * tests/test.c (test_set_proxy): Add tests for wget_http_set_http_proxy()
     * tests/test.c (test_set_proxy): Add tests for wget_http_set_https_proxy()
     * libwget/http.c (wget_http_set_http_proxy): Return length of http_proxies if no parse error
     * libwget/http.c (wget_http_set_https_proxy): Return length of https_proxies if no parse error

2017-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Remove WIN32 futimens() implementation
     
     The newest gnulib brings WIN32 futimens().

2017-05-01 Tim Rühsen <tim.ruehsen@gmx.de>

     *gnulib: Update

2017-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix syntax-check 'sc_prohibit_have_config_h'
     
     * cfg.mk: Remove sc_prohibit_have_config_h from local-checks-to-skip
     * libwget/*.c: Include <config.h> unconditionally
     * src/*.c: Likewise
     * tests/*.c: Likewise

2017-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove useless parens (syntax-check)
     
     * include/wget/wget.h: Remove useless parens
     * libwget/ssl_gnutls.c: Likewise

2017-04-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove gnulib dependencies from examples and wget.h
     
     * cfg.mk: Add examples as excludes for config.h
     * examples/Makefile.am: Remove -I to srcdir and builddir
     * examples/*.c: Remove #include <config.h>
     * include/wget/wget.h: Remove gettext include and defines
     * libwget/private.h: Add gettext include and defines
     * src/wget_main.h: Likewise
     * tests/libtest.h: Likewise
     * src/log.c: Add #include <string.h>

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * cfg.mk: New file with rules for 'make syntax-check'

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove useless cpp parens (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove trailing whitespaces (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix space-tab sequences (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Satisfy sc_require_config_h (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * bootstrap: Update to version 19

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove == from scripts (syntax-check)
     
     * .travis.sh: == -> =
     * .travis_setup.sh: Likewise
     * contrib/gen_option_diff.sh: Likewise

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not include unused strings.h
     
     * examples/getstream.c: Remove #include <strings.h>
     * libwget/css.c: Likewise
     * libwget/encoding.c: Likewise
     * libwget/hashfile.c: Likewise
     * libwget/metalink.c: Likewise
     * libwget/net.c: Likewise
     * libwget/robots.c: Likewise
     * src/wget.c: Likewise

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Use EXIT_SUCCESS (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Remove double colons (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: Update (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Spell filesystem 'file system' (syntax-check)
     
     * docs/wget2_manual.md: filesystem -> file system
     * tests/libtest.c: Likewise
     * tests/libtest.h: Likewise
     * tests/test-wget-1.c: Likewise

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Use O_NONBLOCK instead of O_NDELAY (syntax-check)

2017-04-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add --disable-doc / --enable-doc (default)

2017-04-27 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Allocate all memory for progress display together

2017-04-27 Darshit Shah <darnir@gnu.org>

     Prevent tiny memory allocations when globbing
     
     * libwget/utils.c: Rename wget_strnglob to wget_strglob. It now calls
     glob on the entire string.
     * include/wget/wget.h: Change protoype of wget_strnglob
     * src/options.c: Change calls to wget_strnglob to use new wget_strglob
     calls

2017-04-27 Darshit Shah <darnir@gnu.org>

     Improve the benchmark scripts slightly

2017-04-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Add error handler for decompression
     
     * include/wget/wget.h: New functions wget_decompress_set_error_handler()
       and wget_decompress_get_context().
     * libwget/decompressor.c: New functions wget_decompress_set_error_handler()
       and wget_decompress_get_context().
     * libwget/http.c: Implement and set decompressor error handler.

2017-04-13 Michael Heerklotz <michael.heerklotz@check24.de>

     Added a more detailed logging for HTTP errors
     * src/wget.c: More detailed logging for HTTP response code

2017-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Remove double 'help' option

2017-04-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c (wget_str_to_ascii): Fall back to TR46 transitional on error

2017-04-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * .gitlab-ci.yml: Create coverage report and online docs

2017-04-24 Darshit Shah <darnir@gnu.org>

     Updated CI configuration

2017-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Update

2017-04-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add Gitlab CI (Debian)
     
     * .gitlab-ci.yml: New file

2017-04-22 Darshit Shah <darnir@gnu.org>

     * libwget/buffer_printf.c: Cast output of va_arg correctly

2017-04-21 Avinash Sonawane <rootkea@gmail.com>

     * src/options.c (print_version): Remove redundant preprocessor check
2017-04-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --chunk-size with missing Content-Length
     
     * src/wget.c (process_head_response): Don't release job after HEAD
     * tests/libtest.c: Implement WGET_TEST_SERVER_SEND_CONTENT_LENGTH
     * tests/libtest.h: Define WGET_TEST_SERVER_SEND_CONTENT_LENGTH
     * tests/test-wget-1.c: Add new tests for --chunk-size

2017-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/job.c (job_validate_file): Fix --chunk-size for partially existing files

2017-04-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Hide wget_cookie_st
     
     * include/wget/wget.h: Remove struct wget_cookie_st declaration,
       add wget_cookie_to_setcookie(),
       add wget_cookie_parse_setcookie(),
       change wget_http_parse_setcookie() cookie param.
     * libwget/cookie.c: Add struct wget_cookie_st declaration,
       (wget_cookie_init): Use xcalloc(),
       (wget_cookie_to_setcookie): New function,
       (wget_cookie_parse_setcookie): New function,
       (_wget_cookie_normalize_cookie): Fix host_only flag.
     * libwget/http.c (wget_http_parse_setcookie): Code moved to
       wget_http_parse_setcookie(),
       (wget_http_parse_response_header): Amend cookie handling.
     * tests/test.c (test_cookies): Amend test code and test data.

2017-04-17 Darshit Shah <darnir@gnu.org>

     * src/options.c: Handle --version similar to --help

2017-04-18 Michael Heerklotz <michael.heerklotz@check24.de>

     Ignore all anchor links instead of only '#'
     
     * examples/check_url_types.c: Modified _normalize_uri() to ignore all anchor links
     * examples/print_css_urls2.c: Removed check for anchor links
     * src/wget.c: Modified _normalize_uri() and _convert_links() to ignore all anchor links

2017-04-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix spelling issues found by ka7/misspell_fixer
     
     * include/wget/wget.h: Fix typo
     * libwget/base64.c: Likewise
     * libwget/http.c: Likewise
     * src/wget.c: Likewise

2017-04-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Mention 'bash ./bootstrap'

2017-04-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c (wget_memiconv): Treat non-reversible conversion as error

2017-04-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix -c --chunk-size if the file is already complete
     
     * src/wget.c (process_response_header): Check for status 416
     * tests/test-wget-1.c: Added 2 tests

2017-04-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (_body_callback_context): Change size of max_memory and length to 64bit

2017-04-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * benchmarks/bench_https_http*: Add warmup runs

2017-04-13 Michael Heerklotz <michael.heerklotz@check24.de>

     Added settings --cut-url-get-vars and --cut-file-get-vars and fixed --backups
     
     * docs/wget2_manual.md: Added doc for the new settings
     * src/options.c: Fixed --backups and added --cut-url-get-vars and --cut-file-get-vars
     * src/wget.c: Added --cut-url-get-vars and --cut-file-get-vars
     * src/wget_options.h: Added --cut-url-get-vars and --cut-file-get-vars
     * tests/Makefile.am: Added test-cut-get-vars
     * test-cut-get-vars.c: New file

2017-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c (_css_parse_uri): Fix -Wunused-param

2017-04-13 Michael Heerklotz <michael.heerklotz@check24.de>

     Fixed crash in convert-links code introduced with html css parsing
     
     * include/wget/wget.h: Removed unused variable.
     * libwget/html_url.c: Updated code to always return pointer inside "html" variable.
     * test/test-k.c: Updated test to cover the bug.

2017-04-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c: Remove empty _css_parse_encoding()

2017-04-13 Darshit Shah <darnir@gnu.org>

     * libwget/html_url.c: Remove some trailing whitespaces

2017-04-12 Michael Heerklotz <michael.heerklotz@check24.de>

     Added support for html css style tag and attribute
     
     * include/wget/wget.h: Add 'size_t len' to wget_css_parse_buffer()
       and wget_css_get_urls()
     * libwget/css.c (wget_css_parse_buffer): Use yy_scan_bytes() instead
       of yy_scan_string()
     * libwget/css_url.c: Add param to wget_css_get_urls() and
       wget_css_parse_buffer()
     * libwget/html_url.c: Add _css_parse_encoding() and _css_parse_uri(),
       (_html_get_url): Deal with 'style' attribute,
       (wget_html_free_urls_inline): Free url if needed
     * libwget/test_linking.c: Add param to wget_css_parse_buffer()
     * libwget/xml.c (parseXML): Add check for 'style'
     * src/wget.c (css_parse): Add param 'size_t len'
     * tests/Makefile.am: Add new test test-parse-html-css
     * tests/test-parse-html-css.c: New file

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Follow link:rel=preload with --page-requisites
     
     * libwget/html_url.c (_html_get_url): Add rel=preload to be followed
     * tests/test--page-requisites.c: Add a test href for rel=preload

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --page-requisites <link> handling
     
     * libwget/html_url.c: Add helper ctx->uri_index,
       fix "icon shortcut" -> "shortcut icon",
       fix check for "stylesheet"
     * src/wget.c (html_parse): Check for !html_url->link_inline
     * tests/test--page-requisites.c: Add 'not.txt' URL and reference

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add special HTML to test--page-requisites.c
     
     * tests/test--page-requisites.c: Add HTML code
     
     With --page-requisites shortcut icons should not be followed.
     Link with rel="stylesheet" should be followed.

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix progress bar when off_t is 32 bits
     
     * include/wget/wget.h: Amend prototype of wget_human_readable()
     * libwget/bar.c: Use uint64_t instead of off_t
     * libwget/utils.c (wget_human_readable): Change 3rd param off_t -> uint64_t

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/init.c (wget_global_init): Init console

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/console.c (_reset_color): Do not reset color if stdout is not a TTY

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-cut-dirs.c: Add more tests

2017-04-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (_prepare_file): Case-insensitive check for WIN32 NUL file

2017-04-12 Michael Heerklotz <michael.heerklotz@check24.de>

     Fix --cut-dirs
     
     * src/wget.c (get_local_filename): Add / after host part
     * tests/Makefile.am: Add new test 'test-cut-dirs'
     * tests/test-cut-dirs.c: New file

2017-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Add empty line to ChangeLog after date/author

2017-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/libtest.c (_ftp_server_thread): Remove redundant check for WIN64

2017-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/pipe.c: Remove redundant check for WIN64

2017-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix handling of -O /dev/null
     
     * src/wget.c (_prepare_file): Return -2 if filename is /dev/null,
       (http_receive_response): Check outfd for >= 0
     
     Reported-by: Gisle Vanem

2017-04-11 Darshit Shah <darnir@gnu.org>

     Prevent wget2rc from being read during tests
     
     * src/options.c: Treat parse_filename{,s} as string vectors and clear
     them with a no-* command line option
     * tests/libtest.c: Pass --no-config to all the tests by default

2017-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css_tokenizer.lex: Use clang #pragma for -Wshorten-64-to-32

2017-04-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --chunk-size / -O combination
     
     * src/wget.c (process_head_response): Set metalink->name if
       config.output_document is set.
     
     Reported-by: Gisle Vanem
     Fixes: #177

2017-04-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate prettier ChangeLog from git log
     
     * Makefile.am (gen_changelog): Use git log directly without
       additional gnulib tools.

2017-04-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (_prepare_file): Skip saving to '/dev/null' resp. 'NUL' on WIN32

2017-04-10 Avinash Sonawane <rootkea@gmail.com>

     * configure.ac: Add "-fPIC -pie" for Thread sanitizer

2017-04-10 Avinash Sonawane <rootkea@gmail.com>

     * configure.ac: Fix test for asan and tsan being mutually exclusive
     * configure.ac: Fix test for asan and tsan being mutually exclusive
     * configure.ac: Make `./configure --help` document about msan and tsan being mutually exclusive

2017-04-09 Avinash Sonawane <rootkea@gmail.com>

     * configure.ac: Check for msan and tsan being mutually exclusive

2017-04-09 Avinash Sonawane <rootkea@gmail.com>

     * configure.ac: Check for Valgrind and Sanitizers being mutually exclusive
     
     * configure.ac: Check for valgrind and Sanitizers being mutually exclusive
     * configure.ac: Make ./configure --help document above check
     * configure.ac: Make ./configure --help document the existing check of asan and msan

2017-04-08 Darshit Shah <darnir@gnu.org>

     * docs/libwget.doxy: Fix path to libwget header file for documentation

2017-04-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/css_tokenizer.lex: Suppress clang warnings

2017-04-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/check_url_types.c: Fix clang warning

2017-04-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Support TCP Fast Open on OSX via connectx()

2017-04-07 Darshit Shah <darnir@gnu.org>

     * configure.ac: Don't complain when exhaustive switch has default case

2017-04-07 Darshit Shah <darnir@gnu.org>

     *libwget/http.c: Remove unused attribute from used parameters

2017-04-07 Darshit Shah <darnir@gnu.org>

     *libwget/net.c: Silence clang's -Wconditional-uninitialized

2017-04-07 Darshit Shah <darnir@gnu.org>

     src/options.c (parse_command_line): Silence compiler warning for precision loss

2017-04-07 Darshit Shah <darnir@gnu.org>

     * src/log.c: Silence -Wunused-parameter when not on Windows

2017-04-07 Darshit Shah <darnir@gnu.org>

     * configure.ac: Prevent some useless clang warnings

2017-04-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_open): Disable push for HTTP/2 connections

2017-04-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "* libwget/net.c: Silence -Wundef if TCP_FASTOPEN is undefined"
     
     This reverts commit 2c17f6fc429f4e1edf78b329ff3509d1ed22f392.

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix libraries to use libtool variables
     
     * examples/Makefile.am: Use $(LTLIBICONV) $(LTLIBINTL) $(LTLIBTHREAD)
     * src/Makefile.am: Likewise
     * tests/Makefile.am: Likewise

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c (wget_get_screen_size): Fix return value

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     gnulib: Update

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Silence -Wbad-function-cast in WIN32 futimens()

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Silence -Wunused-parameter if GnuTLS isn't available

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c: Silence -Wunused-parameter if HAVE_IOCTL is undefined

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Silence -Wundef if TCP_FASTOPEN is undefined

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c: Silence -Wundef from gnulib's hash code

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c: Silence -Wunused-parameter if without LIBPSL

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Silence -Wundef from gnulib's gettext.h

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Reduce warnings from gnulib code

2017-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     gnulib: Update

2017-04-05 Darshit Shah <darnir@gnu.org>

     * .gitignore: Update gitignore file with new tests and examples executables

2017-04-05 Darshit Shah <darnir@gnu.org>

     * src/options.c: Ensure --hpkp-file is tilde expanded as well

2017-04-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix -Wundef warnings
     
     * libwget/decompressor.c: #if -> #ifdef
     * libwget/http.c: Likewise
     * libwget/net.c: Likewise
     * src/wget.c: Likewise

2017-04-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * m4/wget_manywarnings.m4: Fix for MinGW

2017-04-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Remove -Wformat when cross-compiling

2017-04-05 Darshit Shah <darnir@gnu.org>

     * src/options.c: Add hpkp-file to output of wget2 --help

2017-04-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Only read 'no_proxy' if proxy settings exist

2017-04-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Add support for 'no_proxy' environment variable
     
     * include/wget/wget.h: Add flag 'proxied' to wget_http_connection_t,
       add arg 'proxied' to wget_http_request_to_buffer(),
       add new function declaration wget_http_set_no_proxy(),
       add new function declaration wget_http_match_no_proxy().
     * libwget/http.c: Add variable 'no_proxies',
       (wget_http_open): Check host against 'no_proxy' and set 'conn->proxied'
       when appropriate,
       (wget_http_send_request): Call wget_http_request_to_buffer() with
        conn->proxied,
       (wget_http_request_to_buffer): Check 'proxied',
       (_parse_proxies): Cleanup,
       (_parse_no_proxies): New function,
       (wget_http_set_no_proxy): New function,
       (wget_http_match_no_proxy): New function
     * libwget/init.c (wget_global_deinit): Free no_proxy memory
     * libwget/ip.c: Add code in comments (for later use)
     * libwget/utils.c (wget_match_tail, wget_match_tail_nocase): Cleanup
     * src/options.c (init): Handle 'no_proxy' env variable
     * src/wget_options.h (struct config): Add no_proxy member

2017-04-04 Didik Setiawan <ds@didiksetiawan.com>

     Fix illegal memory access when parsing null-terminated string

2017-03-28 Didik Setiawan <ds@didiksetiawan.com>

     * tests/test.c: Add wget_robots_parse unit test

2017-04-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Add futimens() implementation for _WIN32
     
     * src/wget.c: Add futimens() if _WIN32 is defined
     
     Reported-by: Gisle Vanem
     Fixes: #167

2017-04-04 Avinash Sonawane <rootkea@gmail.com>

     Use time_t instead of long
     
     * include/wget/wget.h : Use time_t instead of long
     
     Reported-by : Gisle Vanem

2017-04-04 Avinash Sonawane <rootkea@gmail.com>

     Use https:// instead of git://
     
     * .gitmodule: Use https:// instead of git:// to support proxy environments
2017-04-02 Akash Rawal <argmlac@gmail.com>

     * libwget/http.c: Avoid signed integer overflow due to intermediate ptrdiff_t by casting operands to uintptr_t

2017-03-31 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add section about clang's CFI

2017-03-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-metalink.c: Free allocated memory to satisfy leak sanitizer

2017-03-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --enable-fsanitize-msan for gcc
     
     * configure.ac: Add -fsanitize=leak if available

2017-03-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix logical operator in brotli code
     
     * libwget/decompressor.c (brotli_decompress): Fix expression
     
     Reported-by: Coverity Scan (cid: 165234)

2017-03-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix possible NULL ptr dereference
     
     * src/wget.c (process_response): Check value for wget_metalink_parse()
     
     Reported-by: Coverity Scan (cid: 149094)

2017-03-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix VPATH issue for test suite
     
     * tests/Makefile.am: Set SRCDIR to $(abs_srcdir)
     * tests/libtest.c: Remove '../' in front of SRCDIR
     * tests/test-i-https.c: Likewise
     
     Reported-by: Akash Rawal

2017-03-29 Akash Rawal <argmlac@gmail.com>

     Fix path of valgrind-suppressions in vpath build
     
     * tests/Makefile.am: For libtests.la, define VGSUPPFILE to absolute path to
       tests/valgrind-suppressions
     * tests/libtest.c: Use VGSUPPFILE macro instead of hardcoded path to
       valgrind-suppressions

2017-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix documentation of wget_vaprintf and wget_aprintf
     
     * libwget/printf.c: Both functions do not return NULL.

2017-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add -Wdeclaration-after-statement to unwanted options (C89 only)

2017-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * m4/wget_manywarnings.m4: Call gcc instead of gcc

2017-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * m4/wget_manywarings.m4: Add extra options only for gcc >= 6

2017-03-29 Avinash Sonawane <rootkea@gmail.com>

     Use atoll() instead of atol() for time_t variables
     
     * libwget/cookie.c: Use atoll() instead of atol()
     * libwget/hsts.c: Likewise
     * libwget/http.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/tls_session.c: Likewise
     * libwget/hpkp.c: Change type of maxage from long to time_t

2017-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis.sh: Set CFLAGS to '-O0 -g'

2017-03-29 Avinash Sonawane <rootkea@gmail.com>

     Read and write time_t as long long int
     
     * libwget/cookie.c: Write time_t as long long int
     * libwget/hsts.c:   Likewise
     * libwget/ocsp.c:   Likewise
     * libwget/tls_session.c: Likewise
     * libwget/hpkp.c:   Read and write time_t as long long int
     
     Reported-By: Tim Rühsen

2017-03-28 Darshit Shah <darnir@gnu.org>

     Prevent a NULL pointer dereference
     
     * src/options.c (parse_header): Prevent derefencing a potential NULL
     pointer
     
     Reported-by: Coverity Scan (cid: 165230)

2017-03-28 Darshit Shah <darnir@gnu.org>

     Fix resource leak
     
     * libwget/http.c (_on_header_callback): Prevent leaking memory when
     there is an empty HTTP2 response
     
     Reported-by: Coverity Scan (cid: 165231)

2017-03-28 Darshit Shah <darnir@gnu.org>

     Prevent resource leak
     
     * src/wget.c (_normalize_uri): Prevent leaking resource urlpart when the
     url is just "#".
     
     Reported-by: Coverity Scan (cid: 165232)

2017-03-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Skip IDNA tests when IDNA not available
     
     * libwget/encoding.c: Fix #ifdef
     * tests/test-idn-cmd.c: Skip if IDNA not available
     * tests/test-idn-meta.c: Likewise
     * tests/test-idn-robots.c: Likewise
     * tests/test.c (test_iri_parse): Skip IDN test

2017-03-25 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/check_url_types.c: Move #include <signal.h> further to the top

2017-03-26 Akash Rawal <argmlac@gmail.com>

     Fix vpath builds
     
     * examples/Makefile.am: Add -DWGETVER_FILE to AM_CPPFLAGS
     * libwget/Makefile.am: Likewise
     * src/Makefile.am: Likewise
     * tests/Makefile.am: Likewise
     * include/wget/wget.h: Include WGETVER_FILE if defined

2017-03-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix regression regarding chunked transfer-encoding
     
     * libwget/http.c (wget_http_get_response_cb): Save data when chunk
       complete in one data packet.
     * tests/Makefile.am: Add new test 'test-chunked'
     * tests/test-chunked.c: New test

2017-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c: Include idn-free.h on _WIN32

2017-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xalloc.c (wget_calloc): Init *p explicit (_noreturn issue)

2017-03-23 Gisle Vanem <gvanem@yahoo.no>

     * libwget/xalloc.c (wget_realloc): Initialize variable p to NULL

2017-03-23 Avinash Sonawane <rootkea@gmail.com>

     Fix misuse of libidn & libidn2 memory
     
     * libwget/encoding.c (wget_str_to_ascii):
       Free libidn memory with idn_free(),
       Free libidn2 memory with idn2_free()

2017-03-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix chunk overflow in HTTP download for 32bit systems
     
     * libwget/http.c: Check for pointer overflow
     * tests/test-bad-chunk.c: Adjust tests
     
     Reported-by: Dagobert Michelsen

2017-03-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/random.c: Include process.h on Windows

2017-03-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix console colors for Windows
     
     * include/wget/wget.h: Add WGET_CONSOLE_COLOR_MAGENTA
     * libwget/console.c: Add WGET_CONSOLE_COLOR_MAGENTA
     * src/log.c: Add colors to write functions
     
     Reported-by: Gisle Vanem

2017-03-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/html_url.c (_html_get_url): Fix commented info_printf line

2017-03-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Do not include wordexp.h

2017-03-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/console.c (wget_console_set_fg_color): Fix WIN32 code

2017-03-21 Tim Rühsen <tim.ruehsen@gmx.de>

     NEWS: Mention brotli compression support

2017-03-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Use IDNA2008 + TR46 non-transitional for IRIs
     
     * libwget/encoding.c: Fix unistring includes,
       (wget_str_to_ascii): Check for libidn2 version
     * src/options.c (init): Remove "unistring" output for --version

2017-03-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-k.c: Test link within <script> tag

2017-03-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Update AUTHORS and NEWS

2017-03-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Check NULL value param in wget_iri_escape()
     
     * include/wget/wget.h: Remove G_GNUC_WGET_NONNULL_ALL from wget_iri_escape
     * libwget/iri.c (wget_iri_escape): Check 'src' for NULL value

2017-03-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/check_url_types.c (html_parse): Fix possible crash

2017-03-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for invalid 'BASE' URLs in HTML
     
     * src/wget.c (html_parse): Check if 'base' parses correctly
     * tests/test-base.c: Add test with invalid base URL

2017-03-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/tls_session.c: Make code similar to hsts.c

2017-03-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c: Make code similar to hsts.c

2017-03-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hsts.c: Be compliant with Wget 1.x

2017-03-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (wget_hpkp_db_add): NULLify freed pointer

2017-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Improve msg for invalid OCSP stapling status

2017-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix .netrc parsing
     
     * include/wget/wget.h (_wget_netrc_db_st): Rename .key to .host
     * libwget/netrc.c (wget_netrc_db_add): Fix parsing
     * tests/test.c: New function test_netrc()

2017-03-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (process_response_header): Fix formatting

2017-03-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_verify_certificate_callback): Use GnuTLS error printing

2017-03-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (_hpkp_db_load): Fix parsing host entries

2017-03-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c: Remove call of wget_hpkp_set_port()

2017-03-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove port from HPKP code
     
     * include/wget/wget.h: Remove wget_hpkp_set_port()
     * libwget/hpkp.c (struct _wget_hpkp_st): Remove 'port'
     * src/wget.c (process_response_header): Do not call wget_hpkp_set_port()

2017-03-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add examples/check_url_types.c
     
     * examples/Makefile.am: Add rule for examples/check_url_types
     * examples/check_url_types.c: New file
     
     This adds a Alexa top-X scanner to find out the numbers of
     http:// links in landing pages retrieved via https://.
     It follows and counts redirections separated by secure and insecure
     ones, flags if the landing page was completely secure, counts links
     in the landing HTML page (same-page, external, http, https).

2017-03-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http_highlevel.c (wget_http_get): Do not loop forever on repeating 401 responses

2017-03-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_verify_certificate_callback): Fix #ifdefs

2017-03-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix crash on unexpected server PUSH PROMISE (http/2)
     
     * libwget/http.c (_on_frame_recv_callback): Check for valid context,
       (_on_header_callback): Likewise

2017-03-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Allow new 'expires' format for Set-Cookie header
     
     * libwget/http.c (wget_http_parse_full_date): Allow format
       '1 Mar 2027 09:23:12 GMT'
     * tests/test.c (test_cookies): Test new format

2017-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (_on_frame_recv_callback): Fix decompressor init

2017-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/init.c (wget_global_deinit): Free more resources

2017-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix URL encoding issue in requests
     
     * libwget/iri.c (wget_iri_escape_query): Do not escape ampersand,
       (wget_iri_get_escaped_resource): Use wget_iri_escape_query()
     * tests/test-base.c: Add test URLs with spacing in path, query and param

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix URLs to HTTPS where possible

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/websequencediagram_high.c: Use https URLs

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c (wget_http_get_response): Check if body member is set

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/websequencediagram.c: Use HTTPS, fix functionality

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix http to https
     
     * README.md: Fix http to https
     * bootstrap.conf: Likewise
     * configure.ac: Likewise

2017-02-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Exclude some URLs from recursive download with -p.
     
     * include/wget/wget.h: Add link_inline to WGET_HTML_PARSED_URL
     * libwget/html_url.c: Add link_inline to _html_context_t,
       (_html_get_url): Set ctx->link_inline
     * src/wget.c (html_parse): Exclude action and formaction URLs,
       exclude certain 'link' URLs from download

2017-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Mention HPKP and brotli support

2017-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Add brotli decompression, Accept-Encoding 'br'

2017-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * wget.c (_css_parse_uri): Fix previous commit

2017-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     * wget.c (_css_parse_uri): Fix charset conversion for CSS parsing

2017-02-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix charset conversion for HTML parsing
     
     * src/wget.c: New helper function _normalize_uri()
       (sitemap_parse_text): Check size before allocating stack space
     * tests/Makefile.am: Add test-iri-subdir
     * tests/test-iri-subdir.c: Add new test

2017-02-23 Tim Rühsen <tim.ruehsen@gmx.de>

     *src/wget.c,src/wget_main.h: Include wget.h in wget_main.h

2017-02-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Restore --config being a list of filenames
     
     * src/options.c: New functions parse_stringlist_expand(),
       parse_filenames().
       Use parse_filenames() for --config / --config-file.

2016-12-03 Darshit Shah <darnir@gnu.org>

     Support tilde expansion of filenames from wgetrc
     
     * src/options.c (_shell_expand): New function to perform tilde
     expansion on a given string
     (parse_filename): Parse the input string and perform shell expansion on
     it using _shell_expand
     (parse_string): Set the parser functions for various options that may be
     set from a config file to use parse_filename
     (wget_strnglob): Run glob() on only the specified part of the string

2017-02-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Print headers before body with -S

2017-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     HPKP: Drop/reject expired entries on save/load
     
     * libwget/hpkp.c: Check max_age on load/save.

2017-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove HPKP entries with zero PINs
     
     * libwget/hpkp.c (wget_hpkp_db_check_pubkey): Fix subdomain default,
       (wget_hpkp_db_add): Remove entry on zero PINs
     * src/wget.c: Remove comment line
     * tests/test.c (test_hpkp): Test this feature

2017-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (_cert_verify_hpkp): Fix for GnuTLS < 3.1.3

2017-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix memleak in HPKP
     
     * include/wget/wget.h: Changed declaration of wget_hpkp_free()
     * libwget/hpkp.c: Use wget_hpkp_free() as destructor function
     * libwget/http.c (wget_http_free_hpkp_entries): Amended
     * tests/test.c: Fix typos

2017-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/certs/README: Add info on how to create pin-sha256 values for HPKP

2017-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c: Add unit testing for HPKP

2017-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (_wget_hpkp_compare_pins): Implement 'includeSubDomains'

2017-02-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (wget_hpkp_set_host): Free host before assignment

2017-02-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Implement HPKP checking
     
     * include/wget/wget.h: Add function wget_hpkp_db_check_pubkey(),
       add WGET_SSL_HPKP_CACHE
     * libwget/hpkp.c: Implement wget_hpkp_db_check_pubkey()
     * libwget/ssl_gnutls.c: Implement and use _cert_verify_hpkp()
     * src/options.c (init): Set WGET_SSL_HPKP_CACHE

2017-02-17 Tim Rühsen <tim.ruehsen@gmx.de>

     HPKP API redesign

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Fix position of hpkp options in array

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (wget_hpkp_db_load): Fix -Wformat=

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (init): Fix calls of wget_str_asprintf()

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     libwget/hpkp.c (wget_hpkp_db_load): Fix -Wsign-compare

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix HPKP function declarations

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c: Fix signed/unsigned format warnings

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hpkp.c (wget_hpkp_new): Fix -Wold-style-definition

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Use WGETAPI for hpkp function declarations

2017-01-09 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: version the HPKP file, for the future
     
      * libwget/hpkp.c (wget_hpkp_db_save): write the version number
         (wget_hpkp_db_load): check the version number == 1
2017-01-09 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: Check file is regular or symlink
     
      * libwget/hpkp.c (wget_hpkp_db_save): check if file is regular or symlink. If symlink, resolve it since unlink(2) does not follow symlinks.
2017-01-08 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: Fix memory leaks
     
      * src/wget.c (main, process_response_header): add debug traces
      * libwget/http.c (wget_http_parse_public_key_pins): fix memory leaks
      * libwget/hpkp.c (__wget_hpkp_free, wget_hpkp_db_load): fix memory
        leaks

2017-01-05 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: inline docs

2017-01-05 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: return WGET_HPKP_ENTRY_EXISTS

2017-01-04 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: Define return values.

2017-01-04 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: use vector rather than linked list for b64 pins

2016-12-28 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: add log traces + fix bugs
     

2016-12-27 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: hpkp complete
     

2016-12-13 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: fix wget_hpkp_db_save()
     
      * src/wget.c (main): call wget_hpkp_db_save() at the end (params
        inverted).
      * include/wget/wget.h: export wget_hpkp_db_save().
      * libwget/hpkp.c (__hashtable_browse_cb): fix fprintf format string.
        (wget_hpkp_db_save): check filename is not an empty string.
        (wget_hpkp_db_load): likewise.

2016-12-13 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: new option --hpkp-file
     
      * src/wget_options.h (struct config): new string hpkp_file.
      * src/options.c (struct options): new command-line option --hpkp-file.
        (init): set --hpkp-file default to $HOME/.wget-hpkp.
        (deinit): free config.hpkp_file.
      * src/wget.c (main): call wget_hpkp_db_save() at the end.

2016-12-13 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: new option --hpkp-file
     

2016-12-09 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: functions to load & save the database file
     
      * libwget/hpkp.c (__wget_hpkp_new): new function. NO-OP, NEEDS
        IMPLEMENTATION.
        (__vector_browse_cb): new callback function to browse the vector.
        (__hashtable_browse_cb): new callback function to browse the hash
        table.
        (wget_hpkp_db_save): new function.
        (__wget_hpkp_parse_host_line): new function.
        (__wget_hpkp_parse_pin_line): new function.
        (wget_hpkp_db_load): new function.

2016-11-12 Ander Juaristi <ajuaristi@gmx.es>

     Prototype HPKP functions
     
      * include/wget/wget.h: new public function wget_hpkp_db_init().
      * libwget/hpkp.c: new file.

2016-11-12 Ander Juaristi <ajuaristi@gmx.es>

     Merge from upstream/master
     
     Conflicts: libwget/Makefile.am

2016-11-12 Ander Juaristi <ajuaristi@gmx.es>

     HPKP boilerplate
     
      * libwget/Makefile.am: new file hpkp.c.
      * src/options.c (print_help, struct options): new command line option '--hpkp'.
        (init): initialize HPKP database with wget_hpkp_db_init().
      * src/wget_options.h (struct config): new handle 'hpkp' to the HPKP
        database.

2016-10-25 Ander Juaristi <ajuaristi@gmx.es>

     HPKP: initial commit

2017-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c (test_buffer): Add more tests

2017-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/buffer.c (wget_buffer_free_data): Set size to 0

2017-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Fix 'make check-coverage'

2017-02-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix memleak in cookie code
     
     * examples/http_get2.c: Use wget_cookie_db_free() to free cookie db
     * libwget/cookie.c (wget_cookie_db_init): Fix #ifdef around PSL code
     * libwget/init.c (wget_global_deinit): Use wget_cookie_db_free()

2017-02-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * contrib/release: Update

2017-02-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add xz archive format

2017-02-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix possible file name truncation
     
     * tests/test-parse-html.c: Increase buffer for filename
     * tests/test.c: Likewise

2017-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     New function wget_logger_is_active()
     
     * include/wget/wget.h: Add prototype
     * libwget/Makefile.am: Add logger.h
     * libwget/log.c: Include logger.h
     * libwget/logger.c: Include logger.h, add wget_logger_is_active()
     * libwget/net.c: Use wget_logger_is_active()
     * libwget/private.h: Remove struct _wget_logger_st

2017-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Use typedefs for function pointer arguments
     
     * include/wget/wget.h: Add typedefs
     * libwget/cookie.c: Use typedefs
     * libwget/css.c: Likewise
     * libwget/css_url.c: Likewise
     * libwget/decompressor.c: Likewise
     * libwget/hashmap.c: Likewise
     * libwget/hsts.c: Likewise
     * libwget/http.c: Likewise
     * libwget/init.c: Likewise
     * libwget/io.c: Likewise
     * libwget/list.c: Likewise
     * libwget/logger.c: Likewise
     * libwget/metalink.c: Likewise
     * libwget/net.c: Likewise
     * libwget/netrc.c: Likewise
     * libwget/ocsp.c: Likewise
     * libwget/private.h: Likewise
     * libwget/robots.c: Likewise
     * libwget/stringmap.c: Likewise
     * libwget/tls_session.c: Likewise
     * libwget/vector.c: Likewise
     * libwget/xml.c: Likewise
     * src/blacklist.c: Likewise
     * src/host.c: Likewise
     * src/options.c: Likewise
     * src/wget.c: Likewise
     * tests/stringmap_perf.c: Likewise
     * tests/test.c: Likewise

2017-01-20 Tim Rühsen <tim.ruehsen@gmx.de>

     base46: Use size_t as string length param

2017-01-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (restrict_file_name): Fix clang warning

2017-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Add typedef for wget_vector_browse() callback function
     
     * include/wget/wget.h: Add typedef wget_list_browse_cb_t
     * libwget/list.c: Use wget_list_browse_cb_t

2017-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Add typedef for wget_update() callback functions
     
     * include/wget/wget.h: Add typedef wget_update_cb_t
     * libwget/cookie.c: Use wget_update_cb_t
     * libwget/hsts.c: Likewise
     * libwget/tls_session.c: Likewise

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     gnulib: Update

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c (wget_ready_2_transfer): Fix INF timeout for select()

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "* .travis_setup.sh: Install graphiz and libidn2 on OSX"
     
     This reverts commit 31c287f2ce90593e493c25581b351d7b944b8ff4.

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * .travis_setup.sh: Install graphiz and libidn2 on OSX

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix search for '-e' commands
     
     * src/options.c (set_long_option): Fallback to unsharp linear search,
       (opt_compare_execute): Amend params.

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Fallback to select() if poll() not available
     
     * bootstrap.conf: Add module select
     * libwget/io.c (wget_ready_2_transfer): Add fallback code

2017-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (http_receive_response): Small code cleanup

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add console color abstraction
     
     * docs/Makefile.am: Add libwget-console.3
     * include/wget/wget.h: Add console routines
     * libwget/Makefile.am: Add libwget/console.c
     * libwget/console.c: New file with console functions
     * src/log.c: Add WIN32 and console function calls

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add function wget_truncate()
     
     * bootstrap.conf: Ad gnulib module ftruncate
     * include/wget/wget.h: Add wget_truncate
     * libwget/io.c: Add wget_truncate
     * src/job.c: Call wget_truncate instead of truncate
     
     The truncate() function is not covered by gnulib.
     wget_truncate() is a wrapper around ftruncate(), which is covered
     by gnulib.

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/stringmap_perf.c: Use wget_malloc if mmap not available

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c (_cookie_db_save): Fix ferror() check
     
     Reported-by: Gisle Vanem

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * gnulib: Update

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/Makefile.am: Add more libs to LDADD

2017-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (downloader_thread): Slow down on connection errors

2017-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Let MSVC compile libwget/init.c (wget_global_init)
     
     Reported-by: Gisle Vanem

2017-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (init): Call wget_net_init()

2017-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove redundant check for _WIN64

2017-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Add network init function to bootstrap sockets on Windows
     
     * bootstrap.conf: Add gnulib module 'sockets'
     * examples/http_get2.c: Call wget_net_init()
     * include/wget/wget.h: Add wget_net_init() and wget_net_deinit()
     * libwget/init.c (wget_global_init): Call wget_net_init(),
       (wget_global_deinit): Call wget_net_deinit()
     * libwget/net.c: Add wget_net_init() and wget_net_deinit()

2016-12-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget_str_[v]asprintf to wget_[v]aprintf
     
     * include/wget/wget.h: Rename wget_str_[v]asprintf to wget_[v]aprintf
     * libwget/http.c: Likewise
     * libwget/iri.c: Likewise
     * libwget/printf.c: Likewise
     * libwget/vector.c: Likewise
     * src/options.c: Likewise
     * tests/test-metalink.c: Likewise

2016-12-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Adjust GnuTLS priorities
     
     * libwget/ssl_gnutls.c (wget_ssl_init): Use system defaults for
       secure_protocol "auto".
       (wget_ssl_open): Set compatibility mode for "auto".

2016-12-21 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/cookie.c (wget_cookie_db_init): Fix argument of psl_latest()

2016-12-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Reduce redundant code by using strchrnul()
     
     * bootstrap.conf: Add gnulib module strchrnul
     * libwget/http.c (_parse_proxies): Remove redundant code
     * libwget/ssl_gnutls.c (wget_ssl_open): Likewise

2016-12-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2_manual.md: Add description for --config-file

2016-12-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Read $SYSTEM_WGET2RC, $WGET2RC and ~/.wget2rc as config file
     
     This patch separates the config files of wget and wget2.
     Config files are read in the order they appear on the command line.
     
     Fixes #132

2016-12-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (parse_stringlist): Remove redundant code

2016-12-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Return a value in dummy wget_thread_cancel()
     
     Reported-by: Gisle Vanem

2016-12-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (process_response): Ignore sitemaps with --page-requisites

2016-12-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c (selftest_options): Clear config.headers before and after use

2016-12-13 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Relax CLI and config file parser regarding spaces

2016-12-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Take advantage of libpsl 0.16+
     
     * libwget/cookie.c (wget_cookie_db_init): Use psl_latest() if possible

2016-12-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-bad-chunk.c: Remove WGET_TEST_KEEP_TMPFILES

2016-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests with bad chunk size in the HTTP response
     
     * tests/Makefile.am: Add test-bad-chunk.c
     * tests/test-bad-chunk.c: New file with 3 tests

2016-12-02 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Ignore Transfer-Encoding for HTTP/2 requests

2016-11-30 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Respect WGETRC and SYSTEM_WGETRC env vars

2016-11-16 Darshit Shah <darnir@gnu.org>

     * docs/wget2_manual.md: Update description of -O

2016-11-16 Darshit Shah <darnir@gnu.org>

     Make the visibiity attribute preceed the prototype
     
     * include/wget/wget.h: Make library symbol export attribute
     ((__visibility__)) preceed the function prototype to work on Windows
     with MSVC
     * tests/libtest.h: Same
     
     Reported-by: Gisle Vanem

2016-11-16 Darshit Shah <darnir@gnu.org>

     Rename LIBWGET_EXPORT to WGETAPI
     
     * include/wget/wget.t: Rename LIBWGET_EXPORT to WGETAPI
     * tests/libtest.h: Same

2016-11-16 Darshit Shah <darnir@gnu.org>

     Export symbols only from wget.h
     
     * libwget/iri.c: Move exporting of symbol wget_iri_schemes from here
     * include/wget/wget.h: To here

2016-11-16 Darshit Shah <darnir@gnu.org>

     Replace x{malloc,calloc} calls with wget_* methods
     
     * include/wget/wget.h: Remove preprocessor definitions for xmalloc,
     xcalloc and xrealloc
     * src/job.c(job_validate_file): Replace xcalloc with wget_calloc
     * src/wget.c(main): Same
     (process_head_response): Same
     (_prepare_file): Same
     (http_send_request): Same

2016-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix integer overflow in ratio calculation
     
     * libwget/bar.c (_bar_update_slot): Fix integer overflow in ratio calculation
     
     Fixes #125

2016-11-15 Darshit Shah <darnir@gnu.org>

     Fix timestamp in If-Modified-Since header
     
     * src/wget.c(http_create_request): Use mtime instead of mtime+1
     
     According to RFC 7238, section 3.3, an origin server may use exact
     timestamp matching to implement conditional requests. Hence, Wget must
     not modify the mtime at all

2016-11-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/bar.c (bar_init): Disable progress bar if threading is not available

2016-11-12 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c (_bar_set_progress): Typecast the right value to integer

2016-11-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Move m4 wget_ functions to m4/
     
     * .gitignore: Add exception m4/wget_manywarnings.m4
     * configure.ac: Remove manywarnings m4 code
     * m4/wget_manywarnings.m4: Add manywarnings m4 code here

2016-11-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Define and use wget_MANYWARNINGS m4 macro

2016-11-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ip.c: Fix syntax error in docs

2016-11-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Use open() instead of creat()
     
     open() is covered by gnulib, creat() not.

2016-11-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Use defines for O_CREAT perms instead
     
     * src/log.c (_write_out): Use S_* defines instead of 0644 for perms
     * src/wget.c (_prepare_file): Likewise

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/thread.c: Add missing wget_thread_cancel() dummy

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * AUTHORS: Update

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c: Include sys/ioctl.h on Windows.
       (_set_async): Use ioctl() instead of ioctlsocket().
     
     Reported-by: Gisle Vanem

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget.h: G_GNUC_WGET_PRINT_FORMAT -> G_GNUC_WGET_PRINTF_FORMAT

2016-11-06 Ander Juaristi <ajuaristi@gmx.es>

     New function to check for literal IPv4/IPv6 addresses
     
     * bootstrap.conf: Add gnulib module 'inet_pton'
     * docs/Makefile.am: Add man page libwget-ip.3
     * wget/wget.h (struct wget_iri_st): New field 'is_ip_address'.
     * libwget/Makefile.am: Add new file ip.c
     * libwget/ip.c: New file defining new function wget_ip_is_family()
     * libwget/iri.c (wget_iri_parse): Check for literal IP address
     * src/wget.c: Do not add to HSTS if literal IP address

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Remove old commented code

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib

2016-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Use gnulib basename
     
     * bootstrap.conf: Add gnulib module 'dirname'
     * libwget/io.c: Use base_name() to get file basename

2016-11-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Fix compilation error

2016-11-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/wget/wget.h: Define empty LIBWGET_EXPORT if LIBWGET_STATIC is defined

2016-11-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/xalloc.c (wget_realloc): Call OOM callback if size is 0

2016-11-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Do not check for munmap()

2016-11-06 Ander Juaristi <ajuaristi@gmx.es>

     New inline function to compute length of base64 decoded string
     
      * include/wget/wget.h (wget_base64_get_decoded_length): new function
      * libwget/tls_session.c (_tls_session_db_load): use
        wget_base64_get_decoded_length().

2016-11-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Use wget_strdup() instead of strdup()
     
     * examples/getstream.c: Use wget_strdup().
     * libwget/cookie.c: Likewise.
     * libwget/encoding.c: Likewise.
     * libwget/http.c: Likewise.
     * libwget/iri.c: Likewise.
     * libwget/netrc.c: Likewise.
     * src/options.c: Likewise.
     * src/wget.c: Likewise.
     * tests/test.c: Likewise.

2016-11-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashmap_old.c: Removed

2016-11-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Understand 'Debian clang' and 'gcc-x.y' for

2016-11-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix gcc/clang warnings from the new manywarnings feature
     
     * configure.ac: Suppress -Wunsuffixed-float-constants for gcc,
       add -Wno-disabled-macro-expansion to clang flags
     * examples/getstream.c: Removed 'unused' attributes from argc and argv.
     * include/wget/wget.h: Fix slot to int for bar functions.
     * libwget/bar.c: Fix slot to int for bar functions, cast to int,
       change type of bitfield 'redraw' to unsigned.
     * libwget/hsts.c (wget_hsts_new): Fix int to bitfield conversion.
     * libwget/http.c: Cast printf %p format to (void *).
     * src/wget.c: Cast printf %p format to (void *),
       remove ACTION_DONE from enum actions.
     * src/wget_host.h: Fix double declaration of host_remove_job()
     * tests/libtest.c (wget_test_check_filesystem): Fix type of 'rc'.
     * tests/test-idn-robots.c: Fix comma to semikolon at end of line.
     * tests/test.c (test_strcasecmp_ascii): Fix type of loop variable.

2016-11-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace manywarnings module by our own code
     
     * bootstrap.conf: Remove manywarnings, add warnings
     * configure.ac: Replace manywarnings code
     
     The new code works on recent gcc and clang with an overhead of
     ~100ms instead of ~9s here (without -C).
     This is meant for developers only and is activated by either
     --enable-gcc-warnings or by touching .manywarnings.

2016-10-23 Darshit Shah <darnir@gnu.org>

     Fix parse_header() and add more tests
     
     * src/options.c (parse_header): Fix bug where empty string did not clear
     out all the headers
     * src/options.c (selftest_options): Fix testcase for parse_header and
     add more tests

2016-10-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for gcrypt.h
     
     * configure.ac: Check for gcrypt.h
     * libwget/hashfile.c: Check for HAVE_GCRYPT_H

2016-10-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib digest hash fallback
     
     * bootstrap.conf: Add md2, md5, sha1, sha256, sha512 modules
     * libwget/hashfile.c: Add code branch to use gnulib functions if needed

2016-10-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-iri.c: Fix test to work on non-UTF-8 locales

2016-10-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-iri-percent.c: Fix test to work on non-UTF-8 locales

2016-10-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test-restrict-ascii.c: Fix test to work on non-UTF-8 locales

2016-10-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/hashfile.c: Remove unused defines

2016-10-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Make --header replace wget's standard headers
     
     * libwget/http.c (wget_http_create_request): Add 'Host' header
       to header list,
       (wget_http_send_request): Do not add 'Host' hard-coded,
       (wget_http_request_to_buffer): Special treatment of 'Content-Length'
     * src/wget.c (http_create_request): Replace wget's HTTP headers by
       user-provided headers, except 'Cookie' headers which will be appended.

2016-10-13 Darshit Shah <darnir@gnu.org>

     Support --header option
     
     * src/options.c: Add new --header option and a new parse_header()
     parsing function for that. Also add self tests for parsing
     * src/wget_options.h: Same
     * src/wget.c (http_create_request): Add the user added headers to the
     HTTP Request
     * src/test-wget-1.c: Add a test for the --header option

2016-10-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Separate progress bar logic into library and application parts
     
     * include/wget/wget.h: Remove struct _wget_bar_ctx and wget_bat_ctx_t,
       amend prototypes of wget_bar functions,
       new function wget_bar_write_line()
     * libwget/bar.c: Bunch of cleanups and code rearrangements
     * src/wget_progress.h: Remove
     * src/Makefile.am: Remove src/wget_progress.h
     * src/bar.c: Remove mutex usage,
       (_error_write) call wget_bar_write_line
     * src/log.c: Remove redundant param checks
     * src/wget.c: Add struct _body_callback_context,
       always call bar_slot_begin() on begin of new download,
       use downloader->id as progress slot
     * src/wget_bar.h: Amend prototypes of bar_ functions

2016-10-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Call bar_update_slot() from main thread
     
     * libwget/bar.c: Fix typos,
       (wget_bar_set_slots): Init mem only when needed,
       add comments describing Escape sequences
     * src/bar.c (bar_update_slots): Take nslots as param
     * src/wget.c: Move call to bar_update_slots() from worker to main thread
     * src/wget_bar.h: Amend prototype of bar_update_slots()

2016-10-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/wget2_manual.md: More changes for Wget2

2016-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix quota calculation

2016-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Fix update of downloaded bytes for progress bar

2016-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Print debug messages using debug_printf()

2016-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Amend Wget2 banner string

2016-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/host.c (host_queue_free): Also free robots.txt job

2016-10-07 Darshit Shah <darnir@gnu.org>

     * configure.ac: Ignore the Stack Protector warnings

2016-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Support compression for HTTP/2

2016-10-07 Darshit Shah <darnir@gnu.org>

     Improved testing on Travis
     
     * .travis.sh: Rewrite for clarity and speed. Testing shows that valgrind
     and ASan don't play well together. So split their executions.
     * .travis.yml: Enable ccache for builds. Also try to update libc6 if
     possible
     * .travis.yml: Do not run on OSX with CC=gcc. This is because on OSX,
     gcc is only a wrapper around clang.
     * .travis_setup.sh: Cosmetic changes only
     * Makefile.am (check-coverage): Explcicitly disable valgrind tests when
     checking coverage
     * tests/libtest.c (wget_test): Use a provided suppressions file for
     valgrind. This is required since the valgrind version on Travis seems to
     be out of sync with libc. This causes valgrind to report a memory bug
     falsely.
     * tests/valgrind-suppressions: New file with some valgrind suppressions.
     Included suppressions are for a valgrind/libc bug and to suppress
     reachable memory messages from within gnutls

2016-10-06 Darshit Shah <darnir@gnu.org>

     Revert "Test travis"
     
     This reverts commit 75daf2cdc791d1d01892aae9138c103e405a1f53.
     I screwed up. Pushed to the wrong repository

2016-10-06 Darshit Shah <darnir@gnu.org>

     Test travis

2016-10-05 Darshit Shah <darnir@gnu.org>

     * src/wget.c (nop): Add ifddef guards around SIGWINCH

2016-10-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix progress bar details
     
     * include/wget/wget.h: wget_get_screen_size() must not be pure
     * libwget/bar.c (_bar_get_width): Leave one space right to avoid linebreaks
     * libwget/utils.c (wget_human_readable): Align # of bytes
     * src/bar.c (wget_get_screen_size): Fix return value

2016-10-04 Darshit Shah <darnir@gnu.org>

     Export a new function for determining screen dimensions
     
     * include/wget/wget.h: New function wget_get_screen_size. Replaces old
     wget_determine_screen_width
     * libwget/bar.c (_bar_get_width): Use wget_get_screen_size instead of
     wget_determine_screen_width
     * libwget/utils.c: Replace function wget_determine_screen_width with a
     more generic wget_get_screen_size.

2016-10-04 Darshit Shah <darnir@gnu.org>

     Handle SIGWINCH for progress bar
     
     * include/wget/wget.h: New function wget_bar_screen_resized, as an
     indicator that the screen size may have changed. Also, wget_bar_update
     may now modify the *bar parameter
     * libwget/bar.c: Move detection code for screen size into a separate
     function called _bar_get_width.
       (wget_bar_update): Check if the screen width has changed and
     reallocate more space if necessary
     * src/wget.c: Install a new signal handler for SIGWINCH

2016-10-03 Darshit Shah <darnir@gnu.org>

     Move window size detection to libwget
     
     * include/wget/wget.h: Declare new function wget_determine_screen_width.
     Also change prototype of wget_bar_init to not accept a max_width
     parameter
     * src/utils.c: Move function determine_screen_width from here ...
     * libwget/utils.c: ... to here.
     * src/utils.{c,h}: Delete empty file
     * src/Makefile.am: Remove source files utils.{c,h}
     * src/bar.c: Move detection of screen width from here ...
     * libwget/bar.c: ... to here
     * tests/test.c: wget_bar_init() no longer takes a max_width parameter

2016-10-03 Darshit Shah <darnir@gnu.org>

     Cleaner API for progress bar within libwget
     
     * include/wget/wget.h (_wget_bar_ctx): Remove unused elements
     expected_size and filename. Rename slotpos to _slotpos to reflect that
     it should not be used by the client.
     * include/wget/wget.h: Remove declaration for old API functions
     bar_register and bar_deregister. Define declarations for
     wget_bar_slot_begin, wget_bar_slot_register and
     wget_bar_slot_deregister.
     * libwget/bar.c (_bar_slot_status_t): Define new enum to store the
     status of a slot of the progress bar.
       (_bar_slot_t): Remove unused element last_ctx. Also, define slot
       elements: filename, file_size, bytes_downloaded and status.
       (wget_bar_slot_begin): Define new function. Invoked when the client
       has started downloading a new file.
       (wget_bar_slot_register): New function to register a new file in a
       progress bar slot.
       (wget_bar_deregister): Remove old function
       (wget_bar_slot_deregister): New function, called after file has
       finished downloading. Successfully or unsuccessfully.
       (wget_bar_deregister): Remove old function
       (_bar_set_progress): last_ctx is no longer used. Instead data is
       stored within the slot struct itself
       (_bar_update_slot): Same
       (_bar_print_final): Same
       (wget_bar_deinit): Free the filename stored in the slot
     * src/bar.c: Edit to reflect the changes in libwget API
     * src/wget.c (_get_header): Same
       (http_send_request): Same
       (http_receive_response): Same
     * src/wget_bar.h: Same

2016-10-03 Darshit Shah <darnir@gnu.org>

     * libwget/bar.c: Remove mutex stdout
     
     The mutex stdout was meant to ensure that multiple routines don't write
     to the screen concurrently. However, this mutex is not required, since
     such syncronization should be handled by the client using the library.
     All other library methods for the progress avoid any form
     synchronization primitives for this reason

2016-10-03 Darshit Shah <darnir@gnu.org>

     * src/bar.c: Rename mutex to bar_mutex

2016-10-02 Darshit Shah <darnir@gnu.org>

     * libwget/http.c: Remove unused struct _body_callback_context

2016-09-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Better code coverage for HTML parsing
     
     * tests/test-idn-meta.c: Add HTML5 meta charset
     * tests/test-meta-robots.c: Add meta robots 'all' and 'follow'

2016-09-30 Darshit Shah <darnir@gnu.org>

     Mark some functions as pure
     
     * libwget/cookie.c (_compare_cookie{,2}): Mark as pure
     * libwget/encoding.c (_utf8_is_valid): Same
     * libwget/hsts.c (_compare_hsts): Same
     * libwget/ocsp.c (_compare_ocsp): Same
     * libwget/netrc.c (_compare_netrc): Same
     * libwget/tls_session.c (_compare_tls_session): Same

2016-09-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename include/libwget.h to include/wget/wget.h+wgetver.h

2016-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests for CSS parsing
     
     * tests/Makefile.am: Add test-parse-css.c
     * tests/test-parse-css.c: New file including two tests

2016-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Remove unwanted stuff from coverage report

2016-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Reduce Travis OSX build overhead

2016-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c: Add wget_bar_* unit test

2016-09-29 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/bar.c: Cosmetics, param check for wget_bar_init()

2016-09-28 Darshit Shah <darnir@gnu.org>

     Don't dereference NULL pointer when copying filename
     
     * libwget/bar.c (wget_bar_deregister): Make sure filename is not NULL
     before calling strdup() on it

2016-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Check WITH_LIBNGHTTP2 before referring nghttp2_nv

2016-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix race condition when pipelining reuqests
     
     * libwget/http.c: Add streamid to debug messages
     * src/progress.h: Remove member downloader and head from _body_callback_context
     * src/wget.c (downloader_thread): Keep track of locking,
       (_get_header): Remove reference to downloader,
       (http_send_request): Replace downloader with job
     
     With HTTP/2 pipelining (parallel streams per connection) is active.
     The bug fixed stops file descriptor leaks and writing data into wrong
     files.

2016-09-27 Dagobert Michelsen <dam@opencsw.org>

     * README.md: Add build status for OpenCSW

2016-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/net.c (wget_tcp_resolve): Fix mutex unlocking

2016-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (add_url, process_response): Fix NULL pointer dereference
     
     Reported-by: Coverity

2016-09-26 Darshit Shah <darnir@gnu.org>

     * src/wget.c (establish_coneection): Don't crash when no mirrors defined for metalink file

2016-09-26 Darshit Shah <darnir@gnu.org>

     * libwget/net.c (wget_tcp_resolve): Don't sleep with an acquired mutex

2016-09-27 Darshit Shah <darnir@gnu.org>

     Support dynamic thread allocation in progress bar
     
     * include/libwget.h.in: Add new function wget_bar_set_slots
     * libwget/bar.c (_wget_bar_st): Add new struct member max_slots to store
     the maximum number of slots of the progress bar
       (wget_bar_init): Initialize the memory for all the possible
     progress_bars
       (wget_bar_set_slots): New function to modify the number of progress
     slots at runtime. Can only increase the number of slots, not decrease.
     * src/bar.c(bar_init): Remove unneeded variable lf. bar_init() is
     invoked before any threads are created, hence do not print the required
     newlines. This is now done by wget_bar_set_slots
       (bar_update_slots): Wget2 interface for libwget's wget_bar_set_slots
       (_error_write): Fix the position of acquiring the mutex. Don't make
       changes to the screen while some other progress bar function may be
       running
     * src/bar.h: New function bar_update_slots
     * src/wget.c: Create global variable nthreads.
       (downloader_thread): Update the number of progress bar slots
     * src/wget.h: New global variable nthreads

2016-09-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Simplify dynamic creation of threads
     
     * src/bar.c (bar_init): Use config.max_threads
     * src/options.c: Remove config.num_threads
     * src/options.h: Remove config.num_threads
     * src/wget.c (main): Use config.max_threads, remove async_urls

2016-09-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (main): Fix main loop
     
     This also fixes the CTRL-C issue.

2016-09-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix unescaping of '+' in URL
     
     * libwget/iri.c (wget_iri_unescape_inline): Do not touch '+'.
       (wget_iri_parse): Replace '+' by ' ' in query part.
     * tests/test.c (test_iri_parse): Add more tests

2016-09-26 Darshit Shah <darnir@gnu.org>

     Make wget_bar_update update the entire progress

2016-09-26 Darshit Shah <darnir@gnu.org>

     Draw animated progress bar for unknown file size
     
     * libwget/bar.c: Use a tick counter and draw an animated progress bar,
     similar to Wget 1.x when the file size is unknown

2016-09-26 Darshit Shah <darnir@gnu.org>

     * configure.ac: Enable support for disabling assertions

2016-09-26 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Add Coverity and Coveralls.io badge

2016-09-25 Darshit Shah <darnir@gnu.org>

     Update travis script to psuh to coveralls.io
     
     * .travis.sh: Run `make check-coverage` when running with CC=gcc
     * .travis.yml: Use the newer trusty tahir builds for updated packages
     * .travis.yml: Refactor. Split out the OSX installation steps into
     .travis_setup.sh
     . .travis_setup.sh: Same
     * Makefile.am: Add --ignore-errors source to lcov command line

2016-09-25 Darshit Shah <darnir@gnu.org>

     * Makefile.am: Add targets for checking code coverage

2016-09-23 Darshit Shah <darnir@gnu.org>

     Improved progress bar functioning

2016-09-23 Darshit Shah <darnir@gnu.org>

     Clean up progress bar code
     
     Saving the max, cols and ratio to the slot structure was an optimization
     used to prevent unneeded refreshes of the progress bar on slow
     connections. However, with the asynchronous progress bar, this
     optimization is no longer necessary as we refresh the progress bar far
     fewer times already. Also, as other elements like the ETA are added to
     the progress bar, these checks will only cause more problems as the ETA
     would need to be updated even if no data has been downloaded in some
     time.
     
     * libwget/bar.c: Remove ratio, max, cur, cols and first from the
     _wget_slot_st struct and eliminate all references to them.

2016-09-23 Darshit Shah <darnir@gnu.org>

     Print a different progress bar when size is unknown
     
     * libwget/bar.c(_wget_bar_st): New struct members known_size and
     unknown_size to denote the character with which the progress bar is
     filled in these two cases
       (wget_bar_init): Initialize the new struct members with the right data
       (wget_bar_update): Choose and print the right character based on
       whether the size is known or not.
       (_bar_print_final): Same
       (wget_bar_deinit): Free the struct members

2016-09-23 Darshit Shah <darnir@gnu.org>

     * src/bar.c(_error_write): Fix another potential race condition
     
     In this case, the lock acquisition and release is done around the for
     loop instead instead of around the call to wget_bar_update. By creating
     such a coarse critical section, we ensure that the entire screen has
     been redrawn for the user before any further changes to it are made.
     This is especially the case when error_printf() is invoked in quick
     succession which would cause multiple instances of wget_update_thread()
     to run simultaneously, greatly increasing the lock contention.

2016-09-23 Darshit Shah <darnir@gnu.org>

     * src/bar.c (_bar_update_thread): Fix a potential race condition

2016-09-20 Darshit Shah <darnir@gnu.org>

     Improve accuracy of wget_human_readable
     
     * libwget/utils.c (wget_human_readable): Set acc to 1000 and print to 2
     decimal places. This is similar to the settings used in Wget 1.x.
     * libwget/bar.c (_bar_slot_t): Define element human_size to be as large
     as _BAR_DOWNBYTES_SIZE.

2016-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Use wget_human_readable() from Wget1.x
     
     * bootstrap.conf: Remove module 'human'
     * include/libwget.h.in: Amend wget_human_readable()
     * libwget/bar.c: Use new function wget_human_readable()
     * libwget/utils.c: Replace wget_human_readable()
     * src/wget.c: Use new function wget_human_readable()

2016-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Print human readable total number of bytes in progress bar
     
     * include/libwget.h.in: Add wget_human_readable_alloc()
     * libwget/utils.c: Add wget_human_readable_alloc()
     * libwget/bar.c: Use wget_human_readable_alloc()
     * src/bar.c (bar_init): Set log function after call to wget_bar_init()
     * src/wget.c (main): Use wget_human_readable() to print bottom line of bar

2016-09-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Use libwget alloc functions in CSS parser
     
     * libwget/css.c: New wrapper functions yyalloc() and yyrealloc()
     * libwget/css_tokenizer.lex: Set options noyyalloc and noyyrealloc

2016-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c: Fix calculation of quota

2016-09-19 Darshit Shah <darnir@gmail.com>

     * README.md: Fix typo

2016-09-17 Darshit Shah <darnir@gmail.com>

     Retain a copy of download context for progress bar
     
     When the screen is scrolled or resized, we often need to redraw the
     entire progress bar. However, when some threads have completed
     downloading, this can cause those progress slots to become blank since
     their contexts were deleted and hence lost. To prevent this, keep a copy
     of the last context in the slot, so we can access it later for printing
     the progress bar.
     
     * libwget/bar.c (_bar_slot_t): New member, last_ctx
       (wget_bar_deregister): Create a copy of the context just before we
       deregister. This ensures that we copy the latest data for printing
       (wget_bar_update): If no context is registered, then try printing the
       last context available
       (_bar_print_final): Make the method signature similar to
       wget_bar_update for consistency

2016-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix Robots Exclusion Standard
     
     * include/libwget.h.in: Add function wget_list_getnext().
     * libwget/list.c: Add function wget_list_getnext().
     * libwget/robots.c: Fix memory leak.
     * src/host.c (host_remove_job): Cleanup queue after downloading and
       scanning robots.txt.
     * src/job.h (struct JOB): Add flag 'requested_by_user'.
     * src/wget.c (add_url_to_queue): Set 'requested_by_user',
       (add_url): Fix checking for disallowed paths.
     * tests/Makefile.am: Add test 'test-robots'.
     * tests/test-robots.c: New test to prove robots functionality.
     
     Special handling for automatic robots.txt jobs
     ==============================================
     What can happen with --recursive and --span-hosts is that a document from hostA
     has links to hostB. All these links might go into the hostB queue before robots.txt
     is downloaded and parsed. To avoid downloading of 'disallowed' documents, the queue
     for hostB has to be cleaned up right after downloading and parsing robots.txt.
     Any links links that have been explicitly requested by the user are still downloaded.

2016-09-14 Darshit Shah <darnir@gmail.com>

     Use gnulib human module for human readable file size
     
     * bootstrap.conf: Add the human module and its dependency unistd
     * include/libwget.h.in: Replace method signature for wget_human_readable
     * libwget/bar.c (_bar_slot_t): Add a new struct memeber for storing the
     human readable string that it printed on the progress bar
       (wget_bar_init): Initialise the new human_size struct member
       (wget_bar_update): Use the new wget_human_readable() method
       (_bar_print_final): Same
       (wget_bar_deinit): Free the allocated memory for each slot
     * libwget/utils.c (wget_human_readable): Replace the old function with a
     call to the human_readable() method from gnulib

2016-09-14 Darshit Shah <darnir@gmail.com>

     Handle return value of wget_thread_create
     
     * src/bar.c: Handle return value of wget_bar_create and fallback to
     quiet mode if progress bar cannot be drawn

2016-09-14 Darshit Shah <darnir@gmail.com>

     Update gnulib module

2016-09-11 Darshit Shah <darnir@gmail.com>

     Split logging functions into stdout and stderr

2016-09-10 Darshit Shah <darnir@gmail.com>

     Fix location of error messages in progress bar
     
     * src/bar.c (_error_write): New logging callback function for error
     messages which will print the messages to the top of the progress bars
     * src/log.c (log_write_error): New public method for writing error
     messages to screen
     * src/log.h: Same

2016-09-14 Darshit Shah <darnir@gmail.com>

     Separate out the last update of the progress bar
     
     When the progress bar is updated for the last time (whether exiting due
     to error, or download complete), we may want to print information not
     normally presented in the progress bar, like total time taken. To allow
     this, separate out the printing of the last update of the progress bar
     
     * include/libwget.h.in (_wget_bar_ctx): Remove unused members, final and
     cond
     * libwget/bar.c: Separate out the bar slot selection for reuse.
     (_bar_print_final): New method for printing the last update of a
     progress bar

2016-08-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix wget_bar_free()

2016-08-07 Darshit Shah <darnir@gmail.com>

     Better naming of functions

2016-08-08 Darshit Shah <darnir@gmail.com>

     Separate out bar_deinit and free'ing memory
     
     * libwget/bar.c (wget_bar_init): Invoke wget_bar_deinit() to free up the
     memory allocated to the various progress bar sections. Similarly, invoke
     wget_bar_free() to free up the memory allocated to the progress bar
     itself

2016-09-14 Darshit Shah <darnir@gmail.com>

     Use xfree, xmalloc and xcalloc
     
     * libwget/bar.c: Replace all calls to free(), malloc() and calloc() with
     xfree(), xmalloc() and xcalloc() respectively
     * libwget/hashmap.c: Same

2016-08-07 Darshit Shah <darnir@gmail.com>

     Change tabs to spaces when not at Beginning of line

2016-08-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     Fix compiler warnings when IOCTL is not avaialble
     
     * src/utils.c (determine_screen_width): Make sure there are no unused
     variables when IOCTL is not available

2016-08-07 Darshit Shah <darnir@gmail.com>

     Make compiler happy about strict-prototypes and shadowed variables

2016-08-06 Darshit Shah <darnir@gmail.com>

     Use pthread_cancel to kill a thread
     
     * include/libwget.h.in: Export new function wget_thread_cancel to kill
     an existing thread nicely.
     * libwget/thread.c: Same
     * src/bar.c: Use the cleaner wget_thread_cancel() method to kill the
     progress bar instead of polling for a variable.

2016-07-28 Darshit Shah <darnir@gmail.com>

     Create an asynchronous progress bar
     
     Give the progress bar its own thread and let it update the entire
     display asynchronously at a specified time interval. The existing
     implementation refreshes the progress bar for each network packet
     downloaded. Over multiple downloader threads and a high speed network
     connection this can lead to far too many redrawings of the screen. Also,
     each of the downloader threads will block while trying to acquire the
     thread mutex because another thread just retrieved a packet. While I
     haven't profiled it, it seems like there would be extremely high lock
     contention in the existing implementation. Instead, with a separate
     thread, we can update all the progress bar slots simultaneously at
     regular intervals.
     
         * bootstrap.conf: Include Gnulib module "ioctl"
         * include/libwget.h.in: Define always_inline, flatten and deprecated
     	compiler attributes for both GCC and Clang
         * include/libwget.h.in: Export new functions wget_human_readable,
     	wget_bar_register and wget_bar_deregister.
         * include/libwget.h.in (wget_http_response_t): Add new element
     	"cur_downloaded" to struct. This element keeps a track of the raw
     	number of bytes downloaded in the response
             (_wget_bar_ctx): Define new struct for storing the progress bar
     	context.
         * libwget/bar.c: Fix display of downloaded ratio. Ensure it does not
     	exceed 100% by comparing the raw downloaded bytes instead of
     	uncompressed downloaded bytes.
     	Add support for printing the filename and downloaded bytes to the
     	progress bar.
         * libwget/http.c (wget_http_response_cb): Store the raw number of
     	bytes downloaded from the network in the response data
         * libwget/utils.c (wget_human_readable): New function to convert an
     	int value to a human readable string
         * src/bar.c: Use the entire screen width instead of just 70 columns
     	for the progress bar.
     	Provide methods to register and deregister a progress bar
     	context
     	(wget_bar_update_thread): New method for the progress bar thread
     	to update the output periodically.
         * src/bar.h: Same
         * src/job.h: Move definition of struct DOWNLOADER from main.c to
             here
         * src/progress.h: Move definition of _body_callback_context from
             main.c to here
         * src/utils.c: Add new method to determine the width of the screen
         * src/utils.h: Same
         * src/wget.c: Use the new progress bar contexts. Update, register
         and deregister them
             (main): Deinit the progress bar only if it was enabled
         * src/Makefile.am: Add new files, progress.h, utils.c, utils.h

2016-09-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix following relative links
     
     * src/wget.c (html_parse): Add only absolute URLs to 'known_urls'.
     * tests/test-base.c: Test that the changes work.
     
     Reported-by: Jaaap@github.com

2016-09-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c (_normalize_path): Fix return value

2016-09-16 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (add_url): Check pattern list for URL domain earlier.
     
     This avoids wrong messages about why not following an URL.

2016-09-15 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c (wget_update_file): Add comment regarding owner
       flags when using mkstemp().

2016-09-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (add_url): Avoid theoretical NULL ptr dereference
     
     Reported-by: Coverity

2016-09-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/wget.c (process_response_part): Fix NULL pointer dereference
     
     Reported-by: Coverity

2016-09-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c (wget_memiconv): Fix memleak
     
     Reported-by: Coverity

2016-09-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/print_html_urls.c (html_parse_localfile): Fix memleak
     
     Reported-by: Coverity

2016-09-10 Darshit Shah <darnir@gmail.com>

     Fix segfault in case of Basic Authentication
     
     * src/wget.c(downloader_thread): Remove job only if it exists

2016-09-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c: Use ICONV_CONST to avoid cc warning

2016-09-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix fnmatch() on Solaris
     
     * bootstrap.conf: Add fnmatch-gnu
     * configure.ac: Add AC_GNU_SOURCE

2016-09-09 Tim Rühsen <tim.ruehsen@gmx.de>

     * examples/websequencediagram.c (main): Fix printf format string

2016-09-04 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Enable color diagnostics with ccache

2016-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     * tests/test.c: Fix cookie tests for when libpsl not available

2016-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Support cookie prefixes __Secure- and __Host-
     
     * libwget/cookie.c (_wget_cookie_normalize_cookie): Add checks
       for __Secure- and __Host- prefixes.
     * tests/test.c (test_cookies): Add test cases for the prefixes.
     
     This change implements proposals from draft-ietf-httpbis-cookie-prefixes-00
     as modern browsers do.

2016-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * include/libwget.h.in: Add attribute const to wget_hash_get_len()

2016-08-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib submodule

2016-07-28 Darshit Shah <darnir@gmail.com>

     Make compiler happy about using uninitialized vars
     
         * tests/test.c(test_striconv): Explcitly initialize variables to
         NULL to make compiler happy.

2016-07-28 Darshit Shah <darnir@gmail.com>

     Add configure support for Thread Sanitizer as well
     
         * configure.ac: Add configure option to enable Thread Sanitizer.
         Enabling this option currently causes all tests to fil due to
         various data races. Some of the races can be fixed, while others are
         false positives.
         [ci skip]

2016-07-28 Darshit Shah <darnir@gmail.com>

     Reduce the depth of git clone on travis to 3
     
         * .travis.yml: We don't need any git operations on Travis. Reduce
         the clone depth.
         [ci skip]

2016-07-28 Darshit Shah <darnir@gmail.com>

     Make ASan happy about dangling memory in test-metalink
     
         * tests/test-metalink.c: Explicitly free() heap allocated memory

2016-07-23 Darshit Shah <darnir@gmail.com>

     Enable fsanitize options when running on Travis
     
         * .travis.sh: Enable UBSan and ASan sanitizers on Travis

2016-06-16 Darshit Shah <darnir@gmail.com>

     Fix a ubsan warning due to zero length VLA

2016-07-23 Darshit Shah <darnir@gmail.com>

     Add configure option to enable compiler sanitizers
     
         Compiler sanitization options allow the code to be instrumented at
         compile time. They add instructions to detect various behaviours at
         runtime. These options usually cause significant slowdown and will
         often cause the program to crash. Hence, do *not* use them on
         production systems. They are meant to be used only by the developers
         for testing purposes. Three sanitization options are added to the
         configure options in this commit:
           1. Undefined Behaviour Sanitizer (ubsan): Detect issues in the code
           that are undefined behaviour according to the C specification
           2. Address Sanitizer (ASan): Detect addressing issues and memory
           leaks at runtime. Slightly similar to Valgrind, but using compiler
           added instrumentation
           3. Memory Sanitizer (MSan): Detect uninitialized memory reads.
     
         The Address Sanitizer and Memory Sanitizer options are mutually
         exclusive, and hence a check for the same is added to the configure
         script.
     
         MSan additionally requires that all libraries be instrumented too.
         Without that, MSan is nearly unusable due to various false
         positives.
     
         * configure.ac: Add option to enable UBSan, ASan and MSan fsanitize
         options at compile time.

2016-07-22 Darshit Shah <darnir@gmail.com>

     Update documentation to reflect actual behavior of -O
     
         * docs/wget2_manual.md: Update documentation. -O does not act as a
         shell redirection.

2016-07-22 Darshit Shah <darnir@gmail.com>

     Fix issue when -C and -O are passed together
     
         * src/wget.c(http_create_request): When -c and -O are passed
         togther, ensure that the output_document is continued and not the
         local_filename

2016-07-22 Darshit Shah <darnir@gmail.com>

     Add new test to check for continue and -O options
     
         * tests/test-wget-1.c: Add new test. If the remote filename
         exists locally, then Wget2 tries to conitnue downloading that file
         despite being given an explicit output document. This test checks
         for such behaviour.

2016-07-22 Tim Rühsen <tim.ruehsen@gmx.de>

     * src/options.c: Add linefeeds to --help output

2016-07-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Update README
     
     * README.md: Update text to current status.
     * docs/mainpage.md: Likewise.

2016-07-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Add TLS Session Resumption with persistent cache
     
     * include/libwget.h.in: Add wget_tls_session_* set of functions,
       add new define WGET_SSL_SESSION_CACHE
     * libwget/Makefile.am: Add tls_session.c to libwget
     * libwget/ssl_gnutls.c (struct _config): Add tls_session_cache.
       (struct _session_context): Add delayed_session_data.
       (wget_ssl_set_config_string): Handle WGET_SSL_SESSION_CACHE.
       (wget_ssl_open): Add False Start debug messages,
       Set session data if cound in cache,
       Write session data into cache.
       (wget_ssl_read_timeout): Write session data into cache when
         False Start has been activated.
     * libwget/tls_session.c: New file with session data cache implementation
     * src/options.c (print_help): Add new options --tls-resume and
       --tls-session-file.
       (config): Set tls_resume activated by default.
       (options[]): Add tls-resume and tls-session-file.
       (init): Create session file name, init session data cache,
       Set session cache for TLS layer.
       (deinit): Free session cache and session cache filename.
     * src/options.h (struct config): Add tls_session_db, tls_session_file,
       tls_resume.
     * src/wget.c (main): Save session cache if changed.
     
     TLS Session Resumption speeds up TLS handshake by 1xRTT.
     Together with TCP Fast Open (enabled by default), we are down at
     1xRTT TLS handshake overhead. To get down to 0 RTT we need a different
     TLS protocol - TLS v1.3 will hopefully soon be standardized.

2016-07-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Beautify TLS certificate information printout
     
     * libwget/ssl_gnutls.c (_print_x509_certificate_info):
       Beautify printout.
       (_print_info): Likewise.

2016-07-20 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (wget_ssl_open): Fix #elif

2016-07-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Add support for TLS False Start
     
     * include/libwget.h.in: New declaration wget_tcp_set_tls_false_start()
       and wget_tcp_get_tls_false_start()
     * libwget/net.c: New functions wget_tcp_set_tls_false_start() and
       wget_tcp_get_tls_false_start()
     * libwget/net.h: Add tls_false_start to struct wget_tcp_st
     * libwget/ssl_gnutls.c (_do_handshake): Print TLS False Start status.
       (wget_ssl_open): Enable TLS False Start for GnuTLS >= 3.5.0.
     * src/options.c: Add description for --tls-false-start.
       (struct option options): Add option --tls-false-start.
       (init): Call wget_tcp_set_tls_false_start().
     * src/options.h (struct config): Add member tls_false_start.

2016-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c (wget_ssl_close): Retry TLS shutdown on error

2016-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/Makevars: Removed from git repo

2016-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Generate distributed ChangeLog from git log
     
     * bootstrap.conf: Add gnulib module 'gitlog-to-changelog'.
     * Makefile.am: Generate the ChangeLog file from the git log.

2016-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     * configure.ac: Add parallel-tests and gnu to automake options

2016-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Declare wget_iri_is(un)reserved() as const
     
     * include/libwget.h.in: Declare wget_iri_isunreserved() and
       wget_iri_isunreserved_path() with attribute 'const'

2016-07-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Refactor downloader main loop into a state machine
     
     * src/host.c (_search_queue_for_free_job): Set 'used_by' for
       allocated job.
       (_search_host_for_free_job): Same.
       New function _release_job().
       New function host_release_jobs().
       New function host_add_robotstxt_job().
       (host_remove_job): Fix queue size calculation.
       Added several debug lines.
     * src/host.h: Declare host_add_robotstxt_job() and host_release_jobs()
     * src/job.h: New variable 'used_by' for PART,
       New variables 'used_by','downloader' for JOB.
     * src/options.c: Default config.http2_request_window to 30.
       Default config.http1_request_window to 10.
       (deinit): Free config.accept_patterns and config.reject_patterns.
     * src/options.h: Add 'http2_request_window' and 'http1_request_window'
       to 'struct config'.
     * src/wget.c (add_url_to_queue): Call host_add_robotstxt_job().
       (add_url): Call host_add_robotstxt_job().
       Refactor downloader_thread(), process_response_header(),
       process_head_response(), process_response_part(), process_response().

2016-07-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Use TCP Fast Open (TFO) within TLS handshake
     
     * include/libwget.h.in: New declaration wget_tcp_get_tcp_fastopen()
     * libwget/net.c: New function wget_tcp_get_tcp_fastopen(),
       (wget_tcp_connect): Support TFO
     * libwget/ssl_gnutls.c: New function _ssl_writev()
       (wget_ssl_open): Set _ssl_writev() as push function in TFO requested

2016-06-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Add benchmark scripts
     
     * benchmarks/README: New file, short description
     * benchmarks/bench_https_http1: New file, HTTPS via HTTP/1.1
     * benchmarks/bench_https_http2: New file, HTTPS via HTTP/2.0

2016-06-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Refactoring to separate send, receive and HTTP state machine
     
     * examples/websequencediagram.c (main): Call wget_http_request_set_body()
       and wget_http_send_request() instead of wget_http_send_request_with_body().
     * include/libwget.h.in: Add WGET_HTTP_USER_DATA, wget_get_timemillis(),
       extend wget_thread_cond_wait(), add body, user_data, body_length to
       wget_http_request_t, remove wget_http_send_request_with_body(),
       add wget_http_request_get_int(), wget_http_request_set_ptr(),
       wget_http_request_get_ptr(), wget_http_request_set_body().
     * libwget/http.c: Add wget_http_request_get_int(),
       wget_http_request_set_ptr(), wget_http_request_get_ptr(),
       wget_http_request_set_body(),
       remove wget_http_send_request_with_body(),
       (wget_http_request_to_buffer): add body to request buffer.
     * libwget/http_highlevel.c (wget_http_get): Replace
       wget_http_send_request_with_body()
     * libwget/iri.c: Use c-ctype.h instead of ctype.h
       (wget_iri_parse): Allow any numbers of / after scheme:
       (wget_iri_parse): Catch URIs without /after scheme:
     * libwget/list.c (wget_list_browse): Small code rearrangement
     * libwget/metalink.c (_add_mirror): Check mirror.iri for NULL
     * libwget/ssl_gnutls.c (send_ocsp_request): Replace
       wget_http_send_request_with_body()
     * libwget/thread.c (wget_thread_cond_signal): Add timeout param
     * libwget/utils.c: New function wget_get_timemillis()
     * src/blacklist.c: Include wget.h instead of log.h
     * src/blacklist.h: Fix indentation
     * src/host.c: Add queueing stuff
     * src/host.h: Reflect changes in host.c
     * src/job.c: Remove queueing stuff
     * src/job.h: Reflect changes in job.c
     * src/log.c: Sync stdout/stderr to correct output order
     * src/log.h: Remove shortcuts of print functions
     * src/wget.c: Remove download_part() and http_get().
       Add http_send_request(), http_receive_response(), try_connection(),
       establish_connection(), add_statistics(), process_response_header().
       Amend downloader_thread() to reflect the changes.
     * src/wget.h: Add shortcut defines for print functions.
     * tests/libtest.c (_http_server_thread): Fix compiler warning,
       fix debug message.
       New function _write_msg() to print server messages yellow.
       (wget_test) Add -d to wget command line.
     * tests/test-metalink.c (main): Add tests for V3 and V4 metalink
       files read from command line (-i, --force-metalink)
     * tests/test.c (test_iri_parse): Add test for slash-less mailto: URI

2016-06-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Use bitfields in structs where possible

2016-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     * Makefile.am: Fix EXTRA_DIST config.rpath to build-aux/config.rpath

2016-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     * README.md: Fix repo cloning instructions

2016-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Move ignored po/ files to po/.gitignore
     
     * .gitignore: Remove po/ files
     * po/.gitignore: New file

2016-07-07 Ander Juaristi <ajuaristi@gmx.es>

     Remove references to autogen.sh. Set SKIP_PO.
     
     * bootstrap.conf: add SKIP_PO=1, so that we don't have to pass
       the --skip-po flag every time we run bootstrap.
     * README.md, contrib/check-hard, contrib/mingw, docs/mainpage.md,
       .travis.sh: amend references to autogen.sh.
     * autogen.sh: Removed
     * .gitignore: Add build-aux
     * po/Makevars: Remove auto-generated file from repo

2016-06-26 Ander Juaristi <ajuaristi@gmx.es>

     Use bootstrap
     
      * bootstrap, bootstrap.conf: new files.
      * configure.ac: invoke AC_CONFIG_MACRO_DIR and
        AC_CONFIG_AUX_DIR.

2016-06-16 Tim Rühsen <tim.ruehsen@gmx.de>

     API changes for HTTP/2 parallel/async requests
     
     * .gitignore: New entry examples/http_multi_get
     * Makefile.am: Move subdir 'examples' before 'src'
     * examples/Makefile.am: Add http_multi_get
     * examples/http_get2.c (main): Adapt code to API changes
     * examples/http_multi_get.c: New example to show async/parallel
       requests
     * examples/websequencediagram.c (main): Adapt code to API changes
     * include/libwget.h.in: New functions wget_http_request_set_header_cb,
         wget_http_request_set_body_cb, wget_http_request_set_int.
       Changed params of wget_http_get_response.
       Removed wget_http_get_response_func, wget_http_get_response_stream,
         wget_http_get_response_fd.
       Changed params of wget_http_get_response_cb.
       Add members pending_requests, received_http2_responses,
         pending_http2_requests to wget_http_connection_t.
       Add member req to wget_http_response_t.
       Add members header_callback, body_callback, header_user_data,
         body_user_data, response_keepheader to wget_http_request_t.
       New function types wget_http_header_callback_t and
         wget_http_body_callback_t.
     * libwget/http.c: Implementation of the changes in include/libwget.h.in.
     * libwget/http_highlevel.c: Adapt code to API changes
     * libwget/ssl_gnutls.c: Fixed defaults for SNI, OCSP and
       ALPN.
       Adapt code to API changes.
     * src/options.c: Reflect changes in libwget/ssl_gnutls.c
     * src/wget.c: Adapt code to API changes

2016-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix compiler warnings
     
     * include/libwget.h.in: Declare wget_tcp_get_protocol as PURE
     * libwget/base64.c (wget_base64_decode, wget_base64_encode): Fix
       warning about missing switch() default
     * libwget/http.c (_on_header_callback): Add switch default case,
       (wget_http_request_to_buffer): Remove unused variable 'use_proxy'
     * libwget/ssl_gnutls.c (_print_info): Add switch default case
     * libwget/vector.c (wget_vector_findext): Replace switch by if/else
     * src/wget.c (_get_body): Check EAGAIN != EWOULDBLOCK via cpp

2016-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix compiler warnings in test suite
     
     * tests/libtest.c (wget_test_check_filesystem): Fix printf
       format warning
     * tests/test-parse-html.c (html_dump): Add switch default case,
       fix printf format warning

2016-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Suppress warning in auto-generated css_tokenizer.c
     
     * libwget/css_tokenizer.lex: Add GCC pragmas to suppress warnings
       when compiling libwget/css_tokenizer.c

2016-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Use gnutls_transport_[gs]et_int() in GnuTLS code if possible
     
     * configure.ac: Check for gnutls_transport_get_int()
     * libwget/ssl_gnutls.c: Use gnutls_transport_[gs]et_int() if possible
     
     Avoid int <-> pointer conversions

2016-06-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Use less warnings for gnulib compilation on --enable-gcc-warnings
     
     * autogen.sh: Add option --makefile-name=gnulib.mk to gnulib-tool
     * configure.ac: Add 'subdir-objects' to AM_INIT_AUTOMAKE,
       add macro 'gl_GCC_VERSION_IFELSE' from coreutils project,
       enable extra gcc warnings by default when running from Git repo,
       disable several warnings for gnulib compilation
     * lib/Makefile.am: New file

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add colors to debug and error output
     
     * src/log.c: Add _write_out(), _write_error(), _write_info()
     
     Errors are printed red (if output is a TTY), debug output is
     magenta/purple. Not configurable yet.

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Print blacklist entries as debug messages
     
     * src/blacklist.c (_blacklist_print): Call debug_printf()

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix printf format warnings
     
     * tests/buffer_printf_perf.c: Fix printf format warnings
     * tests/stringmap_perf.c: Likewise
     * tests/test.c: Likewise

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix printf format warnings
     
     * libwget/http.c: Fix printf format warnings
     * libwget/http_highlevel.c: Likewise
     * libwget/io.c: Likewise
     * libwget/ssl_gnutls.c: Likewise
     * src/wget.c: Likewise

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove warnings from gcc's -Wjump-misses-init
     
     * libwget/ssl_gnutls.c (_verify_certificate_callback):
      Move variable initialization upwards
     * src/wget.c (html_parse): Move variable initialization upwards

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not inline _no_memory()
     
     * libwget/xalloc.c: Remove _GL_INLINE from _no_memory()

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module 'manywarnings'
     
     * autogen.sh: Add module manywarnings
     * configure.ac: Add ./configure option --enable-gcc-warnings to enable
      many warnings
     * examples/Makefile.am: Add WERROR_CFLAGS and WARN_CFLAGS to AM_CFLAGS
     * libwget/Makefile.am: Likewise
     * src/Makefile.am: Likewise
     * tests/Makefile.am: Likewise

2016-06-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Update gnulib to latest master
     
     * gnulib: Sync with upstream

2016-06-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix FTP PASV listening in test suite
     
     * tests/libtest.c: Fix FTP PASV listening

2016-05-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "Support direct mpeg streams in examples/getstream.c"
     
     This reverts commit d3d7342e8063be0428549ebe4df66560b030074c.

2016-05-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Support direct mpeg streams in examples/getstream.c
     
     * examples/getstream.c: Support direct mpeg streams

2016-05-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Support audio/x-scpls in examples/getstream.c
     
     * examples/getstream.c (main): Fix m3u parsing, Add audio/x-scpls

2016-05-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Let test suite survive on case-sensitive filesystems (e.g. HFS+)
     
     * tests/libtest.c: New function wget_test_check_filesystem(),
       (_empty_directory, _remove_directory): Do not print
       errors about missing directories.
     * tests/libtest.h: Add define WGET_TEST_FS_CASEMATTERS
     * tests/test--accept.c: Renamed files to avoid casing problems
     * tests/test-wget-1.c: Skip casing tests on case-sensitive filesystem

2016-05-16 Tim Rühsen <tim.ruehsen@gmx.de>

     Check value of --progress option
     
     * src/options.c: New parse function parse_progress_type
     * src/options.h: Change type of config.progress to char

2016-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix and enhance examples/getstream.c
     
     * autogen.sh: Add gnulib module 'c-strcasestr'
     * examples/getstream.c: Support several playlist formats
     
     getstream.c now supports .m3u, .wax, .asx, .pls, xspf playlist formats.
     Playlist parsing is partly hackish - it is just an example after all.
     
     The title information is displayed on stderr, the audio goes to stdout to
     allow piping to mpg321, sox, etc. For details see the top comment in the
     source file.

2016-05-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Support ICY response (shoutcast response)
     
     * libwget/http.c(wget_http_parse_response_header): Check for ICY response

2016-05-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add option --content-on-error
     
     * src/options.c: Add --content-on-error to options and to help text
     * src/options.h: Add content_on_error to struct config
     * src/wget.c: Check config.content_on_error
     * tests/test-wget-1.c: Add tests for --content-on-error

2016-05-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not use Proxy-Connection header field (RFC 7230 A.1.2.)
     
     * libwget/http.c (wget_http_request_to_buffer): Do not create
       Proxy-Connection header field for requests.

2016-05-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Add MinGW recipe/script
     
     * contrib/mingw: New file

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Adjust LDFLAGS for MinGW
     
     * examples/Makefile.am: Add -no-install to AM_LDFLAGS
     * libwget/Makefile.am: Add -no-undefined to libwget_la_LDFLAGS

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add EXEEXT to test suite executables
     
     * tests/Makefile.am: Add $(EXEEXT) to executable names
     * tests/libtest.c: Add EXEEXT to wget2 executable,
       add support for EMULATOR env variable - e.g. to test with wine

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Determine home directory in a portable fashion
     
     * src/options.c (get_home_dir): Use gnulib glob() to get home directory

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix includes for Windows
     
     * libwget/http.c: Include ws2tcpip.h instead of sys/socket.h when available
     * libwget/net.c: Likewise

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix warnings
     
     * libwget/http.c (wget_http_add_credentials): Fix snprintf format warnings

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix async sockets for Windows
     
     * libwget/net.c (_set_async): Add code path for Windows

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add missing gnulib modules
     
     * autogen.sh: Add gnulib modules fsync, recv, recvfrom, socklen

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix build for systems without getuid()
     
     * configure.ac: Check for getuid()
     * libwget/io.c (wget_update_file): Check for HAVE_GETUID

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix --enable-bzip2/--disable-bzip2
     
     * configure.ac: Fix AC_ARG_WITH for bzip2

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix wget_srandom()
     
     * include/libwget.h.in: Adjust wget_random() return type to int
     * libwget/random.c (libwget/random.c): Use initstate_r() for seeding,
       (wget_srandom): Use initstate_r() for seeding

2016-05-08 Tim Rühsen <tim.ruehsen@gmx.de>

     gnulib: sync from upstream

2016-05-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --force-* options to docs
     
     * wget2_manual.md: Add description for --force-css, --force-sitemap,
       --force-atom, --force-rss, -force-metalink

2016-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix docs for wget_srandom()
     
     * libwget/random.c: Fix param description

2016-04-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for robots.txt parsing
     
     * libwget/robots.c: Add Doxygen docs
     * docs/Makefile.am: Add rule for man page

2016-04-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Support parsing of UTF-16 HTML documents
     
     * examples/print_html_urls.c (html_parse_localfile):
       Detect BOM (Byte Order Mark), convert UTF-16 to UTF-8 before parsing.
     * include/libwget.h.in: Remove wget_charset_transcode(),
       add wget_memiconv() and wget_striconv().
     * libwget/encoding.c: Implement wget_memiconv() and wget_striconv()
     * src/wget.c (html_parse): Add 'html_len' param,
       convert UTF-16 to UTF-8 before parsing.
     * tests/test.c: New test for wget_memiconv().

2016-04-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for Atom and Sitemap URL extraction functions
     
     * libwget/atom_url.c: Add Doxygen docs
     * libwget/sitemap_url.c: Add Doxygen docs
     * docs/Makefile.am: Add rules for man pages
     * libwget/base64.c: Fix text

2016-04-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for base64 functions
     
     * libwget/base64.c: Add Doxygen docs
     * docs/Makefile.am: Add rule for man page

2016-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add option --fsync-policy
     
     * src/options.c (print_help): Add short description,
       (options): Add new option
     * src/options.h (struct config): Add fsync_policy
     * src/wget.c (http_get): Check config.fsync_policy before fsync()
     
     --fsync-policy calls fsync() for each downloaded file.
     This effectively waits until all data is written to hard disk before
     wget continues. It slows down the performance - depending on the
     speed of your storage.

2016-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Write files non-blocking
     
     * src/wget.c (_prepare_file): Use O_NONBLOCK for open(),
       (_get_header): Likewise,
       (_get_body): Wait for writability if needed,
       (http_get): Code cleanups

2016-04-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/net.c (wget_tcp_read): Use recvfrom() instead of write()

2016-04-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix error message
     
     * libwget/http.c (wget_http_get_response_cb): Fix message about
       incomplete download

2016-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     * po/POTFILES.in: libwget/compat.c -> libwget/strlcpy.c

2016-04-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Renamed libwget/compat.c -> libwget/strlcpy.c

2016-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename --follow-metalink to --metalink
     
     * src/options.c, src/options.h, src/wget.c, tests/test-metalink.c:
       Rename --follow-metalink to --metalink, rename config.follow_metalink
       to config.metalink.

2016-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Share code for Metalink V3 and V4
     
     * libwget/metalink.c: New functions _add_piece, _add_file_hash,
       _add_mirror called by metalink V3 + V4 code in _metalink_parse().

2016-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests for RFC 6249 Metalink in HTTP headers
     
     * tests/test-metalink.c: Add tests

2016-04-02 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix memory leak in Metalink V3 parser
     
     * libwget/metalink.c (_metalink_parse): Set destructor for mirror vector

2016-03-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests for Metalink
     
     * tests/Makefile.am: Add test-metalink
     * tests/test-metalink.c: New file
     
     This new tests are
     - --no-follow-metalink
     - metalink v3, without pieces
     - metalink v4, without pieces
     - metalink v4, with pieces

2016-03-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --force-metalink
     
     * libwget.h.in: Remove metalink3_parse, metalink4_parse,
       Add wget_metalink_parse
     * libwget/metalink.c: Merge metalink4_parse() and metalink3_parse()
       into wget_metalink_parse(),
       Only store HTTP and HTTPS mirrors
     * src/job.c: Adjust debug message
     * src/options.c: Add --force-options
     * src/options.h: Add config.force_metalink
     * src/wget.c: New function metalink_parse_localfile()

2016-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     *src/options.c: Allow --(no-)follow-metalink without argument

2016-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not use hard-coded user-agent in robots library code
     
     * include/libwget.h.in: Update prototype of wget_robots_parse()
     * libwget/robots.c (wget_robots_parse): Add client name as parameter
     * src/wget.c: Call wget_robots_parse() with PACKAGE_NAME as client name

2016-03-29 Tim Rühsen <tim.ruehsen@gmx.de>

     Set default User-Agent: to PACKAGE_NAME"/"PACKAGE_VERSION
     
     * src/options.c: Set PACKAGE_NAME"/"PACKAGE_VERSION as user agent

2016-03-28 Giuseppe Scrivano <gscrivan@redhat.com>

     wget: new option --follow-metalink
     
     * src/options.h (struct config): Define follow_metalink.
     * src/options.c (print_help): Add description for follow-metalink.
     (struct options): Add follow-metalink.
     (struct config): Initialize follow_metalink.
     (init): do not follow metalink files when --mirror is used.
     * src/wget.c (downloader_thread): Skip following metalinks when follow_metalink is off.
     (_get_header): Store the metalink file when follow_metalink is false.

2016-03-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Allow options and URLs in any order
     
     * src/options.c (parse_command_line): Reorder URLs after options
     * src/options.h: Fix init() prototype
     * src/wget.c, tests/test-parse-html.c, tests/test.c:
       Fix main() argv argument

2016-03-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix metalink code to download files without pieces
     
     * src/job.c (job_validate_file): Accept files without pieces

2016-03-27 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/metalink.c (_metalink4_parse): Set piece.position to 0

2016-03-26 Giuseppe Scrivano <gscrivan@redhat.com>

     src/wget.c (_get_header): Do not store metalink files
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs in markdown format
     
     * DoxygenLayout.xml: Set mainpage title
     * libwget.doxy.in: Scan docs, add mainpage.md as main page
     * mainpage.md: New file
     * faq.md: New file
     * wget2_manual.md: New file, derived from wget.texi

2016-03-24 Giuseppe Scrivano <gscrivan@redhat.com>

     http: fix multi part files
     
     * src/wget.c (download_part): Read temp part for the temporary files.
     (_get_header): Write part file to the destination file.
     (http_get): Keep a temporary fd for the file parts.
     (struct _body_callback_context): Add 'head' and 'part'.
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-20 Giuseppe Scrivano <gscrivan@redhat.com>

     Fix compiler warnings
     
     * include/libwget.h.in (wget_bar_init, wget_bar_update,
     wget_bar_print): Change types to int and off_t.
     * libwget/bar.c (wget_bar_init, wget_bar_update,
     wget_bar_print): Change types to int and off_t.
     * src/wget.c (_prepare_file): Add prototype.  Change type of rc to
     size_t.
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-19 Giuseppe Scrivano <gscrivan@redhat.com>

     wget: use safe_write module from gnulib
     
     * autogen.sh: Add module 'safe-write'.
     * src/wget.c (_prepare_file): Use safe_write instead of write.
     (_get_body): Likewise.
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-18 Giuseppe Scrivano <gscrivan@redhat.com>

     Do not parse more than 10M and stream directly to disk
     
     * src/wget.c (downloader_thread): drop code to save/append to file.
     (_prepare_file): New function based on _save_file. Open the fd and
     don't write any payload.
     (_body_callback_context): Add outfd, max_memory, length.
     (_get_header): Set the destination file here and keep the fd.
     (_get_body): Keep in memory only what was specified, stream the rest
     directly to file.
     (http_get): Always use wget_http_get_response_cb instead of
     wget_http_get_response.  Close the file fd that was opened in
     _prepare_file.
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-16 Giuseppe Scrivano <gscrivan@redhat.com>

     Use size_t instead of int for progress bar status
     
     * include/libwget.h.in (wget_bar_init): Change type of nslots and max
     from int to size_t.
     (wget_bar_deinit): Likewise.
     (wget_bar_update): Likewise.
     (wget_bar_print): Likewise.
     (wget_bar_vprintf): Likewise.
     (wget_bar_printf): Likewise.
     * libwget/bar.c (wget_bar_init): Change type of nslots and max
     from int to size_t.
     (wget_bar_deinit): Likewise.
     (wget_bar_update): Likewise.
     (wget_bar_print): Likewise.
     (wget_bar_vprintf): Likewise.
     (wget_bar_printf): Likewise.
     * src/bar.h (bar_init): Change type of nslots and max from
     int to size_t.
     (bar_deinit): Likewise.
     (bar_update): Likewise.
     (bar_print): Likewise.
     (bar_vprintf): Likewise.
     (bar_printf): Likewise.
     * src/bar.c (bar_init): Change type of nslots and max from
     int to size_t.
     (bar_deinit): Likewise.
     (bar_update): Likewise.
     (bar_print): Likewise.
     (bar_vprintf): Likewise.
     (bar_printf): Likewise.
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-16 Giuseppe Scrivano <gscrivan@redhat.com>

     libwget/http.c: Rename HTTP_CTYPE_SEPERATOR to HTTP_CTYPE_SEPARATOR
     
     Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>

2016-03-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Tune cookie parsing
     
     * include/libwget.h.in: Add sort_age to struct wget_cookie_st
     * libwget/cookie.c: Many code enhancements
     * libwget/http.c (wget_http_parse_setcookie): Relax parsing,
       (wget_http_parse_setcookie): Allow \n and \r\n as EOL
     * libwget/private.h: Add missing #includes
     * tests/Makefile.am: Add disabled test-cookies-http_state
     * tests/test-cookies-http_state.c: New cookie test
     
     There still 30 out of 220 tests failing, before this commit we had
     135 failing. The left over tests are mainly corner cases, but feel free
     to work on it. When all tests pass, we enable test-cookies-http_state
     in Makefile.am.

2016-03-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Update .gitignore
     
     * .gitignore: Updated

2016-03-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new examples websequencediagram[_highlevel]
     
     * examples/websequencediagram.c: New file
     * examples/websequencediagram_high.c: New file
     * examples/Makefile.am: Add websequencediagram[_highlevel]
     
     These examples show how to do two requests on one connection,
     a POST and a GET, saving the downloaded body to disk.
     websequencediagram uses the low-level API.
     websequencediagram_highlevel uses the high-level API.

2016-03-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Add WGET_HTTP_SCHEME, WGET_HTTP_BODY, WGET_HTTP_BODY_SAVEAS for wget_http_get()
     
     * include/libwget.h.in: Add WGET_HTTP_SCHEME, WGET_HTTP_BODY,
       WGET_HTTP_BODY_SAVEAS
     * src/http_highlevel.c: Implement WGET_HTTP_SCHEME, WGET_HTTP_BODY,
       WGET_HTTP_BODY_SAVEAS

2016-03-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Use wget2 without libtool wrapper for test suite
     
     * src/Makefile.am: Add wget2_noinstall target
     * src/wget.c: On exit, only release memory within test suite
     * tests/libtest.c: Call wget2_noinstall for testing

2016-03-14 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix superfluous 'Unsupported cookie-av' message
     
     * libwget/http.c (wget_http_parse_setcookie): Break on end-of-string

2016-03-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add 'make check-valgrind' to simplify valgrind checking
     
     * Makefile.am: Add rule 'check-valgrind'

2016-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Add support for HTML5 srcset attribute in IMG tags
     
     * libwget/html_url.c: Add scanning srcset values
     * tests/test--page-requisites.c: Add srcset test cases

2016-03-01 Tim Rühsen <tim.ruehsen@gmx.de>

     Use TravisCI .svg image
     
     * README.md: Use TravisCI .svg image

2016-02-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove unneeded variable in options.c
     
     * src/options.c (main): Remove varibale 'truncated'

2016-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for memory functions
     
     * libwget/mem.c: Add docs
     * docs/Makefile.am: Add rule for man pages
     * include/libwget.h.in: Cosmetic adjustments

2016-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for MD5 convenience functions
     
     * libwget/md5.c: Add docs
     * docs/Makefile.am: Add rule for man pages

2016-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/http.c: Remove #define MD5_DIGEST_LENGTH

2016-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Remove bug introduced when fixing Coverity

2016-02-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix / silence some Coverity findings

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/Makefile.am: Remove redundant list of man files

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/iri.c: Make iri_ports static

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * docs/Makefile.am: Add rule for xalloc man page

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Fix the fix of 48c1f0961ee566287543f4149dbfc7fb5ba2b7bf

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/io.c: Fix some small glitches in Doxygen area

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/encoding.c: Use '#ifdef WITH_LIBIDN' instead of '#if'

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for printf functions
     
     * libwget/printf.c: Convert GTK-DOC format into Doxygen
     * docs/Makefile.am: Add rule for man pages

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/ssl_gnutls.c: Fix clang warnings

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for memory functions
     
     * libwget/xalloc.c: Convert GTK-DOC format into Doxygen
     * docs/Makefile.am: Add rule for man pages

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     * libwget/utils.c: Fix docs, rename function param

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix argument to srandom()
     
     * libwget/random.c: Cast argument to unsigned int

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix docs for wget_srandom()
     
     * libwget/random.c: Fix docs for wget_srandom()

2016-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix check for BUILDING_LIBWGET
     
     * include/libwget.h.in: Use '#if defined' instead of '#if'

2016-02-03 Tim Rühsen <tim.ruehsen@gmx.de>

     Cosmetics
     
     * libwget/thread.c: Fix comment after #endif
     * src/wget.c (main): Remove unwanted spaces in if clause

2016-02-03 Giuseppe Scrivano <gscrivan@redhat.com>

     autogen.sh: add 'stdbool' to libwget_gnulib_modules

2016-02-02 Giuseppe Scrivano <gscrivan@redhat.com>

     Honor --disable-threads and support no threading
     
     * include/libwget.h.in: Include <stdbool.h>.
     Define wget_thread_support().
     * libwget/thread.c: Change condition to check
     for threading support.
     (wget_thread_support): New function.
     (wget_thread_start): [!USE_POSIX_THREADS && !USE_PTH_THREADS]
     Invoke directly the function.
     * src/wget.c (main): If no threads are supported then set the
     number of max threads to 1.  If the queue is not empty, call again the
     downloader function.  It will be used only in case no threads are
     available.
     (downloader_thread): Do not wait for new elements in the queue
     when there are no threads.
     * tests/libtest.c (wget_test_start_server): Skip the test if
     there is no threads support.

2016-02-02 Giuseppe Scrivano <gscrivan@redhat.com>

     Fix build when threads are not used
     
     * include/libwget.h.in: [! PTHREAD_MUTEX_INITIALIZER]: Define
     WGET_THREAD_COND_INITIALIZER.

2016-01-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Set default for --waitretry to 10s
     
     src/options.c (struct config config): Init .waitretry with
       10000 milliseconds.

2016-01-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Check for CTRL-C in timer loops
     
     * src/wget.c (downloader_thread, download_part): Abort on CTRL-C

2016-01-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Updated copyright year for all relevant files

2016-01-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Add helper script for updating copyright dates
     
     contrib/update_copyright: New file

2016-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Disable valgrind tests on Travis CI for Mac OS X
     
     * .travis.yml: Do not install valgrind in OS X
     * .travis.sh: Disable valgrind tests for OS X

2016-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Install valgrind for Travis CI on linux
     
     * .travis.yml: Add valgrind to packages
     * .travis.sh: Output tests/test.log

2016-01-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Switch to Travis-CI valgrind testing
     
     * .travis.sh: Add --enable-valgrind-tests to ./configure,
       export VALGRIND_TESTS=1
     * .travis.yml: Install valgridn on Mac OS X
     * tests/libtest.c: Add --max-threads=1 --prefer-family=ipv4 to wget2 command

2016-01-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add $(LIB_PTHREAD) to makefiles
     
     * examples/Makefile.am, libwget/Makefile.am, src/Makefile.am,
       tests/Makefile.am: Add $(LIB_PTHREAD)

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Add thread-safe wrapper code around random() and srandom()
     
     * docs/Makefile.am: Add wget_random and wget_srandom to docs
     * include/libwget.h.in: Add wget_random and wget_srandom
     * libwget/Makefile.am: Add random.c
     * libwget/http.c: Use wget_random()
     * libwget/random.c: New file with wget_random and wget_srandom
     * src/options.c: Remove call to srandom()

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix Travis-CI files for Mac OS X
     
     * .travis.sh: Remove 'allow_failures', Call .travis.sh script,
       Install needed packages via 'brew', Remove configuration, building, testing
     * .travis.sh: Add configuration, building, testing

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix test suite for Mac OSX
     
     * tests/libtest.c (_http_server_thread): Accept HTTP msg when chunked,
       Fix removing test directories,
       (wget_test_start_server) Remove stale test directories,
       Prefer IPv4, Start FTPS thread only if needed,
       (_scan_for_unexpected) Skip test for unexpected files on Mac OSX,
       (wget_test) Add --max-threads and --prefer-family=ipv4 to wget2 command,
       Remove MSWindows conditional code

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove libpthread check from configure.ac
     
     * configure.ac: Remove check for libpthread
     * include/libwget.h.in: Check HAVE_PTHREAD_H,
       Do not undefine gettext
     * libwget/thread.c: Check HAVE_PTHREAD_H
     
     This check is done by gnulib 'pthread' module.

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Use gnulib gettime() instead of clock_gettime()
     
     * src/log.c, src/wget.c: Call gettime() instead of clock_gettime()

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib modules gettime and pthread
     
     * autogen.sh: Add gnulib modules gettime and pthread

2016-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix DNS caching
     
     * libwget/net.c (_wget_dns_cache_add): Allow NULL for port
       Remove several #ifdefs (should be handled by gnulib now)

2016-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Let mkdir() be handled by gnulib
     
     * src/wget.c: Remove conditional around mkdir()

2016-01-19 Giuseppe Scrivano <gscrivan@redhat.com>

     Fix the /dev/null usage
     
     * src/wget.c: do not create the directory if the first character is
     '/'.
     * tests/test-base.c: add test for -O/dev/null.

2016-01-19 Giuseppe Scrivano <gscrivan@redhat.com>

     Fix compiler warning
     
     * libwget/ssl_gnutls.c (_print_info): Always consider GNUTLS_CRD_SRP

2016-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for utils functions
     
     * docs/Makefile.am: Add libwget-utils.3
     * libwget/utils.c: Add utils function docs

2016-01-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for I/O functions
     
     * docs/Makefile.am: Add libwget-io.3
     * libwget/io.c: Add I/O function docs

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add docs for hash functions
     
     * docs/Makefile.am: Add libwget-hash.3
     * include/libwget.h.in: Remove hash function docs
     * libwget/hashfile.c: Add hash function docs

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not sort document members
     
     * docs/libwget.doxy.in: Set SORT_MEMBER_DOCS = NO

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Enable reading of config.h for docs generation
     
     * docs/libwget.doxy.in: Enable reading of config.h

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Extend .gitignore
     
     * .gitignore: Add entries and sort with LC_ALL=C

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add contrib/check-hard for maintainer testing
     
     * contrib/check-hard: New file

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add logo to HTML docs
     
     * docs/gen-logo.sh: Add script to generate logo via imagemagick
     * docs/wget-logo.png: Add generated logo
     * docs/libwget.doxy.in: Include logo into docs

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add wget_list_t to docs group libwget-list
     
     * include/libwget.h.in: Add wget_list_t to docs group libwget-list

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove NULL check in list code
     
     * libwget/list.c (wget_list_remove): Remove checking first param for NULL.
     
     Since the function is declared with the first param being NON-NULL, gcc will
     silently remove the check anyways. Clang even complains about the check.

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove NULL check in vector code
     
     * libwget/vector.c (wget_vector_add_str): Remove checking second param
       for NULL.
     
     Since the function is declared with 's' being NON-NULL, gcc will silently
     remove the check anyways. Clang even complains about the check.

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix resource leak when using libgcrypt for hashing
     
     * libwget/hashfile.c (wget_hash_deinit): Close gcrypt context

2016-01-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Add error code WGET_E_TLS_DISABLED
     
     * include/libwget.h.in: New define for WGET_E_TLS_DISABLED

2016-01-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Tweak doxygen config file
     
     * docs/libwget.doxy.in: Hide absolute path in file names,
       exclude private header files of libwget/,
       exclude symbols starting with _

2016-01-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Use README.md as main page in HTML docs
     
     * docs/libwget.doxy.in: Add README.md to INPUT

2016-01-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Use doxygen instead of gtk-doc
     
     * Removed all gtk-doc files and references.
     * Added doxygen files and rules

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix double linkage finally
     
     * tests/Makefile.am: Link only once per lib to avoid warnings

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix wrong argument fetch in buffer printf routine
     
     * libwget/buffer_printf.c (wget_buffer_vprintf_append): Fetch long value
       from stack instead of long long with %l[dioux]
     
     Found on Solaris 11 SPARC

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix Solaris issue in tests/Makefile.am
     
     * tests/Makefile.am: Link only once per lib to avoid warnings

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix libwget/Makefilea. for Solaris
     
     * libwget:/Makefile.am: Add ../lib/libgnu.la to test_linking_LDADD

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module progname
     
     Without this we have an unresolved symbol 'program_name' on
     Solaris.

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Include config.h on top in css_tokenizer.c
     
     * libwget/Makefile.am: Add #include "config.h" to top of css_tokenizer.c
     
     Found this issue on OpenSolaris

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add symbol visibility control to libwget
     
     * autogen.sh: Add gnulib module lib-symbol-visibility,
       add --libtool to gnulib-tool invokation
     * examples/Makefile.am: Remove -static from AM_LDFLAGS,
       remove ../lib/libgnu.a from LDADD
     * include/libwget.h.in: Define LIBWGET_EXPORT,
       add LIBWGET_EXPORT to all visible symbols
     * libwget/Makefile.am: Remove AM_CPPFLAGS and LDADD,
       add libwget_la_CPPFLAGS and libwget_la_LIBADD,
       add test_linking_CPPFLAGS, fix test_linking_LDADD
     * libwget/iri.c: Add LIBWGET_EXPORT to wget_iri_schemes and iri_ports
     * src/Makefile.am: Remove wget2_LDFLAGS, fix wget2_LDADD
     * tests/Makefile.am: Fix LDADD, fix test_LDADD, fix test_parse_html_LDADD,
       fix libtest_la_CPPFLAGS and libtest_la_LIBADD
     * tests/libtest.h: Add LIBWGET_EXPORT to symbols

2016-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Exclude private header files from gtk-doc parsing
     
     * docs/libwget/Makefile.am: Add net.h and css_tokenizer.h to IGNORE_HFILES

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove vasprintf from configure.ac
     
     * configure.ac: Remove vasprintf from AC_CHECK_FUNCS

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Add more gnulib modules
     
     * autogen.sh: Add more gnulib modules
     
     What came across my eyes:
     closedir
     fclose
     fdopen
     fflush
     fopen
     fstat
     mkstemp
     opendir
     spawn-pipe
     popen
     random_r (change random() -> random_r() in a follow-up commit)
     readdir
     rename
     stat
     strtoll
     time_r
     unlink

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Removed redundant buffer print routines
     
     Removed wget_buffer_vprintf_append, wget_buffer_printf_append,
     wget_buffer_vprintf2 and wget_buffer_printf2.
     Renamed their *2 counterpart to their old names.

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Added printf-style functions
     
     * libwget/printf.c: New file
     * docs/libwget/Makefile.am: Add libwget-printf.3
     * docs/libwget/libwget-docs.sgml: Add printf section
     * docs/libwget/libwget-sections.txt: Add SECTION libwget-printf
     * include/libwget.h.in: Add function prototypes
     * libwget/Makefile.am: Add printf.c
     * libwget/base64.c, libwget/http.c, libwget/iri.c, libwget/logger.c,
       libwget/md5.c, libwget/vector.c, src/options.c:
       Use new functions instead of asprintf/vasprintf

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Use c-ctype.h where possible
     
     * libwget/atom_url.c, libwget/buffer_printf.c, libwget/css.c,
       libwget/html_url.c, libwget/http.c, libwget/rss_url.c, libwget/sitemap_url.c,
       src/options.c src/wget.c, tests/libtest.c, tests/test-parse-html.c:
       Use c-ctype.h where possible

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Use ASCII comparison fpr file extensions
     
     * src/wget.c (_save_file): Use wget_strcasecmp_ascii

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace strcpy
     
     * libwget/net.c (_wget_dns_cache_add, wget_tcp_set_bind_address):
       Replace strcpy by memcpy
     * src/wget.c (_convert_links): Replace strcpy by snprintf
     * src/wget.c (downloader_thread): Replace strcpy by C99 initializer
     * src/wget.c (_save_file): Replace strcpy by memcpy
     * tests/test-wget-1.c (main): Replace strcpy by memcpy

2016-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove redundant code from buufer routines
     
     * libwget/buffer.c (wget_buffer_strcpy, wget_buffer_strcat):
       Remove redundant code

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib modules memchr, memmove, memset, mkdir, strerror, strstr
     
     * autogen.sh: Add gnulib modules memchr, memmove, memset, mkdir, strerror, strstr
     * configure.ac: Remove checks for memchr, memmove, memset, mkdir,
       strerror, strstr, strchr, strrchr

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module inline
     
     * autogen.sh: Add gnulib module inline
     * configure.ac: Remove AC_C_INLINE
     * libwget/hashmap.c: Replace inline by _GL_INLINE
     * libwget/iri.c: Replace inline by _GL_INLINE
     * libwget/ssl_gnutls.c: Replace inline by _GL_INLINE
     * libwget/utils.c: Replace inline by _GL_INLINE
     * libwget/xalloc.c: Replace inline by _GL_INLINE,
       include config.h

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib modules calloc-posix, malloc-posix, realloc-posix
     
     * autogen.sh: Add gnulib modules calloc-posix, malloc-posix, realloc-posix
     * configure.ac: Remove two comment lines
     * libwget/xalloc.c: Remove rpl_malloc() and rpl_realloc()

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module setlocale
     
     * autogen.sh: Add gnulib module setlocale
     * configure.ac: Remove searching for setlocale, locale.h, sys/time.h
     * src/wget.c: Move #include <locale.h> (cosmetics)
     * examples/Makefile.am: Add $(LIBTHREAD), @INTL_MACOSX_LIBS@ to LDADD
     * libwget/Makefile.am: Add to $(LTLIBTHREAD), @INTL_MACOSX_LIBS@ LDADD
     * src/Makefile.am: Add $(LIBTHREAD), @INTL_MACOSX_LIBS@ to LDADD
     * tests/Makefile.am: Add $(LIBTHREAD), @INTL_MACOSX_LIBS@ to LDADD

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module sys_stat, sys_file, sys_types
     
     * autogen.sh: Add gnulib module sys_stat, sys_file, sys_types

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module sys_time
     
     * autogen.sh: Add gnulib module sys_time

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module errno
     
     * autogen.sh: Add gnulib module errno

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module langinfo
     
     * autogen.sh: Add gnulib module langinfo
     * configure.ac: Remove searching for stringprep.h and langinfo.h
     * libwget/encoding.c: Remove conditional code

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module iconv
     
     * autogen.sh: Add gnulib module iconv
     * configure.ac: Remove AM_ICONV
     * examples/Makefile.am: Add $(LIBICONV) to LDADD
     * libwget/Makefile.am: Add $(LIBICONV) to LDADD
     * src/Makefile.am: Add $(LIBICONV) to LDADD
     * tests/Makefile.am: Add $(LIBICONV) to LDADD

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Cover network functions with gnulib modules
     
     * autogen.sh: Add accept, bind, close, connect, getaddrinfo, getsockname,
       listen, netdb, netinet_in, open, read, send, sendto, servent, setsockopt,
       socket, sys_socket, write to modules
     * configure.ac: Remove searching for ws2_32, libsocket, libnsl, netdb.h,
       netinet/in.h, sys/socket.h, socket.
       Add searching for netinet/tcp.h.
     * examples/Makefile.am: Add additional libs.
     * libwget/Makefile.am: Add additional libs.
     * src/Makefile.am: Add additional libs.
     * tests/Makefile.am: Add additional libs.
     * libwget/http.c: Remove conditional code.
     * libwget/net.c: Remove conditional code. Use c_isdgit().
     * libwget/net.h: Remove conditional code.

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Use gnulib module strdup-posix instead of strdup
     
     * autogen.sh: Replace strdup by strdup-posix

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Check if gcc __sync_fetch_and_add works with long long
     
     * configure.ac: Check if gcc __sync_fetch_and_add works with long long
     * src/wget.c (_fetch_and_add_longlong): Check WITH_SYNC_FETCH_AND_ADD_LONGLONG

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add compatibility to older flex versions
     
     * libwget/Makefile.am: Remove space between -o and filename

2016-01-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add header file gnulib modules
     
     * autogen.sh: Add gettext-h, inttypes, stdarg, stddef, stdint
     * configure.ac: Remove check for inttypes.h, libintl.h, stddef.h
       Remove AC_TYPE_* checks
     * include/libwget.h.in: Include gnulib gettext.h
     * examples/Makefile.am: Fix AM_CPPFLAGS, add $(LIBINTL) to LDADD
     * libwget/Makefile.am: Fix LDADD and test_linking_LDADD
     * src/Makefile.am: Add $(LIBINTL) to wget2_LDADD
     * tests/Makefile.am: Fix AM_CPPFLAGS and libtest_la_CPPFLAGS,
       add $(LIBINTL) to LDADD, test_LDADD and test_parse_html_LDADD

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove detection of select() from configure.ac
     
     * configure.ac: Remove detection of select()
     * src/wget.c: Remove commented include directives

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add $(LIB_POLL) to *_LDADD
     
     * examples/Makefile.am, src/Makefile.am, tests/Makefile.am:
       Add $(LIB_POLL) to *_LDADD

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module poll
     
     * autogen.sh: Add gnulib module poll
     * configure.ac: Remove searching for poll.h and sys/poll.h
     * libwget/io.c: Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use stdlib.h and unistd.h from gnulib
     
     * configure.ac: Remove searching for stdlib.h and unistd.h

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module pwrite
     
     * autogen.sh: Add gnulib module pwrite
     * configure.ac: Remove searching for pwrite
     * src/wget.c(download_part): Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module qsort_r
     
     * autogen.sh: Add gnulib module qsort_r
     * configure.ac: Remove qsort_r code
     * libwget/vector.c: Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Call wget_str(n)casecmp_ascii instead of str(n)casecmp
     
     * examples/print_css_urls2.c, libwget/cookie.c, libwget/css.c,
       libwget/html_url.c, libwget/http.c, libwget/iri.c, libwget/metalink.c,
       libwget/net.c, libwget/robots.c, libwget/ssl_gnutls.c,
       libwget/stringmap.c, libwget/xml.c, src/job.c, src/options.c, src/wget.c:
       Call wget_str(n)casecmp_ascii instead of str(n)casecmp

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib modules c-strcase, c-ctype and strcase
     
     * autogen.sh: Add gnulib modules c-strcase, c-ctype and strcase
     * configure.ac: Remove search for string.h, strings.h, str(n)casecmp
     * libwget/utils.c: Use c_str(n)casecmp, c_isupper, c_isxdigit

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Update po/POTFILES.in
     
     * po/POTFILES.in: Add src/bar.c and src/options.c,
       Remove libwget/printf.c

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove libwget/printf.c
     
     * configure.ac: Remove check for dprintf
     * include/libwget.h.in: Remove dprintf/vdprintf prototypes
     * libwget/Makefile.am: Remove printf.c from file list
     * libwget/printf.c: Remove file

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use dup2 gnulib fallback
     
     * autogen.sh: Add dup2 to gnulib modules
     * configure.ac: Remove searching for dup2()
     * libwget/pipe.c: Remove commented includes

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove usage of alloca()
     
     * libwget/hashfile.c (wget_hash_file_fd): Do not use alloca()
     * src/options.c (_read_config): Do not use alloca()

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add $(LIB_CLOCK_GETTIME) to tests
     
     * tests/Makefile.am: Add $(LIB_CLOCK_GETTIME)

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use strndup gnulib fallback
     
     * autogen.sh: Add strndup to gnulib modules
     * configure.ac: Remove searching for strndup()
     * include/libwget.h.in: Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove searching for usleep
     
     * configure.ac: Remove searching for usleep()

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use glob gnulib fallback
     
     * autogen.sh: Add glob to gnulib modules
     * configure.ac: Remove searching for glob() and glob.h
     * src/options.c: Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use nanosleep gnulib fallback
     
     * autogen.sh: Add nanosleep to gnulib modules
     * configure.ac: Remove searching for nanosleep
     * examples/Makefile.am: Add $(LIBSOCKET) $(LIB_NANOSLEEP) $(LIB_SELECT)
     * src/Makefile.am: Add $(LIBSOCKET) $(LIB_NANOSLEEP) $(LIB_SELECT)
     * tests/Makefile.am: Add $(LIBSOCKET) $(LIB_NANOSLEEP) $(LIB_SELECT)
     * libwget/utils.c: Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Use futimens gnulib fallback
     
     * autogen.sh: Add futimens to gnulib modules
     * configure.ac: Remove searching for futimens
     * src/wget.c: Remove conditional code

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace gettimeofday by clock_gettime
     
     * configure.ac: Remove check for gettimeofday
     * src/log.c: Remove #include <sys/time>
     * src/log.c (_write_debug): Use clock_gettime instead of gettimeofday

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove searching for fnmatch and fnmatch.h
     
     * configure.ac: Remove searching for fnmatch and fnmatch.h

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove searching for fcntl.h
     
     * configure.ac: Remove searching for fcntl.h

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix AC_CHECK_FUNCS for gnutls functions
     
     * configure.ac: Remove 'gnutls' from AC_CHECK_FUNCS()

2016-01-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib module clock-time
     
     * autogen.sh: Add clock-time to gnulib modules
     * configure.ac: Remove searching for clock_gettime
     * src/Makefile.am: Add $(LIB_CLOCK_GETTIME) to wget2_LDADD
     * src/wget.c (set_file_mtime): Remove conditional code

2016-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace fnmatch function by gnulib fnmatch
     
     * src/compat_fnmatch.c: Removed
     * src/compat_fnmatch.h: Removed
     * autogen.sh: Add fnmatch to gnulib modules
     * src/Makefile.am: Remove compat_fnmatch.[ch]
     * src/wget.c: Unconditionally include fnmatch.h

2016-01-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove test-ftp and test-ftps from test suite
     
     * tests/Makefile.am: Remove test-ftp and test-ftps
     
     These test were introduced as helpers for FTPS integration for
     Wget1.x (GSOC 2015 project). We disable them until Wget2 supports
     FTP/FTPS.

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix branch name in Travis-CI icon URL

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add Travis-CI status icon

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Really fix return code of wget_str(n)casecmp_ascii
     
     * libwget/utils.c (wget_strcasecmp_ascii, wget_strncasecmp_ascii):
       Fix return value

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix return code of wget_strcasecmp_ascii and wget_strncasecmp_ascii
     
     * libwget/utils.c (wget_strcasecmp_ascii, wget_strncasecmp_ascii):
       Fix return value

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Link with libgnu.a
     
     * libwget/Makefile.am: Add lib/ to AM_CPPFLAGS, add libgnu.a to *_LDADD
     * src/Makefile.am: Same
     * tests/Makefile.am: Same, rename object files to link with tests

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix OpenSolaris libidn include directory
     
     * configure.ac: Search for idn/idna.h
     * libwget/encoding.c: Include idn/idna.h if found

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add flock to gnulib modules
     
     * autogen.sh: Add flock to gnulib modules

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix Name + Libs in pkg-config file
     
     * libwget.pc.in: Set Name to libwget and change -llibwget to -lwget

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove API version from library file names
     
     * .gitignore, Makefile.am, configure.ac, examples/Makefile.am,
       libwget.pc.in, libwget/Makefile.am, src/Makefile.am, tests/Makefile.am:
       Remove API version from library file names

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Build shared library by default
     
     * configure.ac: Add disable-static to LT_INIT

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Hook gnulib into project

2016-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add gnulib as submodule

2016-01-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Add error code WGET_E_TLS_DISABLED
     
     * libwget/ssl_gnutls.c: If TLS is not compiled in, return WGET_E_TLS_DISABLED
       from wget_ssl_open() and wget_ssl_server_open().

2016-01-05 Darshit Shah <darnir@gmail.com>

     Fix .travis.yml file for Linux systems
     
         * .travis.yml: Container based architecture doesn't allow Sudo.
         Migrate file to support container based architecture
         * .travis.sh: Same

2016-01-08 Darshit Shah <darnir@gmail.com>

     Do not print responses in tests
     
     * tests/test.c (check_cookie): Do not print responses. We want
       this test to expose memory leaks, but printing the response of
       wget_cookie_create_request_header isn't needed.

2016-01-08 Darshit Shah <darnir@gmail.com>

     Use absolute pathanme to find PSL data
     
         * tests/Makefile.am: PSL DATADIR should be the absolute pathname to
         allow us to run tests from any directory.

2016-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Add support for gcrypt hashing
     
     * configure.ac: Add libgcrypt as fallback for libnettle
     * libwget/hashfile.c: Add gcrypt hash functions

2016-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hash functions for use with libnettle
     
     * src/hashfile: Add needed includes (nettle 3.1.1 and 2.7)
     * src/hashfile (wget_hash_deinit): Call digest() instead of update()

2016-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Skip HTTPS tests when no HTTPS available
     
     * tests/test-i-https.c: Skip test when no HTTPS available

2016-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not descend into subdomains if not requested
     
     * src/wget.c (in_host_pattern_list): Fix arguments of wget_match_tail()

2016-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Auto-generate version defines for library header file
     
     * include/libwget.h: Removed
     * include/libwget.h.in: Added

2016-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename LIBWGET_API_VERSION to LIBWGET_VERSION

2016-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix hashing with GnuTLS
     
     * libwget/ssl_gnutls.c: Do not skip automatic library initialization
     * libwget/md5.c (wget_md5_printf_hex): Print message on error
     * tests/test.c: New tests for hashing functionality
     
     GnuTLS automatically initializes on application startup.
     This wastes CPU cycles when not using HTTPS.
     Switched off, simple functionality like MD5 fail (needed for metalink and
     authorization). We have to implement hashing via -lcrypt or -lgcrypt
     later - and than we could  use GNUTLS_SKIP_GLOBAL_INIT again.

2016-01-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Do not percent unescape query
     
     * tests/test.c: Test query parsing in API
     * tests/test-base.c: Test query handling of wget2
     * include/libwget.h: Add flags to wget_iri_t,
       add function wget_iri_unescape_inline()
     * libwget/iri.c: Add function wget_iri_unescape_inline(),
       fix wget_iri_parse() to not percent unescape query
       do not add fragment in wget_iri_get_escaped_resource()

2015-12-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix iconv conversion
     
     * libwget/encoding.c: Kick out the last character from iconv().
     
     Thanks to Eli Zaretskii <eliz@gnu.org> for suggesting the fix.
     Reported-by: "Andries E. Brouwer" <Andries.Brouwer@cwi.nl>

2015-12-13 Ander Juaristi <ajuaristi@gmx.es>

     Fix error return value in I/O code
     
     * libwget/io.c: fix return value of __read() in case of error

2015-11-30 Ander Juaristi <ajuaristi@gmx.es>

     Complete docs in I/O API
     
      * libwget/http.c (wget_http_get_response_cb): removed unused variable
        (compiler warning).
      * libwget/io.c
        (wget_fdgetline,wget_getline,wget_read_file,wget_update_file): added
        source docs. Refactor: avoid code repetition.
        (wget_ready_2_transfer): fixed HTML rendering of docs.
      * docs/libwget/libwget-sections.txt: added new functions to GTK-Doc.

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix return value in HSTS and Cookie code
     
     * libwget/cookie.c (wget_cookie_db_load, wget_cookie_db_save):
       Fix return value
     * libwget/hsts.c (wget_hsts_db_load, wget_hsts_db_save):
       Fix return value

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Disable 'unused' warnings in CSS tokenizer
     
     * libwget/css_tokenizer.lex: Disable GCC warnings unused-parameter
       and unused-function

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Cleanup cookie code
     
     Cookies: Add new function wget_cookie_set_keep_session_cookies()
              and adjust wget_cookie_db_load() and wget_cookie_db_save().
              Use wget_update_file() for loading and saving.

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add check for function param in HSTS  code
     
     * libwget/hsts.c (wget_hsts_db_save): Check hsts_db for NULL,
       (wget_hsts_db_load): Fix typo in error message

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix typo in OSCP error message
     
     * libwget/ocsp.c (wget_ocsp_db_load): Fix typo

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Adjust OCSP and HSTS default file names
     
     * src/options.c (print_help, init): Use ~/.wget-hsts and ~/.wget-ocsp

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix test suite for CygWin
     
     * New CygWin specific code for removing/cleaning test directory

2015-11-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix tests/test.c for non-GNU standard C libraries
     
     * tests/test.c (test_buffer_printf): Skip left zero padding strings

2015-11-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Avoid implicit gloabl initialization by GnuTLS
     
     * libwget/ssl_gnutls.c: Use GNUTLS_SKIP_GLOBAL_INIT if defined

2015-11-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix basename in wget_update_file()
     
     * libwget/io.c (wget_update_file): Fxi basename

2015-11-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new options --netrc and --netrc-file
     
     * libwget/netrc.c: New file for netrc API functions
     * include/libwget.h: Add netrc function prototypes
     * libwget/Makefile.am: Add netrc.c
     * libwget/test_linking.c (main): Add call to wget_netrc_deinit()
     * src/options.c: Add --netrc and --netrc-file
     * src/options.h: Add config.netrc and config.netrc_file
     * src/wget.c (http_get): Get login/password from netrc data
     * tests/test-auth-basic.c (main): Add test for --netrc-file

2015-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Add define ascii_isspace and ascii_isalpha
     
     * libwget/xml.c: Add and use defines here

2015-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace strlpcy by memcpy
     
     * src/options.c (set_long_option): Replace strlcpy()

2015-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Replace calls to strncpy by memcpy
     
     * libwget/xml.c (parseXML): Replace calls to strncpy()

2015-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Replaced strndup() by wget_strmemdup()
     
     * examples/getstream.c, examples/print_css_urls2.c, libwget/cookie.c,
       libwget/css_url.c, libwget/encoding.c, libwget/hsts.c,
       libwget/html_url.c, libwget/http.c, libwget/metalink.c,
       libwget/ocsp.c, libwget/robots.c, libwget/ssl_gnutls.c,
       src/options.c, src/wget.c, tests/stringmap_perf.c,
       tests/test-wget-1.c
     
     Strndup() calls an additional strlen() on the input string.
     This is normally not needed, and thus just consumes CPU cycles.
     All calls to strndup() could be replaced by wget_strmemdup, which
     basically allocates len+1 memory, calls memcpy and terminates with
     a 0 byte.

2015-11-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add type of file for OCSP databases
     
     * libwget/ocsp.c (_ocsp_db_save_hosts): Add type of file to database
       files.

2015-11-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Amend message when successfully updating files
     
     * libwget/io.c (wget_update_file): Amend message

2015-11-09 Ander Juaristi <ajuaristi@gmx.es>

     Avoid potential race condition in HSTS code
     
     * libwget/hsts.c (_hsts_db_load): new internal function.
       (wget_hsts_db_load): moved code to _hsts_db_load() internal function.
       (wget_hsts_db_save): lock the file before saving, to avoid race
       conditions. Reload only if access time greater than last read time.

2015-11-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Use wget_update_file() in OCSP code
     
     * libwget/ocsp.c: Rearranged code to use wget_update_file

2015-11-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new function wget_update_file()
     
     * include/libwget.h: Add wget_update_file()
     * libwget/io.c: Add wget_update_file()
     
     Add a function to care about locking, temp files, opening
     overhead for our typical updating file database procedure.
     Useful for HSTS, OCSP and Cookie file databases.

2015-11-08 Tim Rühsen <tim.ruehsen@gmx.de>

     Close va_start() with va_end()
     
     * tests/libtest.c (wget_test): Add va_end()

2015-11-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Adjust HSTS unit tests to latest changes
     
     * tests/test.c (test_hsts): Adjust port 80 test, new port 8080 test

2015-11-04 Tim Rühsen <tim.ruehsen@gmx.de>

     Use logic or instead of binary or
     
     * libwget/atom_url.c (_atom_get_url): Use logic or

2015-10-31 Ander Juaristi <ajuaristi@gmx.es>

     Fixed HSTS policy application
     
      * include/libwget.h (wget_iri_set_scheme): new function.
      * libwget/hsts.c (wget_hsts_host_match): HTTP default port -> HTTPS
        default port
      * libwget/iri.c (wget_iri_set_scheme): new function.
      * src/wget.c (http_get): when changing the scheme, change the port
        number as well (call wget_iri_set_scheme).

2015-10-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Add function wget_global_get_func()
     
     * include/libwget.h: Add wget_global_get_func() prototype
     * libwget/init.c: Add function wget_global_get_func()

2015-10-30 Tim Rühsen <tim.ruehsen@gmx.de>

     Adjust package name and version
     
     * configure.ac: Adjust package name and version

2015-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix HTTP2 in combination with --progress=bar
     
     * src/wget.c (http_get): Call wget_http_get_response_cb()

2015-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Some cleanups
     
     * src/options.c (read_config): Check for config.config_file
                     (get_home_dir): Cleanup
                     (init): Check for readability of config.config_file

2015-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Free config.config_file on exit
     
     * src/options.c (deinit): Free config.config_file

2015-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Exit early on 0 URLs to process
     
     * src/wget.c (main): Exit if no URLs found to process

2015-10-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Print error for unsupported CLI URLs
     
     * src/wget.c (add_url_to_queue): Print error message

2015-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename --dns-cache to --dns-caching
     
     * src/options.c: Rename --dns-cache to --dns-caching,
       Remove double entry from help text

2015-10-27 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename --continue-download to --continue
     
     * src/options.c: Rename --continue-download to --continue

2015-10-26 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix default_page to default-page in help text
     
     * src/options.c: Fix default_page to default-page

2015-10-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix HTML BASE with absolute path
     
     * src/wget.c (html_parse): Fix HTML BASE with absolute path
     * tests/Makefile.am: Add test-base.c
     * tests/test-base.c: New file

2015-10-25 Tim Rühsen <tim.ruehsen@gmx.de>

     Add download statistics
     
     * src/wget.c: New structure _statistics_t,
       New function _fetch_and_add_longlong(),
       (main): Print stats
       (http_get): Collect stats

2015-10-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove unused argument argv from option parser functions
     
     * src/options.c (struct option): Remove argv from parser()
       (print_help, parse_integer, parse_numbytes, parse_string,
        parse_stringset, parse_stringlist, parse_taglist, parse_bool,
        parse_mirror, parse_timeout, parse_cert_type, parse_restrict_names,
        parse_n_option, parse_prefer_family, parse_execute, parse_execute):
       Remove unused argument argv.
     * src/options.c (set_long_option): Adjust calls to parser functions.

2015-10-24 Tim Rühsen <tim.ruehsen@gmx.de>

     Comment code for broken servers and document it
     
     * libwget/src (wget_http_parse_response_header): Comment code
       for broken servers and document it.

2015-10-24 Darshit Shah <darnir@gmail.com>

     Ensure atleast one downloader thread
     
     * src/options.c (init): The check for the minimum number of downloader
     threads should be done on config.max_threads not config.num_threads.

2015-10-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Abort on SIGTERM or on 2x CTRL-C
     
     i* src/wget.c (nop): Abort on SIGTERM or on 2x CTRL-C

2015-10-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --config option for backwards compatibility
     
     * src/options.c: Add --config

2015-10-23 Giuseppe Scrivano <gscrivan@redhat.com>

     Exit immediately if cannot set http_proxy or https_proxy
     
     * src/wget.c (main): Exit immediately on an "init()" error.
     * src/options.c (init): Raise an error if cannot set http_proxy or https_proxy.
     * tests/test-parse-html.c (main): Check for "init" errors.
     * tests/test.c (main): Check for "init" errors.

2015-10-23 Giuseppe Scrivano <gscrivan@redhat.com>

     set_http_proxy and set_https_proxy can return an error
     
     * libwget/http.h (wget_http_set_http_proxy): change the return type to int.
     (wget_http_set_https_proxy): change the return type to int
     * libwget/http.c (wget_http_set_http_proxy): return an error if cannot set the proxies.
     (wget_http_set_https_proxy): return an error if cannot set the proxies.

2015-10-22 Giuseppe Scrivano <gscrivan@redhat.com>

     Indent C preprocessor directives
     
     * libwget/css_tokenizer.h: Indent C preprocessor directives.
     * libwget/net.h: Likewise.
     * libwget/private.h: Likewise.
     * src/bar.h: Likewise.
     * src/blacklist.h: Likewise.
     * src/compat_fnmatch.h: Likewise.
     * src/host.h: Likewise.
     * src/job.h: Likewise.
     * src/log.h: Likewise.
     * src/options.h: Likewise.
     * src/wget.h: Likewise.

2015-10-22 Giuseppe Scrivano <gscrivan@redhat.com>

     .dir-locals.el: new file

2015-10-22 Giuseppe Scrivano <gscrivan@redhat.com>

     Fix function prototypes
     
     * src/bar.h: Fix function prototype.
     * src/blacklist.h: Fix function prototype.
     * src/compat_fnmatch.h: Fix function prototype.
     * src/host.h: Fix function prototype.
     * src/job.h: Fix function prototype.
     * src/log.h: Fix function prototype.
     * src/options.h: Fix function prototype.

2015-10-22 Giuseppe Scrivano <gscrivan@redhat.com>

     Check for wget_iri_parse errors
     
     * libwget/ssl_gnutls.c (send_ocsp_request): Check for wget_iri_parse errors.
     * libwget/http_highlevel.c (wget_http_get): Check for wget_iri_parse errors.
     * libwget/http.c (_parse_proxies): Check for wget_iri_parse errors.

2015-10-21 Ander Juaristi <ajuaristi@gmx.es>

     Documented hashing functions

2015-10-20 Ander Juaristi <ajuaristi@gmx.es>

     Typos

2015-10-20 Ander Juaristi <ajuaristi@gmx.es>

     Initial docs for hashing utils

2015-10-23 Darshit Shah <darnir@gmail.com>

     Fix compiler warning about unused return code
     
     * src/options.c (init): Clang complains about an unused return code from
     asprintf. So, we check to ensure that asprintf() actually managed to
     allocate the said string.

2015-10-23 Darshit Shah <darnir@gmail.com>

     Allow recursive downloads to be more concurrent
     
     * src/wget.c (main): In cases where the queue_size is not known at
     startup, spawn the maximum allowed threads for the thread pool.

2015-10-22 Darshit Shah <darnir@gmail.com>

     Add option to explicitly set path to wgetrc file
     
     * src/options.c (print_help, config, init, options): Add new option
     --config-file.
     * src/options.h: Same as above
     * src.options.c (read_config): Use the config.config_file value instead
     of a hard coded file path for wgetrc

2015-10-22 Darshit Shah <darnir@gmail.com>

     OCSP and HSTS files should be stored to ~/.wget_*
     
     * src/options.c: Include the pwd.h file to get access to pwd routines
     * src/options.c (get_home_dir): New function that return strdup'ed
     string containing location of directory for storing config files
     * src/options.c (init): Initialize the config.hsts_file and
     config.ocsp_file values correctly using get_home_dir()
     * src/options.h (config): Move hsts_file and ocsp_file from being const
     char* storages to only char* storages.

2015-10-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Add new test tests/test-redirection.c

2015-10-20 Tim Rühsen <tim.ruehsen@gmx.de>

     Add extension of test suite port variables in response headers
     
     * tests/libtest.h: Add member header_alloc to wget_test_url_t
     * tests/libtest.c: Extend port vars in response headers

2015-10-19 Tim Rühsen <tim.ruehsen@gmx.de>

     On CTRL-C save downloaded data before exit
     
     * include/libwget.h: New declaration wget_http_abort_connection()
     * libwget/http.c: New function wget_http_abort_connection()
     * src/wget.c: Call wget_http_abort_connection() on CTRL-C

2015-10-19 Giuseppe Scrivano <gscrivan@redhat.com>

     gnutls: check for gnutls_srp_server_get_username function

2015-10-18 Darshit Shah <darnir@gmail.com>

     Rename option --num-threads to --max-threads
     
     * src/options.[ch]: Rename the option --num-threads to --max-threads
     which better describes the content it holds. We keep the --num-threads
     config option around, since it will be used to hold the *actual* number
     of threads in this instance of Wget2.
     * src/wget.c (main): Initialize the value of config.num_threads. This
     value is atmost config.max_threads or the number of URLs to download,
     whichever is lower.

2015-10-18 Tim Rühsen <tim.ruehsen@gmx.de>

     Change 'git branch' into 'git checkout'
     
     * README.md: Change 'git branch' into 'git checkout'

2015-10-17 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix TLS read timeout issue with GnuTLS 3.4.x
     
     * libwget/ssl_gnutls.c (wget_ssl_read_timeout): Comment out
       code path for GnuTLS >= 0x030107

2015-10-16 Darshit Shah <darnir@gmail.com>

     Fix issue when --debug is the first option passed
     
         * src/options.c (init): set_long_option() expects only a the option
         name without the preceeding --. Ensure that we remove those when
         passing the --debug flag.

2015-10-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix shell in contrib/gen_option_diff.sh
     
     * contrib/gen_option_diff.sh: Explicitly use /bin/bash

2015-10-15 Tim Rühsen <tim.ruehsen@gmx.de>

     Add contrib/gen_option_diff.sh
     
     * contrib/gen_option_diff.sh: New script file

2015-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove mentioning SPDY from README.md
     
     * README.md: Remove mentioning SPDY

2015-10-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Rename wget executable to wget2
     
     * .gitignore: Replace src/wget by src/wget2
     * src/Makefile.am: Rename wget to wget2
     * tests/Makefile.am: Link wget2-* objects
     * tests/libtest.c: Execute wget2 instead of wget

2015-09-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Handle TLS rehandshakes
     
     * libwget/ssl_gnutls.c: New static function _do_handshake()
     * libwget/ssl_gnutls.c (wget_ssl_open): Move handshake code to _do_handshake()
     * libwget/ssl_gnutls.c (wget_ssl_server_open): Use _do_handshake()
     * libwget/ssl_gnutls.c (wget_ssl_read_timeout): Handle rehandshake
     * libwget/ssl_gnutls.c (wget_ssl_write_timeout): Handle rehandshake

2015-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     Add copyright notes to NEWS
     
     * NEWS: Add copyright notes

2015-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Print number of downloaded files and bytes when done
     
     * src/wget.c: Print number of downloaded files and bytes when done

2015-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix SPDY incompatibility
     
     * src/options.c: Remove spdy/3.1 from ALPN offer

2015-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix README
     
     * README: Fix to wget2

2015-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix README.md
     
     * README.md: Fix to wget2

2015-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Transfer copyright to Free Software Foundation, Inc.

2015-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix mailing list and website in configure.ac
     
     * configure.ac: Fix mailing list and website in AC_INIT

2015-09-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Add ABOUT-NLS and INSTALL to .gitignore
     
     * .gitignore: Add ABOUT-NLS and INSTALL

2015-09-21 Tim Rühsen <tim.ruehsen@gmx.de>

     Add fallback code for GnuTLS < 3.1.7
     
     * libwget/ssl_gnutls.c (wget_ssl_read_timeout): Add fallback code for
       older versions of GnuTLS.

2015-09-19 Tim Rühsen <tim.ruehsen@gmx.de>

     Transform Mget into Wget

2015-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     More HTTP/2 related code, new option --(no-)http2

2015-09-13 Tim Rühsen <tim.ruehsen@gmx.de>

     Fixed cookie test routine

2015-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Added missing breaks to switch in libtest.c

2015-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix resource leak in new HTTP/2 code

2015-09-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix compilation without nghttp2

2015-09-11 Tim Rühsen <tim.ruehsen@gmx.de>

     HTTP/2 download is working

2015-09-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix res->encoding in _html_get_url()

2015-09-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix typo in comment

2015-09-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Rearrange HTTP header API

2015-09-07 Tim Rühsen <tim.ruehsen@gmx.de>

     Request HTTP/1.1 and HTTP/2.0 via ALPN

2015-08-31 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix Content-Disposition filename retrieval

2015-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix filename when charset conversion fails #2

2015-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove iconv() from AC_CHECK_FUNCS

2015-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Include sys/types.h in libmget.h

2015-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix filename when charset conversion fails

2015-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Unify mget_ssl_server_open and mget_ssl_open

2015-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add AUTH command to FTP test suite

2015-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add tests/test-ftps.c

2015-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove INSTALL from git

2015-07-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Add mget_tcp_tls_start() and mget_tcp_tls_stop()

2015-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Add FTPS server to test suite

2015-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     Allow ordered and unordered I/O for FTP test suite

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Add --inet4-only to tests/test-ftp.c

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Added EPSV to tests/libtest.c

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Include sys/wait.h for WIF* macros

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove tests/.test_* with make clean

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove unused variables from tests/libtest.c

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove GNU make specialty from libmget/Makefile.am

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Remove qsort_r trampoline version

2015-07-10 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix tests/libtest.c crash recently introduced

2015-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add first FTP testing capability

2015-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Don't cache automatic server ports

2015-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add Travis CI OSX check

2015-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix typo in libmget/encoding.c

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Work around a libidn 1.30 vulnerability

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Revert "Bump GETTEXT to version 0.19.1"
     
     This reverts commit 469e501859c33ab0cb842eb5928698ed29ed9f9e.

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Allow NULL for mget_http_parse_setcookie()i cookie param

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Bump GETTEXT to version 0.19.1

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Avoid tautological check warnings from clang

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Avoid printf format warning

2015-07-06 Tim Rühsen <tim.ruehsen@gmx.de>

     Add check and support for BSD style qsort_r

2015-07-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Fix check for HAVE_DPRINTF in libmget/printf.c

2015-05-04 Tim Ruehsen <tim.ruehsen@gmx.de>

     Fix waste of CPU cycles in mget_iri_relative_to_abs()

2015-05-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     prepared for release

2015-03-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     use random/srandom instead weak functions rand/srand

2015-03-18 Tim Rühsen <tim.ruehsen@gmx.de>

     added .gitignore

2015-03-13 Tim Rühsen <tim.ruehsen@gmx.de>

     fixing two more Coverity issues

2015-03-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixing more Coverity issues

2015-03-09 Tim Rühsen <tim.ruehsen@gmx.de>

     fixing more Coverity issues

2015-03-08 Tim Ruehsen <tim.ruehsen@gmx.de>

     changes in hashmap handling

2015-03-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix several issues found by Coverity

2015-03-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     comment unused mget_bsprintf functions

2015-03-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix possible buffer overflow

2015-03-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     added Coverity Scan Status

2015-02-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix strndup() compat function

2015-02-27 Tim Rühsen <tim.ruehsen@gmx.de>

     replace logger vsprintf, Solaris *printf can't handle NULL arguments

2015-02-27 Tim Rühsen <tim.ruehsen@gmx.de>

     add comment regarding Solaris sprintf behaviour

2015-02-27 Tim Rühsen <tim.ruehsen@gmx.de>

     add link to Solaris (p)thread docs

2015-02-26 Tim Rühsen <tim.ruehsen@gmx.de>

     check for Solaris encoding '646'

2015-02-26 Tim Rühsen <tim.ruehsen@gmx.de>

     convert pid to int

2015-02-26 Tim Rühsen <tim.ruehsen@gmx.de>

     added %c to mget_buffer_vprintf_append2

2015-02-26 Tim Rühsen <tim.ruehsen@gmx.de>

     add -pthread compiler option

2015-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     use mget_buffer_vprintf2 in logger

2015-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     make %s work with NULL values in mget_buffer_printf2()-like functions

2015-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     added libmget/net.h to Makefile.am

2015-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     fixed memleak in mget_http_parse_challenge()

2015-02-24 Tim Rühsen <tim.ruehsen@gmx.de>

     fixed Mget return value for HTTPS failures

2015-02-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed tests/Makefile.am

2015-02-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated tests/certs (old certs expired on 11.2.2015)

2015-02-20 Tim Rühsen <tim.ruehsen@gmx.de>

     added ALPN for TLS sessions

2015-02-06 Tim Ruehsen <tim.ruehsen@gmx.de>

     added missing files to src/Makefile.am

2015-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     add @LTLIBICONV@ @LTLIBINTL@ to tests

2015-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     add LTLIBICONV and LTLIBINTL to LDADD for Solaris

2015-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     check for FNM_CASEFOLD

2015-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     include alloca.h

2015-02-06 Tim Rühsen <tim.ruehsen@gmx.de>

     check for libsocket and libnsl on Solaris

2015-02-05 Tim Rühsen <tim.ruehsen@gmx.de>

     fix compiler warnings

2015-02-05 Tim Rühsen <tim.ruehsen@gmx.de>

     include libintl.h before redefinition of gettext functions

2015-02-04 Tim Rühsen <tim.ruehsen@gmx.de>

     added Resources in comment of libmget/ssl_gnutls.c

2015-01-30 Tim Rühsen <tim.ruehsen@gmx.de>

     include alloca.h if available

2015-01-30 Tim Rühsen <tim.ruehsen@gmx.de>

     require gettext 0.18.1

2015-01-30 Tim Rühsen <tim.ruehsen@gmx.de>

     fix configure and doc stuff

2015-01-30 Tim Rühsen <tim.ruehsen@gmx.de>

     fix compilation with older GnuTLS (without OCSP)

2015-01-29 Tim Rühsen <tim.ruehsen@gmx.de>

     added full cert chain OCSP check

2015-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     fix building man pages

2015-01-22 Tim Rühsen <tim.ruehsen@gmx.de>

     fix conditional HAVE_PO in configure.ac

2015-01-16 Tim Rühsen <tim.ruehsen@gmx.de>

     OCSP check the whole certificate chain

2015-01-15 Tim Rühsen <tim.ruehsen@gmx.de>

     added OCSP fix from GnuTLS project
     
     https://gitorious.org/gnutls/gnutls/commit/11eebe14b232ec198d1446a3720e6ed78d118c4b

2015-01-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix mget_tcp_set_tcp_fastopen()

2015-01-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed two indentations in configure.ac

2015-01-13 Tim Rühsen <tim.ruehsen@gmx.de>

     added --tcp-fastopen to enable/disable TCP Fast Open

2015-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     removed --load-hsts and --save-hsts

2015-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     add creation time to OCSP entries

2015-01-09 Tim Rühsen <tim.ruehsen@gmx.de>

     fix loading/saving OCSP cache

2015-01-08 Tim Rühsen <tim.ruehsen@gmx.de>

     added OCSP response caching

2015-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     OCSP code tuning

2015-01-07 Tim Rühsen <tim.ruehsen@gmx.de>

     added linefeed in --help text

2015-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     mention autopoint as build requisite

2015-01-05 Tim Rühsen <tim.ruehsen@gmx.de>

     Skip po directory if GETTEXT not available

2014-12-31 Tim Rühsen <tim.ruehsen@gmx.de>

     fix OCSP request condition

2014-12-30 Tim Rühsen <tim.ruehsen@gmx.de>

     list pkg-config in Requirements

2014-12-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     added more tests for parsing challenges

2014-12-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     added test for WWW-Authenticate challenge parsing

2014-12-18 Tim Rühsen <tim.ruehsen@gmx.de>

     new options --ocsp and --ocsp-stapling

2014-12-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     Check for gnutls/ocsp.h to compile on older systems

2014-12-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     First experimental commit with OCSP (stapling+non-stapling) support

2014-12-09 Tim Rühsen <tim.ruehsen@gmx.de>

     tail match instead of full match for --domains/-D/--exclude-domains

2014-12-09 Tim Rühsen <tim.ruehsen@gmx.de>

     Add wildcard support for -D/--domains and --exclude-domains

2014-11-23 Tim Ruehsen <tim.ruehsen@gmx.de>

     add +/-psl to --version output

2014-11-14 Tim Rühsen <tim.ruehsen@gmx.de>

     added pkg-config support for library searching

2014-11-12 Tim Rühsen <tim.ruehsen@gmx.de>

     check GnuTLS version for OCSP functionality

2014-11-12 Tim Rühsen <tim.ruehsen@gmx.de>

     fix compilation error, add OCSP stapling status report

2014-11-12 Tim Rühsen <tim.ruehsen@gmx.de>

     Cert messages slightly amended

2014-11-10 Tim Rühsen <tim.ruehsen@gmx.de>

     check for qsort_r()

2014-10-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --crl-file for CRL certificates

2014-10-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     moved basic progress bar routines to libmget

2014-10-13 Tim Rühsen <tim.ruehsen@gmx.de>

     fixed race condition when having a filename / directory clash

2014-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     added port to Referer: HTTP header

2014-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     changed valgrind testing

2014-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     better result code compatibility with Wget

2014-10-10 Tim Rühsen <tim.ruehsen@gmx.de>

     more pedantic scheme check for IRI parsing

2014-10-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed css_tokenizer.c from po/POTFILES.in

2014-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     use AM_TESTS_ENVIRONMENT for valgrind testing

2014-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     suppress lex warnings

2014-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     building docs with distcheck -jn randomly failed, now using .NOTPARALLEL

2014-10-07 Tim Rühsen <tim.ruehsen@gmx.de>

     tuned makefiles

2014-09-23 Tim Rühsen <tim.ruehsen@gmx.de>

     use ASCII-only string case comparison

2014-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     added --post-data and --post-file

2014-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     added --backups

2014-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     removed debugging from test-directory-clash

2014-09-22 Tim Rühsen <tim.ruehsen@gmx.de>

     fixed directory clashes and added test-directory-clash

2014-09-18 Tim Rühsen <tim.ruehsen@gmx.de>

     added threaded progress bar (--progress=bar)

2014-09-12 Tim Rühsen <tim.ruehsen@gmx.de>

     added progrsss bar code

2014-09-09 Tim Rühsen <tim.ruehsen@gmx.de>

     added --follow-tags and --ignore-tags

2014-09-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix for 'unsigned char' architectures

2014-09-05 Tim Rühsen <tim.ruehsen@gmx.de>

     fixed clang detections

2014-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     rearranged some metalink code

2014-08-29 Tim Rühsen <tim.ruehsen@gmx.de>

     make cross-compilable with MinGW on Linux

2014-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     added some first MinGW compatibility code

2014-08-28 Tim Rühsen <tim.ruehsen@gmx.de>

     updated PSL file effective_tld_names.dat

2014-08-27 Tim Rühsen <tim.ruehsen@gmx.de>

     amended NEWS

2014-08-27 Tim Rühsen <tim.ruehsen@gmx.de>

     prepared for release

2014-08-27 Tim Rühsen <tim.ruehsen@gmx.de>

     added -m / --mirror

2014-08-27 Tim Rühsen <tim.ruehsen@gmx.de>

     added link to Wikipedia comparison of file systems

2014-08-27 Tim Rühsen <tim.ruehsen@gmx.de>

     added descriptions of options to --help

2014-08-20 Tim Rühsen <tim.ruehsen@gmx.de>

     removed unneeded libpsl reference in src/options.h

2014-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     increased version number in configure.ac

2014-08-15 Tim Rühsen <tim.ruehsen@gmx.de>

     prepared for release

2014-07-17 Tim Rühsen <tim.ruehsen@gmx.de>

     added -k/--convert-links and -K/--backup-converted

2014-07-14 Tim Rühsen <tim.ruehsen@gmx.de>

     fix tests for when not having libpsl support

2014-07-11 Tim Rühsen <tim.ruehsen@gmx.de>

     use libpsl for cookie checking against Public Suffix List

2014-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     update PSL data

2014-07-09 Tim Rühsen <tim.ruehsen@gmx.de>

     more cleanups to configure.ac

2014-07-08 Tim Rühsen <tim.ruehsen@gmx.de>

     cleaned up configure.ac

2014-07-03 Tim Rühsen <tim.ruehsen@gmx.de>

     added new test test--accept.c

2014-07-03 Tim Rühsen <tim.ruehsen@gmx.de>

     added --accept, --reject, --ignore-case

2014-06-29 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed race-condition on 'known_urls' variable

2014-06-25 Tim Ruehsen <tim.ruehsen@gmx.de>

     make distcheck without -j4

2014-06-25 Tim Ruehsen <tim.ruehsen@gmx.de>

     check for HTTP/HTTPS in add_url()

2014-06-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed two lines of debugging output

2014-06-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed HTML parsing of uppercase attributes (fixes issue #21)

2014-05-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     do not keep tmpfiles in test--page-requisites.c

2014-05-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     added test--page-requisites and fixed -p/--page-requisites

2014-04-04 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix some clang warnings

2014-03-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed psl.c from examples

2014-03-20 Tim Ruehsen <tim.ruehsen@gmx.de>

     changes on psl.c

2014-03-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     make cookies and tests working with new PSL

2014-03-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     working on example/psl.c

2014-03-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed up cookie code

2014-03-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     added experimental PSL code

2014-03-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated public suffixes list

2014-03-08 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix sigfault in cookie functions

2014-03-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --gnutls-options to NEWS file

2014-03-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --gnutls-otpions to directly set a GnuTLS priority string

2014-03-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added error messages if requested CAs or keys are not found

2014-02-26 Tim Ruehsen <tim.ruehsen@gmx.de>

     improved cookie API

2014-02-20 Tim Ruehsen <tim.ruehsen@gmx.de>

     tuned HSTS API

2014-02-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for RFC 6266 Content-Disposition

2014-02-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed two threading race-conditions

2014-02-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     make HTTPS tests work with GnuTLS 2.12

2014-02-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix system ca_directory for GnuTLS < 3

2014-02-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed HTTPS testing to succeed distcheck

2014-02-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     added HTTPS server code for the test suite

2014-02-11 Tim Ruehsen <tim.ruehsen@gmx.de>

     added i/o helper routines to documentation

2014-02-08 Tim Ruehsen <tim.ruehsen@gmx.de>

     added make distcheck to .travis.yml

2014-02-08 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix docs/libmget/Makefile.am again

2014-02-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed man page generation and make distcheck

2014-02-06 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed generating man pages, added some documentation

2014-02-05 Tim Ruehsen <tim.ruehsen@gmx.de>

     small docs changes

2014-02-05 Tim Ruehsen <tim.ruehsen@gmx.de>

     added plg-config, brushed up configure.ac and Makefiles

2014-02-05 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix type naming to mget type naming convention

2014-02-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated gettext

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed minor clang warnings

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed some minor warnings

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added Travis CI .travis.yml

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed minor clang warnings

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed some minor warnings

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     extended .travis.yml

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix .travis.yml, typo in configure.ac string

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix .travis.yml

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix .travis.yml

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix .travis.yml

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added Travis CI .travis.yml

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added test routine for HSTS feature

2014-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix possible endless loop in http_parse_param()

2014-02-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for RFC 6797 HTTP Strict Transport Security (HSTS)

2014-02-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     Do not download robots.txt twice for HTTP and HTTPS if --protocol-directories is not given

2014-01-31 Tim Ruehsen <tim.ruehsen@gmx.de>

     working on RFC 6797 HSTS (HTTP Strict Transport Security)

2014-01-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed failing tests of not yet implemented options

2014-01-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     compile check for available hash functions in libnettle

2014-01-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     use libnettle for checksumming if libgnutls not available or too old

2014-01-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed check for libunistring

2014-01-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed warning in ssl_gnutls.c

2014-01-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     gtk-doc optional, project tested on Cygwin

2014-01-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     edited AUTHORS and NEWS

2014-01-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     brushed up README.md

2014-01-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     added Contacts to README.md

2014-01-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     put mailing list address into configure.ac

2014-01-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed 'make distcheck'

2014-01-11 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed some clang 3.4 warnings

2014-01-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     added example print_html_url.c (scanning and printing URLs from HTML files)

2014-01-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix mailing list address in README.md 2nd

2014-01-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix mailing list address in README.md

2014-01-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for bzip2 Content-Encoding / Accept-Encoding type

2014-01-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added 'lzma' to Content-Encoding

2013-12-31 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for XZ Content-Encoding / Accept-Encoding type

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     extended --adjust-extension to attach .rss and .atom

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --waitretry, new function mget_millisleep()

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --wait/-w, --random-wait and -tries/-t

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     allow m, h and d modifiers for timeout options

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     disable valgrind testing by default, just needed by developers

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     use valgrind to check invocations of mget in test suite (and not the test suite itself, as before)

2013-12-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     add IRI that triggers robots.txt to blacklist, create local filename for --continue-download

2013-12-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed test-iri-forced-remote

2013-12-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed test-iri-list

2013-12-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     added new option --input-encoding

2013-12-25 Tim Ruehsen <tim.ruehsen@gmx.de>

     added RSS parsing test

2013-12-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     added parsing RSS 2.0 feeds

2013-12-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed compilation error in atom_url.c

2013-12-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     added parsing Atom 1.0 feeds

2013-12-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     refactored basic sitemap parsing into libmget

2013-11-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     new option --force-sitemap to scan URLs from a local Sitemap XML file

2013-11-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix: added query twice if query contained slash(es)

2013-11-25 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed two more tests

2013-11-25 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed proxy destruction

2013-11-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     added sitemap parsing

2013-11-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix some compiler warnings

2013-11-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     Support arbitrary number of proxies for parallel downloads

2013-11-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed some warnings of clang 3.4

2013-10-31 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --chunk-size to allow multithreaded downloads of single files

2013-10-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --(no-)check-hostname to disable certificate hostname checking only

2013-10-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix po/POTFILES.in

2013-10-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     update po/POTFILES.in

2013-10-22 magemore <alex@magemore.com>

     fix help: wget replaced with mget
2013-10-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     mention package name zlibg1 in README.md

2013-10-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated README.md

2013-10-06 Tim Ruehsen <tim.ruehsen@gmx.de>

     small cleanups regarding use of buffer functions

2013-10-05 Tim Ruehsen <tim.ruehsen@gmx.de>

     check for NULL iri in add_url()

2013-10-04 Tim Ruehsen <tim.ruehsen@gmx.de>

     pull in libunistring if using libidn2

2013-10-04 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed including stringprep.h from examples

2013-10-04 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed clang 3.4 analyzer issues

2013-10-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed double free in mget.c

2013-10-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed memory leak in hashmap_put_noalloc

2013-10-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     Use Etag in spider mode to prevent double downloading

2013-10-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     use HEAD request in spider mode

2013-10-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for IDNA2008 using Libidn2

2013-10-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     started libidn2 usage

2013-10-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     convert / to %2F instead of %2f

2013-10-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     check if url needs utf-8 encoding

2013-10-01 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed --restrict-file-names=uppercase

2013-09-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --restrict-file-names

2013-09-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed crash on non-valid cookie names

2013-09-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     new file host.c, refactored from mget.c

2013-09-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     moved robots routines to new file robots.c

2013-09-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed up ROBOTS/META

2013-09-25 Tim Ruehsen <tim.ruehsen@gmx.de>

     fine tuning on some library functions

2013-09-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --trust-server-names and --restrict-file-names

2013-09-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     preparing for utf-16 support

2013-09-23 Tim Ruehsen <tim.ruehsen@gmx.de>

     recognize 'none' keyword in META/ROBOTS

2013-09-23 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for name=ROBOTS in META tag

2013-09-23 Tim Ruehsen <tim.ruehsen@gmx.de>

     added src/host.h

2013-09-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for robots.txt Robots Exclusion Standard

2013-09-20 Tim Ruehsen <tim.ruehsen@gmx.de>

     added option --(no-)parent

2013-09-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     more work on the test suite

2013-09-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --https-only

2013-09-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     added -e/--execute

2013-09-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     test code tweaking

2013-09-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed test suite issues

2013-09-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     some tweaks on encoding

2013-09-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     better handling of non-ASCII URLs and filenames

2013-09-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     adjust README/README.md

2013-09-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     prepared for listing/scanning directories

2013-09-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix memleak in cookie handling

2013-09-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     more work done

2013-09-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     moved metalink stuff to library code

2013-09-09 Tim Ruehsen <tim.ruehsen@gmx.de>

     reenabled metalink3

2013-09-09 Tim Ruehsen <tim.ruehsen@gmx.de>

     threading model reimplemented to put more load onto the workers

2013-08-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     tune xml.c

2013-08-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     mention --secure-protocol=SECURE in help text

2013-08-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     xml parser rewritten to output len and pos of values

2013-08-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     simplified some calls to mget_buffer_init() using C99

2013-08-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix GnuTLS crash on handshake errors

2013-08-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --secure-protocol=secure to force Perfect Forward Secrecy

2013-08-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     small corrections in ssl_gnutls.c

2013-07-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     prefer Digest over Basic authentication if server offers both

2013-07-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     add -fPIC to CFLAGS, remove private path from tests

2013-07-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     added test-auth-basic.c

2013-07-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     more tests

2013-05-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     use TCP Fastopen if available

2013-05-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix bug in hashmap.c

2013-04-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     highlevel improvement

2013-04-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     escape / in query for filename generation

2013-04-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     tuned getstream.c example

2013-04-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     added support for metalink3

2013-04-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated Requirements in README.rst

2013-04-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     handle metalink mirror redirections

2013-04-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     changed part download message

2013-04-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     renamed option --base-url to --base

2013-04-09 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed stringmap/hashmap usage in mget.c and blacklist.c

2013-04-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     getstream.c example now handles Shoutcast metainfo

2013-03-29 Tim Ruehsen <tim.ruehsen@gmx.de>

     cleaned up hashmap/stringmap API

2013-03-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     let HTTP test server understand Range headers

2013-03-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     converted more tests from Perl to C IV

2013-03-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     converted more tests from Perl to C III

2013-03-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     converted more tests from Perl to C II

2013-03-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     converted more tests from Perl to C

2013-03-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     work on test suite

2013-03-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --content-disposition

2013-03-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     new C testsuite

2013-03-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed double free in blacklist.c

2013-03-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     added option -p and -l

2013-02-06 Benoit Goudreault-Emond <bgoudreault@webmd.net>

     Ensure the m4 directory is created, or builds won't work out of the box.

2013-02-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     new example getting a stream from a .m3u URL

2013-02-02 Tim Ruehsen <tim.ruehsen@gmx.de>

     new abstract thread functions

2013-01-30 Benoit Goudreault-Emond <bgoudreault@webmd.net>

     Fix errors in potfile.in that made makefile fail

2013-01-29 Tim Ruehsen <tim.ruehsen@gmx.de>

     put work into high level example http_get.c

2013-01-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     added libmget/md5.c

2013-01-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     Updated README.rst

2013-01-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     moved http.c and md5.c into library

2013-01-18 rockdaboot <tim.ruehsen@gmx.de>

     Update README.rst
2013-01-18 rockdaboot <tim.ruehsen@gmx.de>

     Update README.rst
2013-01-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix more stuff

2013-01-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     more basic work on libmget

2013-01-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     new examples folder

2013-01-13 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix make distcheck

2013-01-11 Tim Ruehsen <tim.ruehsen@gmx.de>

     more stuff moved into libmget

2013-01-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     more stuff moved into libmget

2013-01-07 Tim Ruehsen <tim.ruehsen@gmx.de>

     added two doc files to git

2013-01-04 Tim Ruehsen <tim.ruehsen@gmx.de>

     more documentation stuff

2013-01-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     started gtk-docs

2013-01-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated README.rst

2013-01-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     more auto* stuff

2012-12-31 Tim Ruehsen <tim.ruehsen@gmx.de>

     use LGPL for libmget

2012-12-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     step forward to libmget

2012-12-26 Tim Ruehsen <tim.ruehsen@gmx.de>

     HTTP basic/digest authentication, send Referer HTTP header

2012-12-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     started Authentication

2012-12-20 Tim Ruehsen <tim.ruehsen@gmx.de>

     use gcc -Wsign-compare option

2012-12-20 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed --secure-protocol=SSLv2/SSLv3

2012-12-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     added -D/--domains and --exclude-domains

2012-12-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     added 'deflate' Content-Encoding

2012-12-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     IDN / international domain support finished

2012-12-11 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed an URI test that had no host host part

2012-12-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     added IDN conversion for locally provided URIs

2012-12-09 Tim Ruehsen <tim.ruehsen@gmx.de>

     started with IDN / URI encoding

2012-12-08 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --bind-address, fixed parsing IPv6 numeric addresses

2012-12-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     added -Q/--quota, added configure script

2012-11-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     started with -Q

2012-11-30 Tim Ruehsen <tim.ruehsen@gmx.de>

     added -i, -F, -B, --force-css

2012-11-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --default_page

2012-11-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     added -E/--adjust-extension/--html-extension, C89 NONNULL macro

2012-11-28 Tim Ruehsen <tim.ruehsen@gmx.de>

     removed variadic macros

2012-11-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated README.rst

2012-11-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     using autotools

2012-11-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     directory structure changes

2012-11-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     some hashmap optimization

2012-11-20 Tim Ruehsen <tim.ruehsen@gmx.de>

     fixed double free in hashmap_put_noalloc for key/value identity

2012-11-19 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --referer

2012-11-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --save-headers

2012-11-18 Tim Ruehsen <tim.ruehsen@gmx.de>

     check for gnutls version number when using *ECDH* stuff

2012-11-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated BSD compatibility

2012-11-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --clobber / -nc

2012-11-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --cache to enable/disable server cache

2012-11-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --inet4-only, --inet6-only, --prefer-family

2012-11-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --delete-after

2012-11-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     added -n options

2012-11-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --strict-comments as dummy option

2012-11-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     added directory options and timestamping

2012-11-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --continue / -c

2012-11-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     added --server-response / -S

2012-11-12 Tim Ruehsen <tim.ruehsen@gmx.de>

     added proxy support

2012-11-09 Tim Ruehsen <tim.ruehsen@gmx.de>

     added blacklist.(c|h) and stringmap.(c|h)

2012-11-08 Tim Ruehsen <tim.ruehsen@gmx.de>

     added hashmap functions

2012-11-06 Tim Ruehsen <tim.ruehsen@gmx.de>

     cookie support incl. Mozilla Public Suffix List

2012-10-05 Tim Ruehsen <tim.ruehsen@gmx.de>

     url escaping

2012-09-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     buffer_printf routines

2012-09-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     more internal work

2012-08-29 Tim Ruehsen <tim.ruehsen@gmx.de>

     more gnutls debugging output

2012-08-27 Tim Ruehsen <tim.ruehsen@gmx.de>

     HTTPS options to achieve wget compatibility

2012-08-24 Tim Ruehsen <tim.ruehsen@gmx.de>

     more test functions

2012-08-22 Tim Ruehsen <tim.ruehsen@gmx.de>

     added buffer functions

2012-08-21 Tim Ruehsen <tim.ruehsen@gmx.de>

     more tests, some fixes

2012-08-17 Tim Ruehsen <tim.ruehsen@gmx.de>

     added options -o and -a

2012-08-16 Tim Ruehsen <tim.ruehsen@gmx.de>

     added option -q

2012-08-15 Tim Ruehsen <tim.ruehsen@gmx.de>

     fix gnutls

2012-08-14 Tim Ruehsen <tim.ruehsen@gmx.de>

      * fixed vector.c / vec_insert_sorted_noalloc()
      * added test for vec_insert_sorted_noalloc()
      * fixed css.c / css_parse_file()

2012-08-14 Tim Ruehsen <tim.ruehsen@gmx.de>

     implemented DNS lookup cache, --dns-cache=on|off

2012-08-13 Ant Bryan <anthonybryan@gmail.com>

     README.rst typos

2012-08-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     some refactoring, handle relative Location:

2012-08-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated README.rst

2012-08-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     updated README.rst

2012-08-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     new README.rst

2012-08-10 Tim Ruehsen <tim.ruehsen@gmx.de>

     * HTTPS via gnutls
     * Many bug fixes and enhancements

2012-08-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     Updated README

2012-08-03 Tim Ruehsen <tim.ruehsen@gmx.de>

     Repository created
